/**
 * Developer    :   SongQian
 * Time         :   2021-02-08
 * Descript     :   A, T, K, Y 路口图形组件
 */

(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :
    typeof define === 'function' && define.amd ? define(['exports'], factory) :
    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.intersection = {}));
}(this, (function (exports) { 
    'use strict';

    var utils = {
        uuid: function() {
            function S4() {
                return (((1+Math.random()) * 0x10000)|0).toString(16).substring(1);
            }
            return S4() + S4() + "-" + S4() + "-" + S4() + "-" + S4() + "-" + S4() + S4() + S4();
        },
        calcRadiusAnyPoint: function(ox, oy, r, angle) {
            //计算圆某角度的点位置
            angle |= 0;
            ox |= 0;
            oy |= 0;
            var x = ox + r * Math.cos(angle * Math.PI / 180);
            var y = oy + r * Math.sin(angle * Math.PI / 180);
            return { x: x, y: y };
        },
        calcTriangleSubtenseLen: function(subtense, angle) {
            //计算等腰三角的底边（弦）的长度
            if(isNaN(subtense) || subtense <= 0) {
                throw new Error('三角边长不能 subtense <= 0值')
            }

            if (isNaN(angle) || angle <= 0) {
                return new Error('三角的角度不能 angle <= 0值')
            }
            var oa = (180 - angle) / 2;
            return 2 * subtense * Math.cos(oa * Math.PI / 180);
        },
        calcTriangleForCH: function(a, b) {
            //计算直角三角形的边（弦）的高
            // var c = Math.sqrt(a * a + b * b);
            // var p = (a + b + c) / 2;
            // var s = Math.sqrt(p * (p - a) * (p - b) * (p - c));
            // return 2 / (c * s);
        },
        calcTriangleHeight: function(c, angle) {
            //计算任意三角形的边（弦）的高
            return Math.sin(angle) * c; 
        },
        calcPointDist: function(a, b) {
            //计算两点距离
            return Math.sqrt((b.x - a.x) * (b.x - a.x) + (b.y - a.y) * (b.y - a.y));
        },
        calcTriangleAngle: function(p1, p2) {
            //计算两点的角度, 0度值在正上方
            var angle = Math.atan2((p2.x - p1.x), (p2.y - p1.y));
            return 180 - (angle * (180 / Math.PI));
        },
        calcLineIntersection: function(p0, p1, p2, p3) {
            //计算两线段的交点
            var A1 = p1.y - p0.y,
			    B1 = p0.x - p1.x,
			    C1 = A1 * p0.x + B1 * p0.y,
			    A2 = p3.y - p2.y,
			    B2 = p2.x - p3.x,
			    C2 = A2 * p2.x + B2 * p2.y,
			    denominator = A1 * B2 - A2 * B1;
            if (denominator == 0) {
                return { x: 0, y: 0 }
            }
            var intersectX = (B2 * C1 - B1 * C2) / denominator,
			intersectY = (A1 * C2 - A2 * C1) / denominator,
			rx0 = (intersectX - p0.x) / (p1.x - p0.x),
			ry0 = (intersectY - p0.y) / (p1.y - p0.y),
			rx1 = (intersectX - p2.x) / (p3.x - p2.x),
			ry1 = (intersectY - p2.y) / (p3.y - p2.y);
            if(((rx0 >= 0 && rx0 <= 1) || (ry0 >= 0 && ry0 <= 1)) && ((rx1 >= 0 && rx1 <= 1) || (ry1 >= 0 && ry1 <= 1))) {
                return {
                    x: intersectX,
                    y: intersectY
                }
            } else {
                return { x: 0, y: 0 };
            }
        }
    }

    //车道绘制
    var LaneRenderer = function() {
        var template = [
            "<g :transform='calcTransform'>",
                "<rect x='0' y='0' width='100' height='499999.5' fill='#333' @click.capture.stop='onPavementClick' />",
                "<line v-if=\"(type === 'solid' || type === 'dotted') && markright && !assist && hasBoundary\" x1='1' x2='1' :y1=\"type === 'dotted' ? 0 : 600\" y2='499999.5' stroke='#fff' stroke-width='2' stroke-dasharray='10,10' style='pointer-events:visibleStroke;' @click.capture.stop='onWhiteLineClick' />",
                "<line v-if=\"(type === 'solid' || type ==='parterre') && markright && hasBoundary\" x1='1' x2='1' y1='0' :y2=\"assist || type === 'parterre' ? '499999.5' : '600' \" stroke='#fff' stroke-width='2' style='pointer-events:visibleStroke;' @click.capture.stop='onParterreBoundaryLineClick' />",
                "<line v-if=\"(type === 'solid' || type === 'dotted') && !markright && !assist  && hasBoundary \" x1='99' x2='99' :y1=\"type === 'dotted' ? 0 : 600\" y2='499999.5' stroke='#fff' stroke-width='2' stroke-dasharray='10,10' style='pointer-events:visibleStroke;' @click.capture.stop='onWhiteLineClick' />",
                "<line v-if=\"(type === 'solid' || type === 'parterre') && !markright && hasBoundary\" x1='99' x2='99' y1='0' :y2=\"assist || type === 'parterre' ? '499999.5' : '600' \" stroke='#fff' stroke-width='2' style='pointer-events:visibleStroke;' @click.capture.stop='onParterreBoundaryLineClick' />",
                "<line v-if=\"['y_dotted', 'y_solid', 'y_double_dashed', 'y_double_solid'].indexOf(type) > -1 && markright && hasBoundary\" x1='1' x2='1' y1='0' y2='499999.5' stroke='#d6cb0a' stroke-width='2' :stroke-dasharray=\"markright && type === 'y_dotted' ? '10,10' : ''\" style='pointer-events:visibleStroke;' @click.capture.stop='onYellowLineClick($event, true)' />",
                "<line v-if=\"['y_double_solid', 'y_double_dashed'].indexOf(type) > -1 && markright && hasBoundary\" x1='5' x2='5' y1='0' y2='499999.5' stroke='#d6cb0a' stroke-width='2' :stroke-dasharray=\"markright && ['y_double_dashed'].indexOf(type) > -1 ? '10,10' : ''\" style='pointer-events:visibleStroke;' @click.capture.stop='onYellowLineClick($event, false)' />",
                "<line v-if=\"['y_dotted', 'y_solid', 'y_double_dashed', 'y_double_solid'].indexOf(type) > -1 && !markright && hasBoundary\" x1='99' x2='99' y1='0' y2='499999.5' stroke='#d6cb0a' stroke-width='2' :stroke-dasharray=\"!markright && type === 'y_dotted' ? '10,10' : ''\" style='pointer-events:visibleStroke;' @click.capture.stop='onYellowLineClick($event, true)' />",
                "<line v-if=\"['y_double_solid', 'y_double_dashed'].indexOf(type) > -1 && !markright && hasBoundary\" x1='95' x2='95' y1='0' y2='499999.5' stroke='#d6cb0a' stroke-width='2' :stroke-dasharray=\"!markright && ['y_double_dashed'].indexOf(type) > -1 ? '10,10' : ''\" style='pointer-events:visibleStroke;' @click.capture.stop='onYellowLineClick($event, false)' />",
                "<rect v-if=\"type === 'y_solid_area' && hasBoundary\" x='15' y='5' width='70' height='499999.5' fill='none' stroke='#d6cb0a' stroke-width='5' style='pointer-events:visibleStroke;' @click.capture.stop='onYellowAreaClick' />",
                "<line v-if=\"type === 'y_solid_area' && hasBoundary\" x1='50' x2='50' y1='0' y2='499999.5' stroke='#d6cb0a' stroke-width='70' stroke-dasharray='30, 50' transform='skewX(45) rotate(45) scale(0.7)' style='pointer-events:visibleStroke;' @click.capture.stop='onYellowAreaClick' />",
                "<rect v-if=\"type === 'parterre'\" x='5' y='0' width='90' height='499999.5' fill='#359f40' @click.capture.stop='onParterreClick' />",
                "<line v-if=\"type === 'parterre'\" x1='25' x2='25' y1='0' y2='499999.5' stroke='#fff' stroke-width='5' style='pointer-events:visibleStroke;' @click.capture.stop='onParterreLineClick($event, true)' />",
                "<line v-if=\"type === 'parterre'\" x1='75' x2='75' y1='0' y2='499999.5' stroke='#fff' stroke-width='5' style='pointer-events:visibleStroke;' @click.capture.stop='onParterreLineClick($event, false)'/>",
                "<circle v-if=\"type === 'parterre' && hasSafeArea\" cx='50' cy='-80' r='42.5' fill='#0075c5' stroke='#fff' stroke-width='5' @click.capture.stop='onParterreSafeAreaClick' />",
                "<rect v-if=\"type === 'parterre' && hasSafeArea\" x='7.5' y='-80' width='85' height='80' fill='#0075c5' stroke='#fff' stroke-width='5' @click.capture.stop='onParterreSafeAreaClick' />",
                "<path v-if=\"type !== 'parterre' && type != 'y_solid_area' \" v-for='(item, i) in calcLaneMark' :d='item' fill='#fff' @click.capture.stop='onLaneMarkClick($event, i)' />",
            "</g>"
        ]
        return template.join("");
    }

    var Lane = Vue.extend({
        template: LaneRenderer.apply(this),
        props: {
            //type : 'solid' | 'dotted' | 'parterre' | 'y_dotted' | 'y_solid' | 'y_double_solid' | 'y_double_dashed' | 'y_solid_area',
            type : { default : 'solid' },
            assist: { default: false, type: Boolean }, // default: false, 是否辅道
            reverse: { default: false, type: Boolean }, // default: false, 是否逆向车道
            markright: { default: true, type: Boolean }, // default: true, 所有的mark标记是否在线路右侧
            hasSafeArea: { default: false, type: Boolean }, //default: false, 是否具有安全岛
            hasBoundary: { default: false, type: Boolean }, // default: false, 是否绘制边线
            landmark: { default: [], type: Array },
            angle: { default: 0, type: Number },
            width: { default: 80, type: Number },
            x: { default: 0, type: Number },
            y: { default: 0, type: Number }
        },
        data: function() {
            return {
            }
        },
        computed: {
            calcTransform: function() {
                var me = this;
                var mx = (Math.cos(me.angle * Math.PI / 180) * me.calcTransformScale).toFixed(6)
                var my = (Math.cos(me.angle * Math.PI / 180) * 1).toFixed(6)
                var m2 = (Math.sin(me.angle * Math.PI / 180) * me.calcTransformScale).toFixed(6)
                var m3 = (-1 * (Math.sin(me.angle * Math.PI / 180) * 1)).toFixed(6)
                return "matrix("+ mx +","+ m2 +","+ m3 +","+ my +", "+ me.x +", "+ me.y +")";
            },
            calcTransformScale: function() {
                var me = this;
                return (me.width / 100).toFixed(3) * 1;
            },
            calcLaneMark: function() {
                var me = this;
                if (me.landmark && me.landmark.length) {
                    var landmarks = [];
                    var landpath = {
                        0 : {
                            left : me.reverse ? "M60,180 L75,155 60,130 60,145 50,140 50,80 35,80 35,150 60,165 60,80 z" : "M40,80 L25,105 40,130 40,115 50,120 50,180 65,180 65,110 40,95 40,80 z",
                            right: me.reverse ? "M40,180 L25,155 40,130 40,145 50,140 50,80 65,80 65,150 40,165 40,80 z" :  "M60,80 L75,105 60,130 60,115 50,120 50,180 35,180 35,110 60,95 60,80 z",
                            straight: me.reverse ? "M50,180 L25,150 40,150 40,80 60,80 60,150 75,150 50,180 z" : "M50,80 L25,110 40,110 40,180 60,180 60,110 75,110 50,80 z",
                            'straight-right' : me.reverse ? "M52.19088075610587,89.52518640528717 L52.19088075610587,80 L70.9453365753878,80 L70.9453365753878,98.75036805251614 L70.89856735888085,98.78161866785217 L70.89856735888085,136.2636067020178 L85,136.2636067020178 L61.5213394492399,180.00196792647887 L38.20688502053156,136.2636067020178 L52.19088075610587,136.2636067020178 L52.19088075610587,111.30686529457614 L38.38460804325791,120.55079731100705 L38.38460804325791,133.12604492226967 L15,114.35067522831685 L38.38460804325791,86.25012191805956 L38.38460804325791,98.75036805251614 L52.19088075610587,89.52518640528717 z" : "M47.70976149823279,170.43375265472486 L47.70976149823279,180 L28.99847138199751,180 L28.99847138199751,161.2129585885323 L29.04513295335969,161.1817228362755 L29.04513295335969,123.71756157952969 L15,123.71756157952969 L38.40077801147733,80.00000272098244 L61.66157133552543,123.71756157952969 L47.70976149823279,123.71756157952969 L47.70976149823279,148.6624333317702 L61.48425736434913,139.4228978142236 L61.48425736434913,126.85363110610737 L85,145.6200710619627 L61.48425736434913,173.7072594912323 L61.48425736434913,161.2129585885323 L47.70976149823279,170.43375265472486 z",
                            'straight-left' : me.reverse ? "M47.69187678931948,111.12793588458692 L47.69187678931948,136.15503771607825 L61.636058321049234,136.15503771607825 L38.38798309172714,180 L15,136.15503771607825 L29.037453335500345,136.15503771607825 L29.037453335500345,80 L47.69187678931948,80 L47.69187678931948,89.38829234451953 L61.636058321049234,98.71419394922509 L61.636058321049234,86.23807140112365 L85,114.28439488925608 L61.636058321049234,133.0235309565054 L61.636058321049234,120.47255167311482 L47.69187678931948,111.12793588458692 z" : "M52.20867948179337,148.7738823685482 L52.20867948179337,123.71295341673175 L38.28453047650009,123.71295341673175 L61.49920699535864,79.99999708452553 L85,123.71295341673175 L70.83630356914226,123.71295341673175 L70.83630356914226,180 L52.20867948179337,180 L52.20867948179337,170.54290963601585 L38.28453047650009,161.20440296030156 L38.28453047650009,173.69738847965175 L15,145.61315703215266 L38.28453047650009,126.84869278208866 L38.28453047650009,139.41663621455493 L52.20867948179337,148.7738823685482 z",
                            uturn : me.reverse ? "M43.58100097106393,180 C28.37053704523235,180 15,162.4108915730634 15,140.10076152555484 L15,138.37538093612966 L15,80 L30.633721426448854,80 L30.633721426448854,138.37538093612966 C30.633721426448854,147.81704706331516 36.299451005108466,155.88479902379515 43.58100097106393,155.88479902379515 C50.562174093687325,155.88479902379515 56.05182061081273,148.48004058934146 56.49720690333107,139.54959816253404 L56.52828040441338,138.37538093612966 L56.52828040441338,123.93330608041595 L43.58100097106393,123.92531811356446 L64.81453923730639,83.98595202014735 L85,123.92531811356446 L72.06501581344523,123.92531811356446 L72.06501581344523,138.37538093612966 C72.06501581344523,161.50027382047085 59.17988327099478,180 43.58100097106393,180 z" : "M56.42140849525995,79.99999649021707 C71.62824310685437,79.99999649021707 84.25141734031217,97.44541059970688 85,119.76563135506788 L85,121.49179232145266 L85,179.89357277151947 L69.36559873594499,179.89357277151947 L69.36559873594499,121.49179232145266 C69.36559873594499,112.04585579806965 63.70122103669707,103.97445485267109 56.42140849525995,103.97445485267109 C49.44190112531376,103.97445485267109 43.95356447305237,111.38256240494398 43.5082844525597,120.31704400522699 L43.477218365814004,121.49179232145266 L43.477218365814004,135.94039922148173 L56.42140849525995,135.94839080123202 L35.19293668741817,175.90582117639931 L15,135.94839080123202 L27.944190121487598,135.94839080123202 L27.944190121487598,121.49179232145266 C27.944190121487598,98.35644021801652 40.826248188681255,79.99999649021707 56.42140849525995,79.99999649021707 z",
                            'straight-uturn' : me.reverse ? "M30.13849873273844,150.7208372690542 L38.22447367940456,150.7208372690542 L38.22447367940456,136.88825665675125 A20.538376364531963,15 0 0 0 50.05021203890378,139.70513029679927 A19.4669846840987,15.154465448973589 0 0 0 69.96192534506913,123.96840605072076 L69.96192534506913,115.83251961549817 L85.00183874586811,115.83251961549817 L65.93915280910274,86.68810631176083 L46.81582206023733,115.81678289125209 L61.87595039840297,115.81678289125209 L61.87595039840297,123.96840605072076 A11.381009737432572,8.859775750542191 0 0 1 50.05021203890378,133.4104405983679 A11.381009737432572,8.859775750542191 0 0 1 38.22447367940456,123.96840605072076 L38.22447367940456,79.99999850717745 L30.13849873273844,79.99999850717745 L30.13849873273844,123.96840605072076 L30.13849873273844,150.7208372690542 zM34.18148620607151,179.91246074552978 L53.264387080203576,150.75231071754638 L15.078370394572785,150.75231071754638 L34.18148620607151,179.91246074552978 z" : "M69.84727069602963,109.16113663862234 L61.7636640547625,109.16113663862234 L61.7636640547625,122.97927483029991 A-20.532360868818497,-15.971818433156129 0 0 0 49.94138934190932,120.16534225201735 A-19.461282988850613,-15.138642865284803 0 0 0 30.03550798778902,135.8856359854385 L30.03550798778902,144.01302784561756 L14.999999635032195,144.01302784561756 L34.05710229181941,173.1270118399143 L53.174831998416174,144.02874813935102 L38.1191146290562,144.02874813935102 L38.1191146290562,135.8856359854385 A-11.37767634758348,-8.850525371916245 0 0 1 49.94138934190932,126.45345974538577 A-11.37767634758348,-8.850525371916245 0 0 1 61.7636640547625,135.8856359854385 L61.7636640547625,179.80813667661835 L69.84727069602963,179.80813667661835 L69.84727069602963,135.8856359854385 L69.84727069602963,109.16113663862234 zM65.80546737539606,79.99999176312576 L46.728155702005644,109.12969605115552 L85,109.12969605115552 L65.80546737539606,79.99999176312576 z",
                            'left-right' : me.reverse ? "M60.521465141151324,80 L39.46993560666951,80 L39.622679854702994,133.41234993423188 L25.75711354511508,141.1220474074688 L25.75711354511508,128.19710222933043 L14.99999997695312,153.45949446177963 L25.75711354511508,179.8968822289321 L25.75711354511508,161.09696222907667 L49.96062029989623,146.22622530101 L74.16412705467737,161.09696222907667 L74.16412705467737,179.8968822289321 L84.92124132364889,153.45949446177963 L74.16412705467737,128.19710222933043 L74.16412705467737,141.1220474074688 L60.5436639849473,133.47062149956582 L60.521465141151324,80 z" : "M60.521465141151324,179.70311616568912 L39.46993560666951,179.72204175781576 L39.622679854702994,126.40317716842256 L25.75711354511508,118.70697325048923 L25.75711354511508,131.6092971178476 L14.99999997695312,106.39111926448108 L25.75711354511508,80.00000236011654 L25.75711354511508,98.7670186356551 L49.96062029989623,113.61172871742323 L74.16412705467737,98.7670186356551 L74.16412705467737,80.00000236011654 L84.92124132364889,106.39111926448108 L74.16412705467737,131.6092971178476 L74.16412705467737,118.70697325048923 L60.5436639849473,126.34500759030553 L60.521465141151324,179.70311616568912 z",
                            'left-uturn': me.reverse ? "M15.097541152027086,80.00001227220753 L38.39968040585772,80.00001227220753 L38.39968040585772,117.4743867318657 C38.39968040585772,119.18415506658778 41.342925199503036,121.54972495435356 47.22941478679361,121.54972495435356 C53.115904374084124,121.54972495435356 56.18396132367297,119.19976938927903 56.18396132367297,117.4743867318657 L56.18396132367297,102.19421054594 L44.22521521931544,102.19421054594 L61.759871825243565,80.00001227220753 L79.17842410006145,102.19421054594 L67.0977684480381,102.19421054594 L67.0977684480381,117.4743867318657 C67.0977684480381,121.54972495435356 61.70181965968841,124.83810131318876 56.059149167729444,126.41514790503265 C50.41938128404817,127.99219449687632 42.57072850099413,127.20523263322389 38.39968040585772,126.07163280581904 L38.39968040585772,136.2115739616944 L55.87628484623076,145.5801675766097 L55.87628484623076,133.08870942339013 L85.00395891351906,161.16950735182706 L55.87628484623076,179.93167749796248 L55.87628484623076,167.36527059582411 L15.318139381136529,145.5801675766097 L15.097541152027086,80.00001227220753 z" : "M84.98677630002581,179.95466540008783 L61.657851025788005,179.95466540008783 L61.657851025788005,142.47166668861865 C61.657851025788005,140.7615048724079 58.711222945559186,138.39539057874637 52.8179667851015,138.39539057874637 C46.92471062464383,138.39539057874637 43.85312691576623,140.74588695627813 43.85312691576623,142.47166668861865 L43.85312691576623,157.75535941322022 L55.82561970722856,157.75535941322022 L38.270806854504286,179.95466540008783 L20.83223179587188,157.75535941322022 L32.926774271130675,157.75535941322022 L32.926774271130675,142.47166668861865 C32.926774271130675,138.39539057874637 38.32892575155023,135.10625744181493 43.97808254441498,133.52884791270725 C49.62433339242744,131.95143838359965 57.48200827303768,132.73858135654046 61.657851025788005,133.87244206756236 L61.657851025788005,123.73016733288406 L44.16115707010966,114.35941765501676 L44.16115707010966,126.85375055883978 L15.000000477312422,98.76649019104556 L44.16115707010966,80.00000216950332 L44.16115707010966,92.56930107074935 L84.76592449125128,114.35941765501676 L84.98677630002581,179.95466540008783 z"
                        },
                        1 : {
                            left: me.reverse ? "M60,440 L75,415 60,390 60,405 50,400 50,340 35,340 35,410 60,425 60,340 z" : "M40,340 L25,365 40,390 40,375 50,380 50,440 65,440 65,370 40,355 40,340 z",
                            right: me.reverse ? "M40,440 L25,415 40,390 40,405 50,400 50,340 65,340 65,410 40,425 40,340 z" : "M60,340 L75,365 60,390 60,375 50,380 50,440 35,440 35,370 60,355 60,340 z",
                            straight: me.reverse ? "M50,440 L25,410 40,410 40,340 60,340 60,410 75,410 50,440 z" : "M50,340 L25,370 40,370 40,440 60,440 60,370 75,370 50,340 z",
                            'straight-right' : me.reverse ? "M52.19088075610587,349.52520929347077 L52.19088075610587,340 L70.9453365753878,340 L70.9453365753878,358.75039094069973 L70.89856735888085,358.78164155603577 L70.89856735888085,396.2636295902014 L85,396.2636295902014 L61.5213394492399,440 L38.20688502053156,396.2636295902014 L52.19088075610587,396.2636295902014 L52.19088075610587,371.30688818275974 L38.38460804325791,380.55082019919064 L38.38460804325791,393.12606781045326 L15,374.35069811650044 L38.38460804325791,346.25014480624316 L38.38460804325791,358.75039094069973 L52.19088075610587,349.52520929347077 z" : "M47.70976149823279,430.43375265472486 L47.70976149823279,440 L28.99847138199751,440 L28.99847138199751,421.2129585885323 L29.04513295335969,421.1817228362755 L29.04513295335969,383.7175615795297 L15,383.7175615795297 L38.40077801147733,340 L61.66157133552543,383.7175615795297 L47.70976149823279,383.7175615795297 L47.70976149823279,408.6624333317702 L61.48425736434913,399.4228978142236 L61.48425736434913,386.8536311061074 L85,405.6200710619627 L61.48425736434913,433.7072594912323 L61.48425736434913,421.2129585885323 L47.70976149823279,430.43375265472486 z",
                            'straight-left' : me.reverse ? "M47.69187678931948,371.1279358845869 L47.69187678931948,396.15503771607825 L61.636058321049234,396.15503771607825 L38.38798309172714,440 L15,396.15503771607825 L29.037453335500345,396.15503771607825 L29.037453335500345,340 L47.69187678931948,340 L47.69187678931948,340 L61.636058321049234,358.7141939492251 L61.636058321049234,346.23807140112365 L85,374.2843948892561 L61.636058321049234,393.0235309565054 L61.636058321049234,380.4725516731148 L47.69187678931948,371.1279358845869 z" : "M52.20867948179337,408.7738823685482 L52.20867948179337,383.71295341673175 L38.28453047650009,383.71295341673175 L61.49920699535864,340 L85,383.71295341673175 L70.83630356914226,383.71295341673175 L70.83630356914226,440 L52.20867948179337,440 L52.20867948179337,430.54290963601585 L38.28453047650009,421.20440296030154 L38.28453047650009,433.69738847965175 L15,405.6131570321527 L38.28453047650009,386.8486927820887 L38.28453047650009,399.41663621455496 L52.20867948179337,408.7738823685482 z",
                            uturn : me.reverse ? "M43.58100097106393,440 C28.37053704523235,440 15,422.4108915730634 15,400.10076152555484 L15,398.37538093612966 L15,340.00000324036546 L30.633721426448854,340.00000324036546 L30.633721426448854,398.37538093612966 C30.633721426448854,407.81704706331516 36.299451005108466,415.88479902379515 43.58100097106393,415.88479902379515 C50.562174093687325,415.88479902379515 56.05182061081273,408.48004058934146 56.49720690333107,399.54959816253404 L56.52828040441338,398.37538093612966 L56.52828040441338,383.93330608041595 L43.58100097106393,383.92531811356446 L64.81453923730639,343.98595202014735 L85,383.92531811356446 L72.06501581344523,383.92531811356446 L72.06501581344523,398.37538093612966 C72.06501581344523,421.50027382047085 59.17988327099478,440 43.58100097106393,440 z" : "M56.42140849525995,340 C71.62824310685437,340 84.25141734031217,357.44541059970686 85,379.76563135506785 L85,381.49179232145264 L85,439.8935727715195 L69.36559873594499,439.8935727715195 L69.36559873594499,381.49179232145264 C69.36559873594499,372.0458557980696 63.70122103669707,363.9744548526711 56.42140849525995,363.9744548526711 C49.44190112531376,363.9744548526711 43.95356447305237,371.382562404944 43.5082844525597,380.317044005227 L43.477218365814004,381.49179232145264 L43.477218365814004,395.9403992214817 L56.42140849525995,395.948390801232 L35.19293668741817,435.9058211763993 L15,395.948390801232 L27.944190121487598,395.948390801232 L27.944190121487598,381.49179232145264 C27.944190121487598,358.35644021801653 40.826248188681255,340 56.42140849525995,340 z",
                            'straight-uturn' : me.reverse ? "M30.13849873273844,410.7208372690542 L38.22447367940456,410.7208372690542 L38.22447367940456,396.88825665675125 A20.538376364531963,15 0 0 0 50.05021203890378,399.70513029679927 A19.4669846840987,15.154465448973589 0 0 0 69.96192534506913,383.9684060507208 L69.96192534506913,375.8325196154982 L85.00183874586811,375.8325196154982 L65.93915280910274,346.68810631176086 L46.81582206023733,375.8167828912521 L61.87595039840297,375.8167828912521 L61.87595039840297,383.9684060507208 A11.381009737432572,8.859775750542191 0 0 1 50.05021203890378,393.4104405983679 A11.381009737432572,8.859775750542191 0 0 1 38.22447367940456,383.9684060507208 L38.22447367940456,340 L30.13849873273844,340 L30.13849873273844,383.9684060507208 L30.13849873273844,410.7208372690542 zM34.18148620607151,439.91246074552976 L53.264387080203576,410.7523107175464 L15.078370394572785,410.7523107175464 L34.18148620607151,439.91246074552976 z" : "M69.84727069602963,369.16116715620046 L61.7636640547625,369.16116715620046 L61.7636640547625,382.97930534787804 A-20.532360868818497,-15.971818433156129 0 0 0 49.94138934190932,380.1653727695955 A-19.461282988850613,-15.138642865284803 0 0 0 30.03550798778902,395.88566650301664 L30.03550798778902,404.0130583631957 L14.999999635032195,404.0130583631957 L34.05710229181941,433.1270423574924 L53.174831998416174,404.02877865692915 L38.1191146290562,404.02877865692915 L38.1191146290562,395.88566650301664 A-11.37767634758348,-8.850525371916245 0 0 1 49.94138934190932,386.4534902629639 A-11.37767634758348,-8.850525371916245 0 0 1 61.7636640547625,395.88566650301664 L61.7636640547625,439.80816719419647 L69.84727069602963,439.80816719419647 L69.84727069602963,395.88566650301664 L69.84727069602963,369.16116715620046 zM65.80546737539606,340.0000222807039 L46.728155702005644,369.12972656873364 L85,369.12972656873364 L65.80546737539606,340.0000222807039 z",
                            'left-right' : me.reverse ? "M60.521465141151324,340.0189844204533 L39.46993560666951,340.000025646576 L39.622679854702994,393.4123728224155 L25.75711354511508,401.1220702956524 L25.75711354511508,388.197125117514 L14.99999997695312,413.4595173499632 L25.75711354511508,439.8969051171157 L25.75711354511508,421.09698511726026 L49.96062029989623,406.2262481891936 L74.16412705467737,421.09698511726026 L74.16412705467737,439.8969051171157 L84.92124132364889,413.4595173499632 L74.16412705467737,388.197125117514 L74.16412705467737,401.1220702956524 L60.5436639849473,393.4706443877494 L60.521465141151324,340.0189844204533 z" : "M60.521465141151324,439.70311616568915 L39.46993560666951,439.72204175781576 L39.622679854702994,386.40317716842253 L25.75711354511508,378.7069732504892 L25.75711354511508,391.60929711784763 L14.99999997695312,366.39111926448106 L25.75711354511508,340.0000023601165 L25.75711354511508,358.7670186356551 L49.96062029989623,373.61172871742326 L74.16412705467737,358.7670186356551 L74.16412705467737,340.0000023601165 L84.92124132364889,366.39111926448106 L74.16412705467737,391.60929711784763 L74.16412705467737,378.7069732504892 L60.5436639849473,386.3450075903055 L60.521465141151324,439.70311616568915 z",
                            'left-uturn': me.reverse ? "M15.097541152027086,340.0000122722075 L38.39968040585772,340.0000122722075 L38.39968040585772,377.4743867318657 C38.39968040585772,379.1841550665878 41.342925199503036,381.54972495435356 47.22941478679361,381.54972495435356 C53.115904374084124,381.54972495435356 56.18396132367297,379.199769389279 56.18396132367297,377.4743867318657 L56.18396132367297,362.19421054594 L44.22521521931544,362.19421054594 L61.759871825243565,340.0000122722075 L79.17842410006145,362.19421054594 L67.0977684480381,362.19421054594 L67.0977684480381,377.4743867318657 C67.0977684480381,381.54972495435356 61.70181965968841,384.83810131318876 56.059149167729444,386.41514790503265 C50.41938128404817,387.9921944968763 42.57072850099413,387.2052326332239 38.39968040585772,386.07163280581904 L38.39968040585772,396.2115739616944 L55.87628484623076,405.5801675766097 L55.87628484623076,393.0887094233901 L85.00395891351906,421.16950735182706 L55.87628484623076,439.9316774979625 L55.87628484623076,427.3652705958241 L15.318139381136529,405.5801675766097 L15.097541152027086,340.0000122722075 z" : "M84.98677630002581,439.95466540008783 L61.657851025788005,439.95466540008783 L61.657851025788005,402.47166668861865 C61.657851025788005,400.7615048724079 58.711222945559186,398.3953905787464 52.8179667851015,398.3953905787464 C46.92471062464383,398.3953905787464 43.85312691576623,400.7458869562781 43.85312691576623,402.47166668861865 L43.85312691576623,417.7553594132202 L55.82561970722856,417.7553594132202 L38.270806854504286,439.95466540008783 L20.83223179587188,417.7553594132202 L32.926774271130675,417.7553594132202 L32.926774271130675,402.47166668861865 C32.926774271130675,398.3953905787464 38.32892575155023,395.10625744181493 43.97808254441498,393.52884791270725 C49.62433339242744,391.9514383835997 57.48200827303768,392.73858135654046 61.657851025788005,393.87244206756236 L61.657851025788005,383.7301673328841 L44.16115707010966,374.3594176550167 L44.16115707010966,386.8537505588398 L15.000000477312422,358.7664901910456 L44.16115707010966,340.0000021695033 L44.16115707010966,352.56930107074936 L84.76592449125128,374.3594176550167 L84.98677630002581,439.95466540008783 z"
                        },
                        2 : {
                            left: me.reverse ? "M60,700 L75,675 60,650 60,665 50,660 50,600 35,600 35,670 60,685 60,700 z" : "M40,600 L25,625 40,650 40,635 50,640 50,700 65,700 65,630 40,615 40,600 z",
                            right: me.reverse ? "M40,700 L25,675 40,650 40,665 50,660 50,600 65,600 65,670 40,685 40,700 z" : "M60,600 L75,625 60,650 60,635 50,640 50,700 35,700 35,630 60,615 60,600 z",
                            straight:  me.reverse ? "M50,700 L25,670 40,670 40,600 60,600 60,670 75,670 50,700 z" : "M50,600 L25,630 40,630 40,700 60,700 60,630 75,630 50,600 z",
                            'straight-right' : me.reverse ? "M52.19088075610587,609.5252092934708 L52.19088075610587,600 L70.9453365753878,600 L70.9453365753878,618.7503909406997 L70.89856735888085,618.7816415560358 L70.89856735888085,656.2636295902014 L85,656.2636295902014 L61.5213394492399,700 L38.20688502053156,656.2636295902014 L52.19088075610587,656.2636295902014 L52.19088075610587,631.3068881827597 L38.38460804325791,640.5508201991906 L38.38460804325791,653.1260678104533 L15,634.3506981165004 L38.38460804325791,606.2501448062432 L38.38460804325791,618.7503909406997 L52.19088075610587,609.5252092934708 z" : "M47.70976149823279,690.4337526547249 L47.70976149823279,700 L28.99847138199751,700 L28.99847138199751,681.2129585885323 L29.04513295335969,681.1817228362755 L29.04513295335969,643.7175615795297 L15,643.7175615795297 L38.40077801147733,600.0000027209824 L61.66157133552543,643.7175615795297 L47.70976149823279,643.7175615795297 L47.70976149823279,668.6624333317702 L61.48425736434913,659.4228978142236 L61.48425736434913,646.8536311061074 L85,665.6200710619627 L61.48425736434913,693.7072594912323 L61.48425736434913,681.2129585885323 L47.70976149823279,690.4337526547249 z",
                            'straight-left' : me.reverse ? "M47.69187678931948,631.1279358845869 L47.69187678931948,656.1550377160783 L61.636058321049234,656.1550377160783 L38.38798309172714,700 L15,656.1550377160783 L29.037453335500345,656.1550377160783 L29.037453335500345,600 L47.69187678931948,600 L47.69187678931948,609.3882923445195 L61.636058321049234,618.7141939492251 L61.636058321049234,606.2380714011236 L85,634.2843948892561 L61.636058321049234,653.0235309565054 L61.636058321049234,640.4725516731148 L47.69187678931948,631.1279358845869 z" : "M52.20867948179337,668.7738823685481 L52.20867948179337,643.7129534167318 L38.28453047650009,643.7129534167318 L61.49920699535864,600 L85,643.7129534167318 L70.83630356914226,643.7129534167318 L70.83630356914226,700 L52.20867948179337,700 L52.20867948179337,690.5429096360158 L38.28453047650009,681.2044029603015 L38.28453047650009,693.6973884796517 L15,665.6131570321527 L38.28453047650009,646.8486927820886 L38.28453047650009,659.416636214555 L52.20867948179337,668.7738823685481 z",
                            uturn : me.reverse ? "M43.58100097106393,700 C28.37053704523235,700 15,682.5356474324384 15,660.2255173849298 L15,658.5001367955047 L15,600.1247590997405 L30.633721426448854,600.1247590997405 L30.633721426448854,658.5001367955047 C30.633721426448854,667.9418029226902 36.299451005108466,676.0095548831702 43.58100097106393,676.0095548831702 C50.562174093687325,676.0095548831702 56.05182061081273,668.6047964487165 56.49720690333107,659.674354021909 L56.52828040441338,658.5001367955047 L56.52828040441338,644.058061939791 L43.58100097106393,644.0500739729395 L64.81453923730639,604.1107078795224 L85,644.0500739729395 L72.06501581344523,644.0500739729395 L72.06501581344523,658.5001367955047 C72.06501581344523,681.6250296798459 59.17988327099478,700 43.58100097106393,700 z" : "M56.42140849525995,600 C71.62824310685437,600 84.25141734031217,617.4454105997069 85,639.7656313550679 L85,641.4917923214526 L85,700 L69.36559873594499,700 L69.36559873594499,641.4917923214526 C69.36559873594499,632.0458557980696 63.70122103669707,623.9744548526711 56.42140849525995,623.9744548526711 C49.44190112531376,623.9744548526711 43.95356447305237,631.382562404944 43.5082844525597,640.317044005227 L43.477218365814004,641.4917923214526 L43.477218365814004,655.9403992214817 L56.42140849525995,655.948390801232 L35.19293668741817,695.9058211763993 L15,655.948390801232 L27.944190121487598,655.948390801232 L27.944190121487598,641.4917923214526 C27.944190121487598,618.3564402180166 40.826248188681255,600 56.42140849525995,600 z",
                            'straight-uturn' : me.reverse ? "M30.13849873273844,670.7208372690542 L38.22447367940456,670.7208372690542 L38.22447367940456,656.8882566567513 A20.538376364531963,15 0 0 0 50.05021203890378,659.7051302967993 A19.4669846840987,15.154465448973589 0 0 0 69.96192534506913,643.9684060507208 L69.96192534506913,635.8325196154982 L85.00183874586811,635.8325196154982 L65.93915280910274,606.6881063117609 L46.81582206023733,635.8167828912522 L61.87595039840297,635.8167828912522 L61.87595039840297,643.9684060507208 A11.381009737432572,8.859775750542191 0 0 1 50.05021203890378,653.4104405983679 A11.381009737432572,8.859775750542191 0 0 1 38.22447367940456,643.9684060507208 L38.22447367940456,600 L30.13849873273844,600 L30.13849873273844,643.9684060507208 L30.13849873273844,670.7208372690542 zM34.18148620607151,699.9124607455298 L53.264387080203576,670.7523107175464 L15.078370394572785,670.7523107175464 L34.18148620607151,699.9124607455298 z" : "M69.84727069602963,629.1611671562005 L61.7636640547625,629.1611671562005 L61.7636640547625,642.979305347878 A-20.532360868818497,-15.971818433156129 0 0 0 49.94138934190932,640.1653727695955 A-19.461282988850613,-15.138642865284803 0 0 0 30.03550798778902,655.8856665030166 L30.03550798778902,664.0130583631957 L14.999999635032195,664.0130583631957 L34.05710229181941,693.1270423574924 L53.174831998416174,664.0287786569291 L38.1191146290562,664.0287786569291 L38.1191146290562,655.8856665030166 A-11.37767634758348,-8.850525371916245 0 0 1 49.94138934190932,646.4534902629639 A-11.37767634758348,-8.850525371916245 0 0 1 61.7636640547625,655.8856665030166 L61.7636640547625,699.8081671941965 L69.84727069602963,699.8081671941965 L69.84727069602963,655.8856665030166 L69.84727069602963,629.1611671562005 zM65.80546737539606,600.0000222807039 L46.728155702005644,629.1297265687336 L85,629.1297265687336 L65.80546737539606,600.0000222807039 z",
                            'left-right' : me.reverse ? "M60.521465141151324,600 L39.46993560666951,600 L39.622679854702994,653.5095407911655 L25.75711354511508,661.2192382644024 L25.75711354511508,648.294293086264 L14.99999997695312,673.5566853187132 L25.75711354511508,699.9940730858657 L25.75711354511508,681.1941530860103 L49.96062029989623,666.3234161579436 L74.16412705467737,681.1941530860103 L74.16412705467737,699.9940730858657 L84.92124132364889,673.5566853187132 L74.16412705467737,648.294293086264 L74.16412705467737,661.2192382644024 L60.5436639849473,653.5678123564994 L60.521465141151324,600 z" : "M60.521465141151324,699.7031161656892 L39.46993560666951,699.7220417578158 L39.622679854702994,646.4031771684225 L25.75711354511508,638.7069732504892 L25.75711354511508,651.6092971178476 L14.99999997695312,626.3911192644811 L25.75711354511508,600.0000023601165 L25.75711354511508,618.7670186356552 L49.96062029989623,633.6117287174233 L74.16412705467737,618.7670186356552 L74.16412705467737,600.0000023601165 L84.92124132364889,626.3911192644811 L74.16412705467737,651.6092971178476 L74.16412705467737,638.7069732504892 L60.5436639849473,646.3450075903055 L60.521465141151324,699.7031161656892 z",
                            'left-uturn' : me.reverse ? "M15.097541152027086,600.0000122722075 L38.39968040585772,600.0000122722075 L38.39968040585772,637.4743867318657 C38.39968040585772,639.1841550665878 41.342925199503036,641.5497249543536 47.22941478679361,641.5497249543536 C53.115904374084124,641.5497249543536 56.18396132367297,639.199769389279 56.18396132367297,637.4743867318657 L56.18396132367297,622.19421054594 L44.22521521931544,622.19421054594 L61.759871825243565,600.0000122722075 L79.17842410006145,622.19421054594 L67.0977684480381,622.19421054594 L67.0977684480381,637.4743867318657 C67.0977684480381,641.5497249543536 61.70181965968841,644.8381013131888 56.059149167729444,646.4151479050327 C50.41938128404817,647.9921944968763 42.57072850099413,647.2052326332239 38.39968040585772,646.071632805819 L38.39968040585772,656.2115739616944 L55.87628484623076,665.5801675766097 L55.87628484623076,653.0887094233901 L85.00395891351906,681.1695073518271 L55.87628484623076,699.9316774979625 L55.87628484623076,687.3652705958241 L15.318139381136529,665.5801675766097 L15.097541152027086,600.0000122722075 z" : "M84.98677630002581,699.9546654000878 L61.657851025788005,699.9546654000878 L61.657851025788005,662.4716666886186 C61.657851025788005,660.7615048724078 58.711222945559186,658.3953905787464 52.8179667851015,658.3953905787464 C46.92471062464383,658.3953905787464 43.85312691576623,660.7458869562781 43.85312691576623,662.4716666886186 L43.85312691576623,677.7553594132203 L55.82561970722856,677.7553594132203 L38.270806854504286,699.9546654000878 L20.83223179587188,677.7553594132203 L32.926774271130675,677.7553594132203 L32.926774271130675,662.4716666886186 C32.926774271130675,658.3953905787464 38.32892575155023,655.1062574418149 43.97808254441498,653.5288479127073 C49.62433339242744,651.9514383835997 57.48200827303768,652.7385813565404 61.657851025788005,653.8724420675624 L61.657851025788005,643.7301673328841 L44.16115707010966,634.3594176550167 L44.16115707010966,646.8537505588398 L15.000000477312422,618.7664901910456 L44.16115707010966,600.0000021695033 L44.16115707010966,612.5693010707494 L84.76592449125128,634.3594176550167 L84.98677630002581,699.9546654000878 z"
                        }
                    }
                    for (var item in me.landmark) {
                        var seq = me.landmark[item].seq * 1;
                        var mark = me.landmark[item].mark;
                        if (seq < 0 || seq > 2 || !mark) continue;

                        landmarks.push(landpath[seq][mark])
                    }
                    return landmarks;
                }
                return [];
            }
        },
        methods: {
            onPavementClick : function(e) {
                //路面点击事件
                this.$emit('on-pavement-click', e);
            },
            onWhiteLineClick: function(e) {
                var me = this;
                if (me.type === 'solid') {
                    //白色实线点击事件
                    me.$emit('on-solid-line-click', e);
                }

                if (me.type === 'dotted') {
                    //白色虚线点击事件
                    me.$emit('on-dotted-line-click', e);
                }
            },
            onParterreBoundaryLineClick: function(e) {
                var me = this;
                if (me.type === 'solid') {
                    me.$emit('on-solid-line-click', e);
                }

                if (me.type === 'parterre' ) {
                    //花坛边线点击事件
                    me.$emit('on-parterre-boundary-line-click', e);
                }
            },
            onYellowLineClick: function(e, isSingle) {
                var me = this;
                if (me.type === 'y_dotted' && isSingle) {
                    //黄色虚线点击事件
                    me.$emit('on-y-dotted-line-click', e);
                }

                if (me.type === 'y_solid' && isSingle) {
                    //黄色实线点击事件
                    me.$emit('on-y-solid-line-click', e);
                }

                if (me.type === 'y_double_solid') {
                    //黄色实线点击事件
                    me.$emit('on-double-y-solid-click', e, isSingle ? 'left' : 'right')
                }

                if (me.type === 'y_double_dashed') {
                    //黄色虚实线点击事件
                    me.$emit('on-double-y-dashed-click', e, isSingle ? 'left' : 'right');
                }
            },
            onYellowAreaClick: function(e) {
                //黄色禁止区域点击事件
                this.$emit('on-y-solid-area-click', e);
            },
            onParterreClick: function(e) {
                //花坛绿色区域事件
                this.$emit('on-parterre-click', e);
            },
            onParterreLineClick: function(e, isLeft) {
                //花坛内部白线点击事件
                var me = this;
                me.$emit('on-parterre-line-click', e, isLeft ? 'left' : 'right');
            },
            onParterreSafeAreaClick: function(e) {
                //花坛安全岛的点击事件
                var me = this;
                me.$emit('on-parterre-safe-area-click', e);
            },
            onLaneMarkClick: function(e, i) {
                //道路路标的点击事件
                var me = this;
                me.$emit('on-lane-mark-click', e, i);
            }
        }
    })

    //行人暂留区
    function StayRenderer() {
        var template = [
            "<use x='0' y='0' :xlink:href=\"'#stayArea_' + defs\" :transform='calcTransform' style='pointer-events:visiblePainted;' @click.stop='onStayAreaClick' />"
        ];
        return template.join('');
    }

    var StayPedestrian = Vue.extend({
        template: StayRenderer.apply(this),
        props: {
            width: { default: 150, type: Number },
            height: { default: 150, type: Number },
            x : { default: 0, type: Number },
            y : { default: 0, type: Number },
            angle: { default: 0, type: Number },
            defs: { default: '', type: String }
        },
        computed: {
            calcTransform: function() {
                var me = this;
                var mx = (Math.cos(me.angle * Math.PI / 180) * me.calcTransformScale.ws).toFixed(6)
                var my = (Math.cos(me.angle * Math.PI / 180) * me.calcTransformScale.hs).toFixed(6)
                var m2 = (Math.sin(me.angle * Math.PI / 180) * me.calcTransformScale.ws).toFixed(6)
                var m3 = (-1 * (Math.sin(me.angle * Math.PI / 180) * me.calcTransformScale.hs)).toFixed(6)
                return "matrix("+ mx +","+ m2 +","+ m3 +","+ my +", "+ me.x +", "+ me.y +")";
            },
            calcTransformScale: function() {
                var me = this;
                var ws = (me.width / 200).toFixed(3) * 1;
                var hs = (me.height / 200).toFixed(3) * 1;
                return { ws: ws, hs: hs };
            }
        },
        methods: {
            onStayAreaClick: function(e) {
                this.$emit('on-stay-area-click', e);
            }
        }
    })

    //十字路口Vue对象
    function crossRender() {
        var template = [
            "<g class='cross-road' clip-path='url(#clip)'>",
                "<defs>",
                    "<g :id=\"'stayArea_' + uuid \"><path d='M200,0 V180 C200,200 200,200 180,200 L0,200 C100,200 200,100 200,0 z' fill='#0075c5' stroke='#fff' stroke-width='3' /></g>",
                "</defs>",
                "<g class='ivsom-road-shading'>",
                    "<path v-show='RoadTop.stayArea' :d='caleRoadTopLeftNotch' fill='#333' stroke-width='0' />",
                    "<path v-show='RoadRight.stayArea' :d='caleRoadTopRightNotch' fill='#333' stroke-width='0' />",
                    "<path v-show='RoadLeft.stayArea' :d='calcRoadBottomLeftNotch' fill='#333' stroke-width='0' />",
                    "<path v-show='RoadBottom.stayArea' :d='calcRoadBottomRightNotch' fill='#333' stroke-width='0' />",
                    "<rect x='-499999.5' :y='(1080 - RoadWidth) / 2' :width='999999' :height='RoadWidth' fill='#333' />",
                    "<rect :x='(1920 - RoadWidth) / 2' y='-499999.5' :width='RoadWidth' :height='999999' fill='#333' />",
                    "<circle :cx='1920 / 2' :cy='1080 / 2' r='15' fill='#fff'>",
                "</g>",
                "<g>",
                    "<path :d='calcRoadTopLeftBoundary.out' fill='none' stroke='#8e8e8e' stroke-width='5' />",
                    "<path :d='calcRoadTopRightBoundary.out' fill='none' stroke='#8e8e8e' stroke-width='5' />",
                    "<path :d='calcRoadRightTopBoundary.out' fill='#111' stroke='#8e8e8e' stroke-width='5' />",
                    "<path :d='calcRoadRightBottomBoundary.out' fill='#111' stroke='#8e8e8e' stroke-width='5' />",
                    "<path :d='calcRoadBottomRightBoundary.out' fill='#111' stroke='#8e8e8e' stroke-width='5' />",
                    "<path :d='calcRoadBottomLeftBoundary.out' fill='#111' stroke='#8e8e8e' stroke-width='5' />",
                    "<path :d='calcRoadLeftTopBoundary.out' fill='#111' stroke='#8e8e8e' stroke-width='5' />",
                    "<path :d='calcRoadLeftBottomBoundary.out' fill='#111' stroke='#8e8e8e' stroke-width='5' />",
                "</g>",
                "<g>",
                    //行人斑马线
                    "<line v-show='RoadTop.pedestrian' :x1='calcPedestrianLength.top.x1' :x2='calcPedestrianLength.top.x2' :y1='(1080 - RoadWidth) / 2 + 25' :y2='(1080 - RoadWidth) / 2 + 25' stroke='#fff' stroke-width='40' stroke-dasharray='5,5' style='pointer-events:visibleStroke;' @click.capture.stop='onRoadPedestrianClick($event, 0, false)' />",
                    "<line v-show='RoadRight.pedestrian' :x1='1920 / 2 + RoadWidth / 2 - 25' :x2='1920 / 2 + RoadWidth / 2 - 25' :y1='calcPedestrianLength.right.y1' :y2='calcPedestrianLength.right.y2' stroke='#fff' stroke-width='40' stroke-dasharray='5,5' style='pointer-events:visibleStroke;' @click.capture.stop='onRoadPedestrianClick($event, 1, false)' />",
                    "<line v-show='RoadBottom.pedestrian' :x1='calcPedestrianLength.bottom.x1' :x2='calcPedestrianLength.bottom.x2' :y1='1080 / 2 + RoadWidth / 2 - 25' :y2='1080 / 2 + RoadWidth / 2 - 25 ' stroke='#fff' stroke-width='40' stroke-dasharray='5,5' style='pointer-events:visibleStroke;' @click.capture.stop='onRoadPedestrianClick($event, 2, false)' />",
                    "<line v-show='RoadLeft.pedestrian' :x1='(1920 - RoadWidth) / 2 + 25' :x2='(1920 - RoadWidth) / 2 + 25' :y1='calcPedestrianLength.left.y1' :y2='calcPedestrianLength.left.y2' stroke='#fff' stroke-width='40' stroke-dasharray='5,5' style='pointer-events:visibleStroke;' @click.capture.stop='onRoadPedestrianClick($event, 3, false)' />",
                "</g>",
                "<g>",
                    //机动车停止线
                    "<line v-if='RoadTop.stopLine' :x1='calcRoadTopStopLine.p1.x' :x2='calcRoadTopStopLine.p2.x' :y1='calcRoadTopStopLine.p1.y' :y2='calcRoadTopStopLine.p2.y' stroke='#fff' stroke-width='5' @click.capture.stop='onRoadStopLineClick($event, 0)'/>",
                    "<line v-if='RoadRight.stopLine' :x1='calcRoadRightStopLine.p1.x' :x2='calcRoadRightStopLine.p2.x' :y1='calcRoadRightStopLine.p1.y' :y2='calcRoadRightStopLine.p2.y' stroke='#fff' stroke-width='5' @click.capture.stop='onRoadStopLineClick($event, 1)'/>",
                    "<line v-if='RoadBottom.stopLine' :x1='calcRoadBottomStopLine.p1.x' :x2='calcRoadBottomStopLine.p2.x' :y1='calcRoadBottomStopLine.p1.y' :y2='calcRoadBottomStopLine.p2.y' stroke='#fff' stroke-width='5' @click.capture.stop='onRoadStopLineClick($event, 2)' />",
                    "<line v-if='RoadLeft.stopLine' :x1='calcRoadLeftStopLine.p1.x' :x2='calcRoadLeftStopLine.p2.x' :y1='calcRoadLeftStopLine.p1.y' :y2='calcRoadLeftStopLine.p2.y' stroke='#fff' stroke-width='5' @click.capture.stop='onRoadStopLineClick($event, 3)' />",
                "</g>",
                "<lane ",
                    "v-for='(item, n) in RoadTop.Lane' ",
                    ":type='item.type' ",
                    ":assist='item.assist' ",
                    ":reverse='item.reverse' ",
                    ":markright='item.markright' ",
                    ":has-boundary='item.hasBoundary' ",
                    ":has-safe-area='item.hasSafeArea' ",
                    ":landmark='item.landmark' ",
                    ":angle='180' ",
                    ":width='calcRoadTopLaneWidth' ",
                    ":x='crossTopMoveTo(n).x' ",
                    ":y='crossTopMoveTo(n).y' ",
                    "@on-pavement-click='onRoadLanePavementClick($event, 0, n)'",
                    "@on-solid-line-click='onRoadLaneSolidLineClick($event, 0, n)'",
                    "@on-dotted-line-click='onRoadLaneDottedLineClick($event, 0, n)'",
                    "@on-parterre-boundary-line-click='onRoadParterreBoundaryClick($event, 0, n)'",
                    "@on-y-dotted-line-click='onRoadLaneYDottedLineClick($event, 0, n)'",
                    "@on-y-solid-line-click='onRoadLaneYSolidLineClick($event, 0, n)'",
                    "@on-double-y-solid-click='onRoadLaneYDoubleSolidLineClick($event, 0, n, arguments[1])'",
                    "@on-double-y-dashed-click='onRoadLaneYDoubleDottedLineClick($event, 0, n, arguments[1])'",
                    "@on-y-solid-area-click='onRoadLaneYSolidAreaClick($event, 0, n)'",
                    "@on-parterre-click='onRoadLaneParterreClick($event, 0, n)'",
                    "@on-parterre-line-click='onRoadLaneParterreLineClick($event, 0, n, arguments[1])'",
                    "@on-parterre-safe-area-click='onRoadLaneParterreSafeAreaClick($event, 0, n)'",
                    "@on-lane-mark-click='onRoadLaneMarkClick($event, 0, n, arguments[1])'",
                    "></lane>",
                "<lane ",
                    "v-for='(item, n) in RoadRight.Lane' ",
                    ":type='item.type' ",
                    ":assist='item.assist' ",
                    ":reverse='item.reverse' ",
                    ":markright='item.markright' ",
                    ":has-boundary='item.hasBoundary' ",
                    ":has-safe-area='item.hasSafeArea' ",
                    ":landmark='item.landmark' ",
                    ":angle='-90' ",
                    ":width='calcRoadRightWidth' ",
                    ":x='crossRightMoveTo(n).x' ",
                    ":y='crossRightMoveTo(n).y' ",
                    "@on-pavement-click='onRoadLanePavementClick($event, 1, n)'",
                    "@on-solid-line-click='onRoadLaneSolidLineClick($event, 1, n)'",
                    "@on-dotted-line-click='onRoadLaneDottedLineClick($event, 1, n)'",
                    "@on-parterre-boundary-line-click='onRoadParterreBoundaryClick($event, 1, n)'",
                    "@on-y-dotted-line-click='onRoadLaneYDottedLineClick($event, 1, n)'",
                    "@on-y-solid-line-click='onRoadLaneYSolidLineClick($event, 1, n)'",
                    "@on-double-y-solid-click='onRoadLaneYDoubleSolidLineClick($event, 1, n, arguments[1])'",
                    "@on-double-y-dashed-click='onRoadLaneYDoubleDottedLineClick($event, 1, n, arguments[1])'",
                    "@on-y-solid-area-click='onRoadLaneYSolidAreaClick($event, 1, n)'",
                    "@on-parterre-click='onRoadLaneParterreClick($event, 1, n)'",
                    "@on-parterre-line-click='onRoadLaneParterreLineClick($event, 1, n, arguments[1])'",
                    "@on-parterre-safe-area-click='onRoadLaneParterreSafeAreaClick($event, 1, n)'",
                    "@on-lane-mark-click='onRoadLaneMarkClick($event, 1, n, arguments[1])'",
                    "></lane>",
                "<lane ",
                    "v-for='(item, n) in RoadBottom.Lane' ",
                    ":type='item.type' ",
                    ":assist='item.assist' ",
                    ":reverse='item.reverse' ",
                    ":markright='item.markright' ",
                    ":has-boundary='item.hasBoundary' ",
                    ":has-safe-area='item.hasSafeArea' ",
                    ":landmark='item.landmark' ",
                    ":angle='0' ",
                    ":width='calcRoadBottomLaneWidth' ",
                    ":x='crossBottomMoveTo(n).x' ",
                    ":y='crossBottomMoveTo(n).y' ",
                    "@on-pavement-click='onRoadLanePavementClick($event, 2, n)'",
                    "@on-solid-line-click='onRoadLaneSolidLineClick($event, 2, n)'",
                    "@on-dotted-line-click='onRoadLaneDottedLineClick($event, 2, n)'",
                    "@on-parterre-boundary-line-click='onRoadParterreBoundaryClick($event, 2, n)'",
                    "@on-y-dotted-line-click='onRoadLaneYDottedLineClick($event, 2, n)'",
                    "@on-y-solid-line-click='onRoadLaneYSolidLineClick($event, 2, n)'",
                    "@on-double-y-solid-click='onRoadLaneYDoubleSolidLineClick($event, 2, n, arguments[1])'",
                    "@on-double-y-dashed-click='onRoadLaneYDoubleDottedLineClick($event, 2, n, arguments[1])'",
                    "@on-y-solid-area-click='onRoadLaneYSolidAreaClick($event, 2, n)'",
                    "@on-parterre-click='onRoadLaneParterreClick($event, 2, n)'",
                    "@on-parterre-line-click='onRoadLaneParterreLineClick($event, 2, n, arguments[1])'",
                    "@on-parterre-safe-area-click='onRoadLaneParterreSafeAreaClick($event, 2, n)'",
                    "@on-lane-mark-click='onRoadLaneMarkClick($event, 2, n, arguments[1])'",
                    "></lane>",
                "<lane ",
                    "v-for='(item, n) in RoadLeft.Lane' ",
                    ":type='item.type' ",
                    ":assist='item.assist' ",
                    ":reverse='item.reverse' ",
                    ":markright='item.markright' ",
                    ":has-boundary='item.hasBoundary' ",
                    ":has-safe-area='item.hasSafeArea' ",
                    ":landmark='item.landmark' ",
                    ":angle='90' ",
                    ":width='calcRoadLeftLaneWidth' ",
                    ":x='crossLeftMoveTo(n).x' ",
                    ":y='crossLeftMoveTo(n).y' ",
                    "@on-pavement-click='onRoadLanePavementClick($event, 3, n)'",
                    "@on-solid-line-click='onRoadLaneSolidLineClick($event, 3, n)'",
                    "@on-dotted-line-click='onRoadLaneDottedLineClick($event, 3, n)'",
                    "@on-parterre-boundary-line-click='onRoadParterreBoundaryClick($event, 3, n)'",
                    "@on-y-dotted-line-click='onRoadLaneYDottedLineClick($event, 3, n)'",
                    "@on-y-solid-line-click='onRoadLaneYSolidLineClick($event, 3, n)'",
                    "@on-double-y-solid-click='onRoadLaneYDoubleSolidLineClick($event, 3, n, arguments[1])'",
                    "@on-double-y-dashed-click='onRoadLaneYDoubleDottedLineClick($event, 3, n, arguments[1])'",
                    "@on-y-solid-area-click='onRoadLaneYSolidAreaClick($event, 3, n)'",
                    "@on-parterre-click='onRoadLaneParterreClick($event, 3, n)'",
                    "@on-parterre-line-click='onRoadLaneParterreLineClick($event, 3, n, arguments[1])'",
                    "@on-parterre-safe-area-click='onRoadLaneParterreSafeAreaClick($event, 3, n)'",
                    "@on-lane-mark-click='onRoadLaneMarkClick($event, 3, n, arguments[1])'",
                    "></lane>",
                "<g>",
                    //公路边界线
                    "<path v-show='RoadTop.boundary.right.has' :d='calcRoadTopLeftBoundary.inner' fill='none' stroke='#fff' stroke-width='2' transform='translate(2, 2)' @click.capture.stop='onRoadBoundaryClick($event, 0, true)' />",
                    "<path v-show='RoadTop.boundary.left.has' :d='calcRoadTopRightBoundary.inner' fill='none' stroke='#fff' stroke-width='2' transform='translate(-2, 2)'  @click.capture.stop='onRoadBoundaryClick($event, 0, false)' />",
                    "<path v-show='RoadRight.boundary.right.has' :d='calcRoadRightTopBoundary.inner' fill='none' stroke='#fff' stroke-width='2' transform='translate(-2, 2)' @click.capture.stop='onRoadBoundaryClick($event, 1, true)' />",
                    "<path v-show='RoadRight.boundary.left.has' :d='calcRoadRightBottomBoundary.inner' fill='none' stroke='#fff' stroke-width='2' transform='translate(-2, -2)' @click.capture.stop='onRoadBoundaryClick($event, 1, false)'/>",
                    "<path v-show='RoadBottom.boundary.right.has' :d='calcRoadBottomRightBoundary.inner' fill='none' stroke='#fff' stroke-width='2' transform='translate(-2, -2)' @click.capture.stop='onRoadBoundaryClick($event, 2, true)'/>",
                    "<path v-show='RoadBottom.boundary.left.has' :d='calcRoadBottomLeftBoundary.inner' fill='none' stroke='#fff' stroke-width='2' transform='translate(2, -2)' @click.capture.stop='onRoadBoundaryClick($event, 2, false)'/>",
                    "<path v-show='RoadLeft.boundary.left.has' :d='calcRoadLeftTopBoundary.inner' fill='none' stroke='#fff' stroke-width='2' transform='translate(2, 2)' @click.capture.stop='onRoadBoundaryClick($event, 3, false)'/>",
                    "<path v-show='RoadLeft.boundary.right.has' :d='calcRoadLeftBottomBoundary.inner' fill='none' stroke='#fff' stroke-width='2' transform='translate(2, -2)' @click.capture.stop='onRoadBoundaryClick($event, 3, true)'/>",
                "</g>",
                "<g>",
                    //行人安全暂留区斑马线
                    "<line v-show='RoadTop.pedestrian && RoadTop.stayArea && RoadTop.stayPedestrian' :x1='calcPedestrianRoadTop.p1.x' :x2='calcPedestrianRoadTop.p2.x' :y1='calcPedestrianRoadTop.p1.y' :y2='calcPedestrianRoadTop.p2.y' stroke='#fff' stroke-width='40' stroke='#fff' stroke-dasharray='5,5' style='pointer-events:visibleStroke;' @click.capture.stop='onRoadPedestrianClick($event, 0, true)'/>",
                    "<line v-show='RoadRight.pedestrian && RoadRight.stayArea && RoadRight.stayPedestrian' :x1='calcPedestrianRoadRight.p1.x' :x2='calcPedestrianRoadRight.p2.x' :y1='calcPedestrianRoadRight.p1.y' :y2='calcPedestrianRoadRight.p2.y' stroke='#fff' stroke-width='40' stroke='#fff' stroke-dasharray='5,5' style='pointer-events:visibleStroke;' @click.capture.stop='onRoadPedestrianClick($event, 1, true)'/>",
                    "<line v-show='RoadBottom.pedestrian && RoadBottom.stayArea && RoadBottom.stayPedestrian' :x1='calcPedestrianRoadBottom.p1.x' :x2='calcPedestrianRoadBottom.p2.x' :y1='calcPedestrianRoadBottom.p1.y' :y2='calcPedestrianRoadBottom.p2.y' stroke='#fff' stroke-width='40' stroke='#fff' stroke-dasharray='5,5' style='pointer-events:visibleStroke;' @click.capture.stop='onRoadPedestrianClick($event, 2, true)'/>",
                    "<line v-show='RoadLeft.pedestrian && RoadLeft.stayArea && RoadLeft.stayPedestrian' :x1='calcPedestrianRoadLeft.p1.x' :x2='calcPedestrianRoadLeft.p2.x' :y1='calcPedestrianRoadLeft.p1.y' :y2='calcPedestrianRoadLeft.p2.y' stroke='#fff' stroke-width='40' stroke='#fff' stroke-dasharray='5,5' style='pointer-events:visibleStroke;' @click.capture.stop='onRoadPedestrianClick($event, 3, true)'/>",
                "</g>",
                "<stay-pedestrian v-show='RoadTop.stayArea && RoadTop.pedestrian' :width='calcRoadTopStay.width' :height='calcRoadTopStay.height' :angle='0' :x='calcRoadTopStay.left' :y='calcRoadTopStay.top' :defs='uuid' @on-stay-area-click='onCrossStayAreaClick($event, 0)' ></stay-pedestrian>",
                "<stay-pedestrian v-show='RoadRight.stayArea && RoadRight.pedestrian' :width='calcRoadRightStay.width' :height='calcRoadRightStay.height' :angle='90' :x='calcRoadRightStay.left' :y='calcRoadRightStay.top' :defs='uuid' @on-stay-area-click='onCrossStayAreaClick($event, 1)'></stay-pedestrian>",
                "<stay-pedestrian v-show='RoadBottom.stayArea && RoadBottom.pedestrian' :width='calcRoadBottomStay.width' :height='calcRoadBottomStay.height' :angle='180' :x='calcRoadBottomStay.left' :y='calcRoadBottomStay.top' :defs='uuid' @on-stay-area-click='onCrossStayAreaClick($event, 2)'></stay-pedestrian>",
                "<stay-pedestrian v-show='RoadLeft.stayArea && RoadLeft.pedestrian' :width='calcRoadLeftStay.width' :height='calcRoadLeftStay.height' :angle='-90' :x='calcRoadLeftStay.left' :y='calcRoadLeftStay.top' :defs='uuid'  @on-stay-area-click='onCrossStayAreaClick($event, 3)'></stay-pedestrian>",
            "</g>"
        ];
        return template.join('');
    }
    var crossRoads = Vue.extend({
        template: crossRender.apply(this),
        props : {
            RoadTop : {
                //路口名称，前端支持此属性，但无UI表现,仅限数据交互使用。
                name : { default: '', type: String },
                //边界白线控制
                boundary: { 
                    left : { 
                        //deafult: 0 左侧边界白线的长度，前端支持此属性，但无UI表现,仅限数据交互使用。
                        length: { defualt: 0, type: Number },
                        //deafult: true 是否具有左侧边界白线,
                        has: { default: true, type: Boolean } 
                    },
                    right: {
                        //deafult: 0 右侧边界白线的长度，前端支持此属性，但无UI表现,仅限数据交互使用。
                        length: { defualt: 0, type: Number },
                        //deafult: true 是否具有右侧边界白线
                        has: { default: true, type: Boolean } 
                    }
                },
                //deafult: true 是否具有人行班马线
                pedestrian: { default: true, type: Boolean },
                //default: true 是否具有人行暂留区
                stayArea: { default: true, type: Boolean },
                //default: true, 是否具有暂留区斑马线
                stayPedestrian: { default: true, type: Boolean },
                //default: true 是否具有机动车停止线
                stopLine: { default: true, type: Boolean },
                //车道,自右向左绘制(顺时针)
                Lane : { default: [], type: Array },
                type: Object
            },
            RoadRight : {
                //路口名称，前端支持此属性，但无UI表现,仅限数据交互使用。
                name : { default: '', type: String },
                //边界白线控制
                boundary: { 
                    left : { 
                        //deafult: 0 左侧边界白线的长度，前端支持此属性，但无UI表现,仅限数据交互使用。
                        length: { defualt: 0, type: Number },
                        //deafult: true 是否具有左侧边界白线,
                        has: { default: true, type: Boolean } 
                    },
                    right: {
                        //deafult: 0 右侧边界白线的长度，前端支持此属性，但无UI表现,仅限数据交互使用。
                        length: { defualt: 0, type: Number },
                        //deafult: true 是否具有右侧边界白线
                        has: { default: true, type: Boolean } 
                    }
                },
                //deafult: true 是否具有人行班马线
                pedestrian: { default: true, type: Boolean },
                //default: true 是否具有人行暂留区
                stayArea: { default: true, type: Boolean },
                //default: true, 是否具有暂留区斑马线
                stayPedestrian: { default: true, type: Boolean },
                //default: true 是否具有机动车停止线
                stopLine: { default: true, type: Boolean },
                //车道,自右向左绘制(顺时针)
                Lane : { default: [], type: Array },
                type: Object
            },
            RoadBottom : {
                //路口名称，前端支持此属性，但无UI表现,仅限数据交互使用。
                name : { default: '', type: String },
                //边界白线控制
                boundary: { 
                    left : { 
                        //deafult: 0 左侧边界白线的长度，前端支持此属性，但无UI表现,仅限数据交互使用。
                        length: { defualt: 0, type: Number },
                        //deafult: true 是否具有左侧边界白线,
                        has: { default: true, type: Boolean } 
                    },
                    right: {
                        //deafult: 0 右侧边界白线的长度，前端支持此属性，但无UI表现,仅限数据交互使用。
                        length: { defualt: 0, type: Number },
                        //deafult: true 是否具有右侧边界白线
                        has: { default: true, type: Boolean } 
                    }
                },
                //deafult: true 是否具有人行班马线
                pedestrian: { default: true, type: Boolean },
                //default: true 是否具有人行暂留区
                stayArea: { default: true, type: Boolean },
                //default: true, 是否具有暂留区斑马线
                stayPedestrian: { default: true, type: Boolean },
                //default: true 是否具有机动车停止线
                stopLine: { default: true, type: Boolean },
                //车道,自右向左绘制(顺时针)
                Lane : { default: [], type: Array },
                type: Object
            },
            RoadLeft : {
                //路口名称，前端支持此属性，但无UI表现,仅限数据交互使用。
                name : { default: '', type: String },
                //边界白线控制
                boundary: { 
                    left : { 
                        //deafult: 0 左侧边界白线的长度，前端支持此属性，但无UI表现,仅限数据交互使用。
                        length: { defualt: 0, type: Number },
                        //deafult: true 是否具有左侧边界白线,
                        has: { default: true, type: Boolean } 
                    },
                    right: {
                        //deafult: 0 右侧边界白线的长度，前端支持此属性，但无UI表现,仅限数据交互使用。
                        length: { defualt: 0, type: Number },
                        //deafult: true 是否具有右侧边界白线
                        has: { default: true, type: Boolean } 
                    }
                },
                //deafult: true 是否具有人行班马线
                pedestrian: { default: true, type: Boolean },
                //default: true 是否具有人行暂留区
                stayArea: { default: true, type: Boolean },
                //default: true, 是否具有暂留区斑马线
                stayPedestrian: { default: true, type: Boolean },
                //default: true 是否具有机动车停止线
                stopLine: { default: true, type: Boolean },
                //车道,自右向左绘制(顺时针)
                Lane : { default: [], type: Array },
                type: Object
            },
            RoadWidth : {
                default: 500,
                type: Number
            }
        },
        data : function() {
            return {
                uuid : utils.uuid()
            }
        },
        components: {
            "StayPedestrian": StayPedestrian,
            "Lane" : Lane
        },
        computed: {
            caleRoadTopLeftNotch: function() {
                //计算十字路口底色缺口
                var me = this;
                var ox = (1920 - me.RoadWidth) / 2;
                var oy = (1080 - me.RoadWidth) / 2 + 1;
                var top = oy - 125;
                var left = ox - 125;
                return "M${ox},${top} V${oy} H${left} S${ox},${oy} ${ox},${top} z".replace(/(\$\{top\})/g, top).replace(/(\$\{left\})/g, left).replace(/(\$\{ox\})/g, ox).replace(/(\$\{oy\})/g, oy)
            },
            caleRoadTopRightNotch: function() {
                //计算十字路口底色缺口
                var me = this;
                var ox = (1920 / 2) + (me.RoadWidth / 2) - 1;
                var oy = (1080 - me.RoadWidth) / 2 + 1;
                var top = oy - 125;
                var right = ox + 125;
                return "M${ox},${top} V${oy} H${right} S${ox},${oy} ${ox},${top} z".replace(/(\$\{top\})/g, top).replace(/(\$\{right\})/g, right).replace(/(\$\{ox\})/g, ox).replace(/(\$\{oy\})/g, oy);
            },
            calcRoadBottomLeftNotch: function() {
                var me = this;
                var ox = (1920 - me.RoadWidth) / 2 + 1;
                var oy = (1080 / 2) + (me.RoadWidth / 2) - 1;
                var left = ox - 125;
                var bottom = oy + 125;
                return "M${left},${oy} H${ox} V${bottom} S${ox},${oy} ${left},${oy} z".replace(/(\$\{ox\})/g, ox).replace(/(\$\{oy\})/g, oy).replace(/(\$\{left\})/g, left).replace(/(\$\{bottom\})/g, bottom);
            },
            calcRoadBottomRightNotch: function() {
                var me = this;
                var ox = (1920 / 2) + (me.RoadWidth / 2) - 1;
                var oy = (1080 / 2) + (me.RoadWidth / 2) - 1;
                var right = ox + 125;
                var bottom = oy + 125;
                return "M${right},${oy} L${ox},${oy} V${bottom} S${ox},${oy} ${right},${oy} z".replace(/(\$\{ox\})/g, ox).replace(/(\$\{oy\})/g, oy).replace(/(\$\{right\})/g, right).replace(/(\$\{bottom\})/g, bottom);
            },
            calcRoadTopLeftBoundary : function() {
                //计算十字路口上方左侧边界线。
                var me = this;
                var left = (1920 - me.RoadWidth) / 2;
                var rx = left - 125;
                var ry = 1080 / 2 - me.RoadWidth / 2 - 125;
                var oy = 1080 / 2 - me.RoadWidth / 2;
                var out = 'M${left},-499999.5 V${ry} S${left},${oy} ${rx},${oy}'.replace(/(\$\{left\})/g, left).replace(/(\$\{rx\})/g, rx).replace(/(\$\{ry\})/g, ry).replace(/(\$\{oy\})/g, oy);
                var inner = 'M${left},-499999.5 V${ry} S${left},${oy} ${rx},${oy}'.replace(/(\$\{left\})/g, left).replace(/(\$\{rx\})/g, rx - 2).replace(/(\$\{ry\})/g, ry).replace(/(\$\{oy\})/g, oy);
                if(!me.RoadTop.stayArea) {
                    out = 'M${left},-499999.5 V${oy}'.replace(/(\$\{left\})/g, left).replace(/(\$\{oy\})/g, oy);
                    inner = 'M${left},-499999.5 V${oy}'.replace(/(\$\{left\})/g, left).replace(/(\$\{oy\})/g, oy);
                }
                return { out: out, inner : inner }
            },
            calcRoadTopRightBoundary : function() {
                //计算十字路口上方右侧边界线。
                var me = this;
                var right = (1920 / 2) + (me.RoadWidth / 2);
                var rx = right + 125;
                var ry = 1080 / 2 - me.RoadWidth / 2 - 125;
                var oy = ((1080 / 2) - me.RoadWidth * 0.5);
                var out = 'M${right},-499999.5 V${ry} S${right},${oy} ${rx},${oy}'.replace(/(\$\{right\})/g, right).replace(/(\$\{rx\})/g, rx).replace(/(\$\{ry\})/g, ry).replace(/(\$\{oy\})/g, oy);
                var inner = 'M${right},-499999.5 V${ry} S${right},${oy} ${rx},${oy}'.replace(/(\$\{right\})/g, right).replace(/(\$\{rx\})/g, rx - 2).replace(/(\$\{ry\})/g, ry).replace(/(\$\{oy\})/g, oy);
                if(!me.RoadRight.stayArea) {
                    out = 'M${right},-499999.5 V${oy}'.replace(/(\$\{right\})/g, right).replace(/(\$\{oy\})/g, oy);
                    inner = 'M${right},-499999.5 V${oy}'.replace(/(\$\{right\})/g, right).replace(/(\$\{oy\})/g, oy);
                }
                return { out: out, inner: inner };
            },
            calcRoadRightTopBoundary: function() {
                //计算十字路口右方上侧边界线。
                var me = this;
                var right = 1920 / 2 + me.RoadWidth / 2;
                var top = 1080 / 2 - me.RoadWidth / 2;
                var rx = right + 125;
                var ry = top - 125;
                var out = 'M${right},${ry} S${right},${top} ${rx},${top} h499999.5'.replace(/(\$\{right\})/g, right).replace(/(\$\{top\})/g, top).replace(/(\$\{rx\})/g, rx).replace(/(\$\{ry\})/g, ry);
                var inner = 'M${right},${ry} S${right},${top} ${rx},${top} h499999.5'.replace(/(\$\{right\})/g, right).replace(/(\$\{top\})/g, top).replace(/(\$\{rx\})/g, rx).replace(/(\$\{ry\})/g, ry - 3);
                if (!me.RoadRight.stayArea) {
                    out = 'M${right},${top} h499999.5'.replace(/(\$\{right\})/g, right).replace(/(\$\{top\})/g, top);
                    inner = 'M${right},${top} h499999.5'.replace(/(\$\{right\})/g, right).replace(/(\$\{top\})/g, top);
                }
                return { out: out, inner: inner };
            },
            calcRoadRightBottomBoundary: function() {
                //计算十字路口右方下侧边界线。
                var me = this;
                var right = 1920 / 2 + me.RoadWidth / 2;
                var bottom = 1080 / 2 + me.RoadWidth / 2;
                var rx = right + 125;
                var ry = bottom + 125;
                var out = "M${right},${ry} S${right},${bottom} ${rx},${bottom} h499999.5".replace(/(\$\{right\})/g, right).replace(/(\$\{bottom\})/g, bottom).replace(/(\$\{rx\})/g, rx).replace(/(\$\{ry\})/g, ry);
                var inner = "M${right},${ry} S${right},${bottom} ${rx},${bottom} h499999.5".replace(/(\$\{right\})/g, right).replace(/(\$\{bottom\})/g, bottom).replace(/(\$\{rx\})/g, rx).replace(/(\$\{ry\})/g, ry);
                if (!me.RoadBottom.stayArea) {
                    out = "M${right},${bottom} h499999.5".replace(/(\$\{right\})/g, right).replace(/(\$\{bottom\})/g, bottom);
                    inner = "M${right},${bottom} h499999.5".replace(/(\$\{right\})/g, right).replace(/(\$\{bottom\})/g, bottom);
                }
                return { out : out, inner : inner };
            },
            calcRoadBottomRightBoundary: function() {
                //计算十字路口下方右侧边界线。
                var me = this;
                var right = 1920 / 2 + me.RoadWidth / 2;
                var bottom = 1080 / 2 + me.RoadWidth / 2;
                var rx = right + 125;
                var ry = bottom + 125;
                var out = "M${right},501079.5 V${ry} S${right},${bottom} ${rx},${bottom}".replace(/(\$\{right\})/g, right).replace(/(\$\{bottom\})/g, bottom).replace(/(\$\{rx\})/g, rx).replace(/(\$\{ry\})/g, ry);
                var inner = "M${right},501079.5 V${ry} S${right},${bottom} ${rx},${bottom}".replace(/(\$\{right\})/g, right).replace(/(\$\{bottom\})/g, bottom).replace(/(\$\{rx\})/g, rx + 3).replace(/(\$\{ry\})/g, ry);
                if (!me.RoadBottom.stayArea) {
                    out = "M${right},501079.5 V${bottom}".replace(/(\$\{right\})/g, right).replace(/(\$\{bottom\})/g, bottom);
                    inner = "M${right},501079.5 V${bottom}".replace(/(\$\{right\})/g, right).replace(/(\$\{bottom\})/g, bottom);
                }
                return { out : out, inner : inner}
            },
            calcRoadBottomLeftBoundary: function() {
                //计算十字路口下方左侧边界线。
                var me = this;
                var left = 1920 / 2 - me.RoadWidth / 2;
                var top = 1080 / 2 + me.RoadWidth / 2;
                var rx = left - 125;
                var ry = top + 125;
                var out = "M${left},501079.5 V${ry} S${left},${top} ${rx},${top}".replace(/(\$\{left\})/g, left).replace(/(\$\{top\})/g, top).replace(/(\$\{rx\})/g, rx).replace(/(\$\{ry\})/g, ry);
                var inner = "M${left},501079.5 V${ry} S${left},${top} ${rx},${top}".replace(/(\$\{left\})/g, left).replace(/(\$\{top\})/g, top).replace(/(\$\{rx\})/g, rx - 3).replace(/(\$\{ry\})/g, ry);
                if (!me.RoadLeft.stayArea) {
                    out = "M${left},501079.5 V${top}".replace(/(\$\{left\})/g, left).replace(/(\$\{top\})/g, top);
                    inner = "M${left},501079.5 V${top}".replace(/(\$\{left\})/g, left).replace(/(\$\{top\})/g, top);
                }
                return { out: out, inner: inner };
            },
            calcRoadLeftTopBoundary: function() {
                //计算十字路口左方上侧边界线。
                var me = this;
                var oy = 1080 / 2 - me.RoadWidth / 2;
                var ox = 1920 / 2 - me.RoadWidth / 2;
                var rx = ox - 125;
                var ry = oy - 125;
                var out = "M-501919.5,${oy} H${rx} S${ox},${oy} ${ox},${ry}".replace(/(\$\{oy\})/g, oy).replace(/(\$\{ox\})/g, ox).replace(/(\$\{rx\})/g, rx).replace(/(\$\{ry\})/g, ry);
                var inner = "M-501919.5,${oy} H${rx} S${ox},${oy} ${ox},${ry}".replace(/(\$\{oy\})/g, oy).replace(/(\$\{ox\})/g, ox).replace(/(\$\{rx\})/g, rx).replace(/(\$\{ry\})/g, ry - 3);
                if (!me.RoadTop.stayArea) {
                    out = "M-501919.5,${oy} H${ox}".replace(/(\$\{oy\})/g, oy).replace(/(\$\{ox\})/g, ox);
                    inner = "M-501919.5,${oy} H${ox}".replace(/(\$\{oy\})/g, oy).replace(/(\$\{ox\})/g, ox);
                }
                return { out: out, inner: inner };
            },
            calcRoadLeftBottomBoundary: function() {
                //计算十字路口左方下侧边界线。
                var me = this;
                var oy = 1080 / 2 + me.RoadWidth / 2;
                var ox = 1920 / 2 - me.RoadWidth / 2;
                var rx = ox - 125;
                var ry = oy + 125;
                var out = "M${ox},${ry} S${ox},${oy} ${rx},${oy} h-499999.5".replace(/(\$\{oy\})/g, oy).replace(/(\$\{ox\})/g, ox).replace(/(\$\{rx\})/g, rx).replace(/(\$\{ry\})/g, ry);
                var inner = "M${ox},${ry} S${ox},${oy} ${rx},${oy} h-499999.5".replace(/(\$\{oy\})/g, oy).replace(/(\$\{ox\})/g, ox).replace(/(\$\{rx\})/g, rx).replace(/(\$\{ry\})/g, ry + 3);
                if(!me.RoadLeft.stayArea) {
                    out = "M-501919.5,${oy} H${ox}".replace(/(\$\{oy\})/g, oy).replace(/(\$\{ox\})/g, ox);
                    inner = "M-501919.5,${oy} H${ox}".replace(/(\$\{oy\})/g, oy).replace(/(\$\{ox\})/g, ox);
                }
                return { out: out, inner: inner };
            },
            calcPedestrianLength: function() {
                var me = this;
                var topLane = me.RoadTop.Lane.length | 0;
                var rightLane = me.RoadRight.Lane.length | 0;
                var bottomLane = me.RoadBottom.Lane.length | 0;
                var leftLane = me.RoadLeft.Lane.length | 0;
                return {
                    top : {
                        x1 : topLane - 2 <= 0 ? (1920 - me.RoadWidth) / 2 + 50 : (1920 - me.RoadWidth) / 2 + me.RoadWidth / topLane,
                        x2 : topLane - 2 <= 0 ? 1920 / 2 + me.RoadWidth / 2 - 50 : 1920 / 2 + me.RoadWidth / 2 - me.RoadWidth / topLane
                    },
                    right: {
                        y1 : rightLane - 2 <= 0 ? (1080 - me.RoadWidth) / 2 + 50 : (1080 - me.RoadWidth) / 2 + me.RoadWidth / rightLane,
                        y2 : rightLane - 2 <= 0 ? 1080 / 2 + me.RoadWidth / 2 - 50 : 1080 / 2 + me.RoadWidth / 2 - me.RoadWidth / rightLane
                    },
                    bottom : {
                        x1 : bottomLane - 2 <= 0 ? (1920 - me.RoadWidth) / 2 + 50 : (1920 - me.RoadWidth) / 2 + me.RoadWidth / bottomLane,
                        x2 : bottomLane - 2 <= 0 ? 1920 / 2 + me.RoadWidth / 2 - 50 : 1920 / 2 + me.RoadWidth / 2 - me.RoadWidth / bottomLane
                    },
                    left: {
                        y1 : leftLane - 2 <= 0 ? (1080 - me.RoadWidth) / 2 + 50 : (1080 - me.RoadWidth) / 2 + me.RoadWidth / leftLane,
                        y2 : leftLane - 2 <= 0 ? 1080 / 2 + me.RoadWidth / 2 - 50 : 1080 / 2 + me.RoadWidth / 2 - me.RoadWidth / leftLane
                    }
                }
            },
            calcPedestrianRoadTop: function() {
                var me = this;
                var topLane = me.RoadTop.Lane.length | 0;
                var leftLane = me.RoadLeft.Lane.length | 0;
                var langW = topLane <= 2 ? 50 : me.RoadWidth / topLane; 
                var langH = leftLane <= 2 ? 50 : me.RoadWidth / leftLane;
                var s = Math.sqrt(langW * langW + langH * langH) / 2;
                var ox = (1920 - me.RoadWidth) / 2 - 125;
                var oy = (1080 - me.RoadWidth) / 2 - 125;
                var p = utils.calcRadiusAnyPoint(ox, oy, 130, 45);
                var p2 = utils.calcRadiusAnyPoint(ox, oy, 150 + s, 45);
                return { p1: p, p2: p2 };
            },
            calcPedestrianRoadRight: function() {
                var me = this;
                var rightLane = me.RoadRight.Lane.length | 0;
                var topLane = me.RoadTop.Lane.length | 0;
                var langW = topLane <= 2 ? 50 : me.RoadWidth / topLane; 
                var langH = rightLane <= 2 ? 50 : me.RoadWidth / rightLane;
                var s = Math.sqrt(langW * langW + langH * langH) / 2;
                var ox = (1920 / 2) + (me.RoadWidth / 2) + 125;
                var oy = (1080 / 2) - (me.RoadWidth / 2) - 125;
                var p = utils.calcRadiusAnyPoint(ox, oy, 130, 135);
                var p2 = utils.calcRadiusAnyPoint(ox, oy, 150 + s, 135);
                return { p1: p, p2: p2 };
            },
            calcPedestrianRoadBottom: function() {
                var me = this;
                var bottomLane = me.RoadBottom.Lane.length | 0;
                var rightLane = me.RoadRight.Lane.length | 0;
                var langW = bottomLane <= 2 ? 50 : me.RoadWidth / bottomLane; 
                var langH = rightLane <= 2 ? 50 : me.RoadWidth / rightLane;
                var s = Math.sqrt(langW * langW + langH * langH) / 2;
                var ox = (1920 / 2) + (me.RoadWidth / 2) + 125;
                var oy = (1080 / 2) + (me.RoadWidth / 2) + 125;
                var p = utils.calcRadiusAnyPoint(ox, oy, 130, 225);
                var p2 = utils.calcRadiusAnyPoint(ox, oy, 150 + s, 225);
                return { p1: p, p2: p2 };
            },
            calcPedestrianRoadLeft: function() {
                var me = this;
                var leftLane = me.RoadLeft.Lane.length | 0;
                var bottomLane = me.RoadBottom.Lane.length | 0;
                var langW = bottomLane <= 2 ? 50 : me.RoadWidth / bottomLane; 
                var langH = leftLane <= 2 ? 50 : me.RoadWidth / leftLane;
                var s = Math.sqrt(langW * langW + langH * langH) / 2;
                var ox = (1920 - me.RoadWidth) / 2 - 125;
                var oy = (1080 / 2) + (me.RoadWidth / 2) + 125;
                var p = utils.calcRadiusAnyPoint(ox, oy, 130, 315);
                var p2 = utils.calcRadiusAnyPoint(ox, oy, 150 + s, 315);
                return { p1: p, p2: p2 };
            },
            calcRoadTopStopLine: function() {
                var me = this;
                var lane = me.RoadTop.Lane.length | 0;
                var diff = !me.RoadTop.stayArea ? 0 : lane <= 2 ? 50 : me.RoadWidth / lane;
                var width = !lane ? me.RoadWidth - (diff * 2) : ((me.RoadTop.Lane.filter(function(it) { return !it.reverse }).length || 0) * (me.RoadWidth / lane));
                var x = (1920 - me.RoadWidth) / 2 + diff;
                var y = 1080 / 2 - me.RoadWidth / 2;
                return { p1 : { x: x, y: y - 20 }, p2: { x: x + width, y: y - 20 }};
            },
            calcRoadRightStopLine: function() {
                var me = this;
                var lane = me.RoadRight.Lane.length | 0;
                var diff = !me.RoadRight.stayArea ? 0 : lane <= 2 ? 50 : me.RoadWidth / lane;
                var height = !lane ? me.RoadWidth - (diff * 2) : ((me.RoadRight.Lane.filter(function(it) { return !it.reverse }).length || 0) * (me.RoadWidth / lane)) - diff;
                var x = 1920 / 2 + me.RoadWidth / 2 + 20;
                var y = (1080 - me.RoadWidth) / 2 + diff;
                return { p1: { x : x, y : y }, p2: { x : x, y : y + height } };
            },
            calcRoadBottomStopLine: function() {
                var me = this;
                var lane = me.RoadBottom.Lane.length | 0;
                var diff = !me.RoadBottom.stayArea ? 0 : lane <= 2 ? 50 : me.RoadWidth / lane;
                var width = !lane ? me.RoadWidth - (diff * 2) : ((me.RoadBottom.Lane.filter(function(it) { return !it.reverse }).length || 0) * (me.RoadWidth / lane)) - diff;
                var x = 1920 / 2 + me.RoadWidth / 2 - width - diff;
                var y = 1080 / 2 + me.RoadWidth / 2;
                return { p1 : { x: x, y: y + 20 }, p2: { x: x + width, y: y + 20 }};
            },
            calcRoadLeftStopLine: function() {
                var me = this;
                var lane = me.RoadLeft.Lane.length | 0;
                var diff = !me.RoadLeft.stayArea ? 0 : lane <= 2 ? 50 : me.RoadWidth / lane;
                var height = !lane ? me.RoadWidth - (diff * 2) : ((me.RoadLeft.Lane.filter(function(it) { return !it.reverse }).length || 0) * (me.RoadWidth / lane)) - diff;
                var x = 1920 / 2 - me.RoadWidth / 2 - 20;
                var y = 1080 / 2 + me.RoadWidth / 2 - diff;
                return { p1: { x : x, y : y - height }, p2: { x : x, y : y } };
            },
            calcRoadTopStay: function() {
                var me = this;
                var topLane = me.RoadTop.Lane.length | 0;
                var leftLane = me.RoadLeft.Lane.length | 0;
                var layout = {};
                layout.width = topLane <= 2 ? 150 : ((me.RoadWidth / topLane) * 2);
                layout.height = leftLane <= 2 ? 150 : ((me.RoadWidth / leftLane) * 2);
                layout.left = topLane <= 2 ? ((1920 - me.RoadWidth) / 2 + 50 - layout.width) : (1920 - me.RoadWidth) / 2 + (me.RoadWidth / topLane) - layout.width - 1;
                layout.top = leftLane <= 2 ? (1080 / 2 - me.RoadWidth / 2 + 50 - layout.height) : (1080 - me.RoadWidth) / 2 + (me.RoadWidth / leftLane) - layout.height - 1;
                return layout;
            },
            calcRoadRightStay: function() {
                var me = this;
                var topLane = me.RoadTop.Lane.length | 0;
                var rightLane = me.RoadRight.Lane.length | 0;
                var layout = {};
                layout.width = rightLane <= 2 ? 150 : ((me.RoadWidth / rightLane) * 2);
                layout.height = topLane <= 2 ? 150 : ((me.RoadWidth / topLane) * 2);

                layout.left = topLane <= 2 ? ((1920 /2 + me.RoadWidth / 2) - 50 + layout.height) : 1920 / 2 + me.RoadWidth / 2 + (me.RoadWidth / topLane) + 1;
                layout.top = rightLane <= 2 ? (1080 / 2 - me.RoadWidth / 2 + 50 - layout.width) : (1080 - me.RoadWidth) / 2 + (me.RoadWidth / rightLane) - layout.width - 1;
                return layout;
            },
            calcRoadBottomStay: function() {
                var me = this;
                var bottomLane = me.RoadBottom.Lane.length | 0;
                var rightLane = me.RoadRight.Lane.length | 0;
                var layout = {};
                layout.width = bottomLane <= 2 ? 150 : ((me.RoadWidth / bottomLane) * 2);
                layout.height = rightLane <= 2 ? 150 : ((me.RoadWidth / rightLane) * 2);
                layout.left = bottomLane <= 2 ? ((1920 /2 + me.RoadWidth / 2) - 50 + layout.width) : 1920 / 2 + me.RoadWidth / 2 - (me.RoadWidth / bottomLane) + layout.width + 1;
                layout.top = rightLane <= 2 ? (1080 / 2 + me.RoadWidth / 2 - 50 + layout.height) : 1080 / 2 + me.RoadWidth / 2 - (me.RoadWidth / rightLane) + layout.height + 1;
                return layout;
            },
            calcRoadLeftStay: function() {
                var me = this;
                var leftLane = me.RoadLeft.Lane.length | 0;
                var bottomLane = me.RoadBottom.Lane.length | 0;
                var layout = {};
                layout.width = leftLane <= 2 ? 150 : ((me.RoadWidth / leftLane) * 2);
                layout.height = bottomLane <= 2 ? 150 : ((me.RoadWidth / bottomLane) * 2);
                layout.left = bottomLane <= 2 ? ((1920 - me.RoadWidth) / 2 + 50 - layout.height) : (1920 - me.RoadWidth) / 2 + (me.RoadWidth / bottomLane) - layout.height - 1;
                layout.top = leftLane <= 2 ? (1080 / 2 + me.RoadWidth / 2 - 50 + layout.width) : 1080 / 2 + me.RoadWidth / 2 - (me.RoadWidth / leftLane) + layout.width + 1;
                return layout;
            },
            calcRoadTopLaneWidth: function() {
                var me = this;
                if(me.RoadTop.Lane && me.RoadTop.Lane.length) {
                    return me.RoadWidth / me.RoadTop.Lane.length;
                }
                return me.RoadWidth;
            },
            calcRoadRightWidth: function() {
                var me = this;
                if(me.RoadRight.Lane && me.RoadRight.Lane.length) {
                    return me.RoadWidth / me.RoadRight.Lane.length;
                }
                return me.RoadWidth;
            },
            calcRoadBottomLaneWidth: function() {
                var me = this;
                if(me.RoadBottom.Lane && me.RoadBottom.Lane.length) {
                    return me.RoadWidth / me.RoadBottom.Lane.length;
                }
                return me.RoadWidth;
            },
            calcRoadLeftLaneWidth: function() {
                var me = this;
                if(me.RoadLeft.Lane && me.RoadLeft.Lane.length) {
                    return me.RoadWidth / me.RoadLeft.Lane.length;
                }
                return me.RoadWidth;
            }
        },
        methods: {
            crossTopMoveTo: function(n) {
                var me = this;
                var left = (1920 - me.RoadWidth) / 2;
                var top = (1080 - me.RoadWidth) / 2 - 20;
                var width = me.calcRoadTopLaneWidth;
                return { x : (n + 1) * width + left, y: top };
            },
            crossRightMoveTo: function(n) {
                var me = this;
                var top = (1080 - me.RoadWidth) / 2;
                var left = 1920 / 2 + me.RoadWidth / 2 + 20;
                var width = me.calcRoadRightWidth;
                return { x : left, y : (n + 1) * width + top };
            },
            crossBottomMoveTo: function(n) {
                var me = this;
                var top = 1080 / 2 + me.RoadWidth / 2 + 20;
                var left = 1920 / 2 + me.RoadWidth / 2;
                var width = me.calcRoadBottomLaneWidth;
                return { x : left - (n + 1) * width, y : top };
            },
            crossLeftMoveTo: function(n) {
                var me = this;
                var top = 1080 / 2 + me.RoadWidth / 2;
                var left = (1920 - me.RoadWidth) / 2 - 20;
                var width = me.calcRoadLeftLaneWidth;
                return { x: left, y: top - (n + 1) * width };
            },
            onCrossStayAreaClick: function(e, no) {
                //十字路口行人暂留区域点击事件
                this.$parent.$emit('cross-stay-click', e, no, 'right');
            },
            onRoadBoundaryClick: function(e, no, isRight) {
                //十字路口公路边界线的点击事件
                this.$parent.$emit('cross-road-boundary-click', e, no, isRight ? 'right' : 'left');
            },
            onRoadPedestrianClick: function(e, no, isStay) {
                //十字路口行人斑马线的点击事件
                this.$parent.$emit('cross-road-pedestrian-click', e, no, isStay);
            },
            onRoadStopLineClick: function(e, no) {
                //机动车停止线点击事件
                this.$parent.$emit("cross-road-stopline-click", e, no);
            },
            onRoadLanePavementClick: function(e, no, lane) {
                //机动车道路点击事件
                this.$parent.$emit("cross-road-pavement-click", e, no, lane);
            },
            onRoadLaneSolidLineClick: function(e, no, lane) {
                //机动车道路白色实线点击事件
                this.$parent.$emit("cross-solid-line-click", e, no, lane);
            },
            onRoadLaneDottedLineClick: function(e, no, lane) {
                //机动车道路白色虚线点击事件
                this.$parent.$emit("cross-dotted-line-click", e, no, lane);
            },
            onRoadParterreBoundaryClick: function(e, no, lane) {
                //花坛边界线点击事件
                this.$parent.$emit("cross-parterre-boundary-line-click", e, no, lane);
            },
            onRoadLaneYDottedLineClick: function() {
                //机动车黄色虚线点击事件
                this.$parent.$emit("cross-y-dotted-line-click", e, no, lane);
            },
            onRoadLaneYSolidLineClick: function(e, no, lane) {
                //机动车黄色实线点击事件
                this.$parent.$emit("cross-y-solid-line-click", e, no, lane);
            },
            onRoadLaneYDoubleSolidLineClick: function(e, no, lane, side) {
                //机动车双黄色实线点击事件
                this.$parent.$emit("cross-y-double-solid-line-click", e, no, lane, side);
            },
            onRoadLaneYDoubleDottedLineClick: function(e, no, lane, side) {
                //机动车黄色虚线点击事件
                this.$parent.$emit("cross-y-double-dashed-line-click", e, no, lane, side);
            },
            onRoadLaneYSolidAreaClick: function(e, no, lane) {
                //机动车黄色禁停区域点击事件
                this.$parent.$emit("cross-y-area-click", e, no, lane);
            },
            onRoadLaneParterreClick: function(e, no, lane) {
                //花坛绿色区域点击事件
                this.$parent.$emit("cross-parterre-click", e, no, lane);
            },
            onRoadLaneParterreLineClick: function(e, no, lane, side) {
                //花坛内部白线点击事件
                this.$parent.$emit("cross-parterre-line-click", e, no, lane, side);
            },
            onRoadLaneParterreSafeAreaClick: function(e, no, lane) {
                //安全岛点击事件
                this.$parent.$emit("cross-parterre-safearea-click", e, no, lane);
            },
            onRoadLaneMarkClick: function(e, no, lane, side) {
                //道路路标点击事件
                var me = this;
                var mark = {};
                if(no === 0) {
                    mark = me.RoadTop.Lane[lane].landmark
                }

                if(no === 1) {
                    mark = me.RoadRight.Lane[lane].landmark
                }

                if(no === 2) {
                    mark = me.RoadBottom.Lane[lane].landmark
                }

                if(no === 3) {
                    mark = me.RoadLeft.Lane[lane].landmark
                }

                this.$parent.$emit("cross-lane-mark-click", e, no, lane, mark[side].seq, mark[side].mark);
            }
        }
    })

    //Y 字路口
    var YRender = function() {
        var template = [
            "<g class='y-road' clip-path='url(#clip)'>",
                "<g>",
                    "<rect :x='1920 / 2 - RoadWidth / 2' :y='1080 / 2' :width='RoadWidth' height='499999.5' fill='#333' style='transform:rotate(-120deg); transform-origin: center center;' />",
                    "<rect :x='1920 / 2 - RoadWidth / 2' :y='1080 / 2' :width='RoadWidth' height='499999.5' fill='#333' style='transform:rotate(120deg); transform-origin: center center;' />",
                    "<rect :x='1920 / 2 - RoadWidth / 2' :y='1080 / 2' :width='RoadWidth' height='499999.5' fill='#333' />",
                    "<circle :cx='1920 / 2' :cy='1080 / 2' r='15' fill='#fff' />",
                    "<path :d='caleRoadTopNotch' fill='#333' stroke='#333' stroke-width='1' />",
                    "<path :d='calcRoadLeftNotch' fill='#333' stroke='#333' stroke-width='1' />",
                    "<path :d='calcRoadRightNotch' fill='#333' stroke='#333' stroke-width='1' />",
                    "<path :d='calcTopRoadBoundary.out' fill='none' stroke='#8e8e8e' stroke-width='5' transform='translate(0, -1.732050807568877)' />",
                    "<path :d='calcLeftRoadBoundary.out' fill='none' stroke='#8e8e8e' stroke-width='5' transform='translate(-1.732050807568877, 1.732050807568877)' />",
                    "<path :d='calcRightRoadBoundary.out' fill='none' stroke='#8e8e8e' stroke-width='5' transform='translate(1.732050807568877, 1.732050807568877)' />",
                "</g>",
                "<g>",
                    //行人斑马线
                    "<line v-show='RoadLeft.pedestrian' :x1='calcLeftPedestrian.p1.x' :x2='calcLeftPedestrian.p2.x' :y1='calcLeftPedestrian.p1.y' :y2='calcLeftPedestrian.p2.y' stroke='#fff' stroke-width='40' stroke-dasharray='5,5' style='pointer-events:visibleStroke;' @click.capture.stop='onRoadPedestrianClick($event, 0, false)' />",
                    "<line v-show='RoadRight.pedestrian' :x1='calcRightPedestrian.p1.x' :x2='calcRightPedestrian.p2.x' :y1='calcRightPedestrian.p1.y' :y2='calcRightPedestrian.p2.y' stroke='#fff' stroke-width='40' stroke-dasharray='5,5' style='pointer-events:visibleStroke;' @click.capture.stop='onRoadPedestrianClick($event, 1, false)' />",
                    "<line v-show='RoadBottom.pedestrian' :x1='calcBottomPedestrian.p1.x' :x2='calcBottomPedestrian.p2.x' :y1='calcBottomPedestrian.p1.y' :y2='calcBottomPedestrian.p2.y' stroke='#fff' stroke-width='40' stroke-dasharray='5,5' style='pointer-events:visibleStroke;' @click.capture.stop='onRoadPedestrianClick($event, 2, false)' />",
                "</g>",
                "<g>",
                    //机动车停止线
                    "<line v-if='RoadLeft.stopLine' :x1='calcRoadLeftStopLine.p1.x' :x2='calcRoadLeftStopLine.p2.x' :y1='calcRoadLeftStopLine.p1.y' :y2='calcRoadLeftStopLine.p2.y' stroke='#fff' stroke-width='5' @click.capture.stop='onRoadStopLineClick($event, 0)'/>",
                    "<line v-if='RoadRight.stopLine' :x1='calcRoadRightStopLine.p1.x' :x2='calcRoadRightStopLine.p2.x' :y1='calcRoadRightStopLine.p1.y' :y2='calcRoadRightStopLine.p2.y' stroke='#fff' stroke-width='5' @click.capture.stop='onRoadStopLineClick($event, 1)'/>",
                    "<line v-if='RoadBottom.stopLine' :x1='calcRoadBottomStopLine.p1.x' :x2='calcRoadBottomStopLine.p2.x' :y1='calcRoadBottomStopLine.p1.y' :y2='calcRoadBottomStopLine.p2.y' stroke='#fff' stroke-width='5' @click.capture.stop='onRoadStopLineClick($event, 2)' />",
                "</g>",
                "<lane ",
                    "v-for='(item, n) in RoadLeft.Lane' ",
                    ":type='item.type' ",
                    ":assist='item.assist' ",
                    ":reverse='item.reverse' ",
                    ":markright='item.markright' ",
                    ":has-boundary='item.hasBoundary' ",
                    ":has-safe-area='item.hasSafeArea' ",
                    ":landmark='item.landmark' ",
                    ":angle='-240' ",
                    ":width='calcRoadLeftLaneWidth' ",
                    ":x='roadLeftMoveTo(n).x' ",
                    ":y='roadLeftMoveTo(n).y' ",
                    "@on-pavement-click='onRoadLanePavementClick($event, 0, n)'",
                    "@on-solid-line-click='onRoadLaneSolidLineClick($event, 0, n)'",
                    "@on-dotted-line-click='onRoadLaneDottedLineClick($event, 0, n)'",
                    "@on-parterre-boundary-line-click='onRoadParterreBoundaryClick($event, 0, n)'",
                    "@on-y-dotted-line-click='onRoadLaneYDottedLineClick($event, 0, n)'",
                    "@on-y-solid-line-click='onRoadLaneYSolidLineClick($event, 0, n)'",
                    "@on-double-y-solid-click='onRoadLaneYDoubleSolidLineClick($event, 0, n, arguments[1])'",
                    "@on-double-y-dashed-click='onRoadLaneYDoubleDottedLineClick($event, 0, n, arguments[1])'",
                    "@on-y-solid-area-click='onRoadLaneYSolidAreaClick($event, 0, n)'",
                    "@on-parterre-click='onRoadLaneParterreClick($event, 0, n)'",
                    "@on-parterre-line-click='onRoadLaneParterreLineClick($event, 0, n, arguments[1])'",
                    "@on-parterre-safe-area-click='onRoadLaneParterreSafeAreaClick($event, 0, n)'",
                    "@on-lane-mark-click='onRoadLaneMarkClick($event, 0, n, arguments[1])'",
                    "></lane>",
                "<lane ",
                    "v-for='(item, n) in RoadRight.Lane' ",
                    ":type='item.type' ",
                    ":assist='item.assist' ",
                    ":reverse='item.reverse' ",
                    ":markright='item.markright' ",
                    ":has-boundary='item.hasBoundary' ",
                    ":has-safe-area='item.hasSafeArea' ",
                    ":landmark='item.landmark' ",
                    ":angle='-120' ",
                    ":width='calcRoadRightLaneWidth' ",
                    ":x='roadRightMoveTo(n).x' ",
                    ":y='roadRightMoveTo(n).y' ",
                    "@on-pavement-click='onRoadLanePavementClick($event, 1, n)'",
                    "@on-solid-line-click='onRoadLaneSolidLineClick($event, 1, n)'",
                    "@on-dotted-line-click='onRoadLaneDottedLineClick($event, 1, n)'",
                    "@on-parterre-boundary-line-click='onRoadParterreBoundaryClick($event, 1, n)'",
                    "@on-y-dotted-line-click='onRoadLaneYDottedLineClick($event, 1, n)'",
                    "@on-y-solid-line-click='onRoadLaneYSolidLineClick($event, 1, n)'",
                    "@on-double-y-solid-click='onRoadLaneYDoubleSolidLineClick($event, 1, n, arguments[1])'",
                    "@on-double-y-dashed-click='onRoadLaneYDoubleDottedLineClick($event, 1, n, arguments[1])'",
                    "@on-y-solid-area-click='onRoadLaneYSolidAreaClick($event, 1, n)'",
                    "@on-parterre-click='onRoadLaneParterreClick($event, 1, n)'",
                    "@on-parterre-line-click='onRoadLaneParterreLineClick($event, 1, n, arguments[1])'",
                    "@on-parterre-safe-area-click='onRoadLaneParterreSafeAreaClick($event, 1, n)'",
                    "@on-lane-mark-click='onRoadLaneMarkClick($event, 1, n, arguments[1])'",
                    "></lane>",
                "<lane ",
                    "v-for='(item, n) in RoadBottom.Lane' ",
                    ":type='item.type' ",
                    ":assist='item.assist' ",
                    ":reverse='item.reverse' ",
                    ":markright='item.markright' ",
                    ":has-boundary='item.hasBoundary' ",
                    ":has-safe-area='item.hasSafeArea' ",
                    ":landmark='item.landmark' ",
                    ":angle='0' ",
                    ":width='calcRoadBottomLaneWidth' ",
                    ":x='roadBottomMoveTo(n).x' ",
                    ":y='roadBottomMoveTo(n).y' ",
                    "@on-pavement-click='onRoadLanePavementClick($event, 2, n)'",
                    "@on-solid-line-click='onRoadLaneSolidLineClick($event, 2, n)'",
                    "@on-dotted-line-click='onRoadLaneDottedLineClick($event, 2, n)'",
                    "@on-parterre-boundary-line-click='onRoadParterreBoundaryClick($event, 2, n)'",
                    "@on-y-dotted-line-click='onRoadLaneYDottedLineClick($event, 2, n)'",
                    "@on-y-solid-line-click='onRoadLaneYSolidLineClick($event, 2, n)'",
                    "@on-double-y-solid-click='onRoadLaneYDoubleSolidLineClick($event, 2, n, arguments[1])'",
                    "@on-double-y-dashed-click='onRoadLaneYDoubleDottedLineClick($event, 2, n, arguments[1])'",
                    "@on-y-solid-area-click='onRoadLaneYSolidAreaClick($event, 2, n)'",
                    "@on-parterre-click='onRoadLaneParterreClick($event, 2, n)'",
                    "@on-parterre-line-click='onRoadLaneParterreLineClick($event, 2, n, arguments[1])'",
                    "@on-parterre-safe-area-click='onRoadLaneParterreSafeAreaClick($event, 2, n)'",
                    "@on-lane-mark-click='onRoadLaneMarkClick($event, 2, n, arguments[1])'",
                    "></lane>",
                "<g>",
                    //公路边界线
                    "<path v-show='RoadLeft.boundary.left.has' :d='calcTopRoadBoundary.left' fill='none' stroke='#fff' stroke-width='2' transform='translate(0,1.414213562373095)' @click.capture.stop='onRoadBoundaryClick($event, 0, false)' />",
                    "<path v-show='RoadLeft.boundary.right.has' :d='calcLeftRoadBoundary.right' fill='none' stroke='#fff' stroke-width='2' transform='translate(1.414213562373095,0)' @click.capture.stop='onRoadBoundaryClick($event, 0, true)' />",
                    "<path v-show='RoadRight.boundary.right.has' :d='calcTopRoadBoundary.right' fill='none' stroke='#fff' stroke-width='2' transform='translate(0,1.414213562373095)' @click.capture.stop='onRoadBoundaryClick($event, 1, true)' />",
                    "<path v-show='RoadRight.boundary.left.has' :d='calcRightRoadBoundary.left' fill='none' stroke='#fff' stroke-width='2' transform='translate(-1.414213562373095,0)' @click.capture.stop='onRoadBoundaryClick($event, 1, false)'/>",
                    "<path v-show='RoadBottom.boundary.left.has' :d='calcLeftRoadBoundary.left' fill='none' stroke='#fff' stroke-width='2' transform='translate(1.414213562373095,0)' @click.capture.stop='onRoadBoundaryClick($event, 2, false)'/>",
                    "<path v-show='RoadBottom.boundary.right.has' :d='calcRightRoadBoundary.right' fill='none' stroke='#fff' stroke-width='2' transform='translate(-1.414213562373095,0)' @click.capture.stop='onRoadBoundaryClick($event, 2, true)'/>",
                "</g>",
                "<g>",
                    //行人安全暂留区斑马线
                    "<line v-show='RoadLeft.pedestrian && RoadLeft.stayArea && RoadLeft.stayPedestrian' :x1='calcLeftPedestrian.p3.x' :x2='calcLeftPedestrian.p4.x' :y1='calcLeftPedestrian.p3.y' :y2='calcLeftPedestrian.p4.y' stroke='#fff' stroke-width='40' stroke='#fff' stroke-dasharray='5,5' style='pointer-events:visibleStroke;' @click.capture.stop='onRoadPedestrianClick($event, 0, true)'/>",
                    "<line v-show='RoadRight.pedestrian && RoadRight.stayArea && RoadRight.stayPedestrian' :x1='calcRightPedestrian.p3.x' :x2='calcRightPedestrian.p4.x' :y1='calcRightPedestrian.p3.y' :y2='calcRightPedestrian.p4.y' stroke='#fff' stroke-width='40' stroke='#fff' stroke-dasharray='5,5' style='pointer-events:visibleStroke;' @click.capture.stop='onRoadPedestrianClick($event, 1, true)'/>",
                    "<line v-show='RoadBottom.pedestrian && RoadBottom.stayArea && RoadBottom.stayPedestrian' :x1='calcBottomPedestrian.p3.x' :x2='calcBottomPedestrian.p4.x' :y1='calcBottomPedestrian.p3.y' :y2='calcBottomPedestrian.p4.y' stroke='#fff' stroke-width='40' stroke='#fff' stroke-dasharray='5,5' style='pointer-events:visibleStroke;' @click.capture.stop='onRoadPedestrianClick($event, 2, true)'/>",
                "</g>",
                "<g>",
                    "<path v-show='RoadLeft.stayArea && RoadLeft.pedestrian' :d='calcRoadLeftStay' fill='#0075c5' stroke='#fff' stroke-width='2' style='pointer-events:visiblePainted;' @click='onCrossStayAreaClick($event, 0)' />",
                    "<path v-show='RoadRight.stayArea && RoadRight.pedestrian' :d='calcRoadRightStay' fill='#0075c5' stroke='#fff' stroke-width='2' style='pointer-events:visiblePainted;' @click='onCrossStayAreaClick($event, 1)' />",
                    "<path v-show='RoadBottom.stayArea && RoadBottom.pedestrian' :d='calcRoadBottomStay' fill='#0075c5' stroke='#fff' stroke-width='2' style='pointer-events:visiblePainted;' @click='onCrossStayAreaClick($event, 2)' />",
                "</g>",
            "</g>"
        ];
        return template.join("");
    }

    var YRoads = Vue.extend({
        template: YRender.apply(this),
        props: {
            RoadLeft : {
                //路口名称，前端支持此属性，但无UI表现,仅限数据交互使用。
                name : { default: '', type: String },
                //边界白线控制
                boundary: { 
                    left : { 
                        //deafult: 0 左侧边界白线的长度，前端支持此属性，但无UI表现,仅限数据交互使用。
                        length: { defualt: 0, type: Number },
                        //deafult: true 是否具有左侧边界白线,
                        has: { default: true, type: Boolean } 
                    },
                    right: {
                        //deafult: 0 右侧边界白线的长度，前端支持此属性，但无UI表现,仅限数据交互使用。
                        length: { defualt: 0, type: Number },
                        //deafult: true 是否具有右侧边界白线
                        has: { default: true, type: Boolean } 
                    }
                },
                //deafult: true 是否具有人行班马线
                pedestrian: { default: true, type: Boolean },
                //default: true 是否具有人行暂留区
                stayArea: { default: true, type: Boolean },
                //default: true, 是否具有暂留区斑马线
                stayPedestrian: { default: true, type: Boolean },
                //default: true 是否具有机动车停止线
                stopLine: { default: true, type: Boolean },
                //车道,自右向左绘制(顺时针)
                Lane : { default: [], type: Array },
                type: Object
            },
            RoadRight : {
                //路口名称，前端支持此属性，但无UI表现,仅限数据交互使用。
                name : { default: '', type: String },
                //边界白线控制
                boundary: { 
                    left : { 
                        //deafult: 0 左侧边界白线的长度，前端支持此属性，但无UI表现,仅限数据交互使用。
                        length: { defualt: 0, type: Number },
                        //deafult: true 是否具有左侧边界白线,
                        has: { default: true, type: Boolean } 
                    },
                    right: {
                        //deafult: 0 右侧边界白线的长度，前端支持此属性，但无UI表现,仅限数据交互使用。
                        length: { defualt: 0, type: Number },
                        //deafult: true 是否具有右侧边界白线
                        has: { default: true, type: Boolean } 
                    }
                },
                //deafult: true 是否具有人行班马线
                pedestrian: { default: true, type: Boolean },
                //default: true 是否具有人行暂留区
                stayArea: { default: true, type: Boolean },
                //default: true, 是否具有暂留区斑马线
                stayPedestrian: { default: true, type: Boolean },
                //default: true 是否具有机动车停止线
                stopLine: { default: true, type: Boolean },
                //车道,自右向左绘制(顺时针)
                Lane : { default: [], type: Array },
                type: Object
            },
            RoadBottom : {
                //路口名称，前端支持此属性，但无UI表现,仅限数据交互使用。
                name : { default: '', type: String },
                //边界白线控制
                boundary: { 
                    left : { 
                        //deafult: 0 左侧边界白线的长度，前端支持此属性，但无UI表现,仅限数据交互使用。
                        length: { defualt: 0, type: Number },
                        //deafult: true 是否具有左侧边界白线,
                        has: { default: true, type: Boolean } 
                    },
                    right: {
                        //deafult: 0 右侧边界白线的长度，前端支持此属性，但无UI表现,仅限数据交互使用。
                        length: { defualt: 0, type: Number },
                        //deafult: true 是否具有右侧边界白线
                        has: { default: true, type: Boolean } 
                    }
                },
                //deafult: true 是否具有人行班马线
                pedestrian: { default: true, type: Boolean },
                //default: true 是否具有人行暂留区
                stayArea: { default: true, type: Boolean },
                //default: true, 是否具有暂留区斑马线
                stayPedestrian: { default: true, type: Boolean },
                //default: true 是否具有机动车停止线
                stopLine: { default: true, type: Boolean },
                //车道,自右向左绘制(顺时针)
                Lane : { default: [], type: Array },
                type: Object
            },
            RoadWidth : {
                default: 500,
                type: Number
            }
        },
        data: function() {
            return {
                uuid : utils.uuid()
            }
        },
        components: {
            "Lane" : Lane
        },
        computed: {
            //Y字路口上交点
            getTopIntersection: function() {
                var me = this;
                var x = 1920 / 2;
                var y = 1080 / 2;
                var rp = utils.calcRadiusAnyPoint(x, y, me.RoadWidth / 2, -120);
                var rl = utils.calcRadiusAnyPoint(rp.x, rp.y, 499999.5, -30);
                var lp = utils.calcRadiusAnyPoint(x, y, me.RoadWidth / 2, -60);
                var ll = utils.calcRadiusAnyPoint(lp.x, lp.y, 499999.5, -150);
                var intersect = utils.calcLineIntersection(rp, rl, lp, ll);
                return intersect;
            },
            //Y字路口左交点
            getLeftIntersection: function() {
                var me = this;
                var x = 1920 / 2;
                var y = 1080 / 2;
                var lp = utils.calcRadiusAnyPoint(x, y, me.RoadWidth / 2, -240);
                var ll = utils.calcRadiusAnyPoint(lp.x, lp.y, 499999.5, -150);
                var bp = utils.calcRadiusAnyPoint(x, y, me.RoadWidth / 2, 180);
                var bl = utils.calcRadiusAnyPoint(bp.x, bp.y, 499999.5, 90);
                var intersect = utils.calcLineIntersection(lp, ll, bp, bl);
                return intersect;
            },
            //Y字路口右交点
            getRightIntersection: function() {
                var me = this;
                var x = 1920 / 2;
                var y = 1080 / 2;
                var rp = utils.calcRadiusAnyPoint(x, y, me.RoadWidth / 2, 60);
                var rl = utils.calcRadiusAnyPoint(rp.x, rp.y, 499999.5, -30);
                var bp = utils.calcRadiusAnyPoint(x, y, me.RoadWidth / 2, 0);
                var bl = utils.calcRadiusAnyPoint(bp.x, bp.y, 499999.5, 90);
                var intersect = utils.calcLineIntersection(rp, rl, bp, bl);
                return intersect;
            },
            //Y字路口 上方缺口修复
            caleRoadTopNotch: function() {
                var me = this;
                var v = me.getTopIntersection;
                var l = utils.calcRadiusAnyPoint(v.x, v.y, 200, -151);
                var r = utils.calcRadiusAnyPoint(v.x, v.y, 200, -29);
                return "M${lx},${ly} L${vx},${vy} ${rx},${ry} C${vx},${vy} ${vx},${vy} ${lx},${ly} z"
                    .replace(/(\$\{lx\})/g, l.x).replace(/(\$\{ly\})/g, l.y).replace(/(\$\{vx\})/g, v.x).replace(/(\$\{vy\})/g, v.y)
                    .replace(/(\$\{rx\})/g, r.x).replace(/(\$\{ry\})/g, r.y);
            },
            //Y字路口 上方缺口修复
            calcRoadLeftNotch: function() {
                var me = this;
                var v = me.getLeftIntersection;
                var l = utils.calcRadiusAnyPoint(v.x, v.y, 200, 89);
                var r = utils.calcRadiusAnyPoint(v.x, v.y, 200, 211);
                return "M${lx},${ly} L${vx},${vy} ${rx},${ry} C${vx},${vy} ${vx},${vy} ${lx},${ly} z"
                    .replace(/(\$\{lx\})/g, l.x).replace(/(\$\{ly\})/g, l.y).replace(/(\$\{vx\})/g, v.x).replace(/(\$\{vy\})/g, v.y)
                    .replace(/(\$\{rx\})/g, r.x).replace(/(\$\{ry\})/g, r.y);
            },
            calcRoadRightNotch: function() {
                var me = this;
                var v = me.getRightIntersection;
                var l = utils.calcRadiusAnyPoint(v.x, v.y, 200, -31);
                var r = utils.calcRadiusAnyPoint(v.x, v.y, 200, 91);
                return "M${lx},${ly} L${vx},${vy} ${rx},${ry} C${vx},${vy} ${vx},${vy} ${lx},${ly} z"
                    .replace(/(\$\{lx\})/g, l.x).replace(/(\$\{ly\})/g, l.y).replace(/(\$\{vx\})/g, v.x).replace(/(\$\{vy\})/g, v.y)
                    .replace(/(\$\{rx\})/g, r.x).replace(/(\$\{ry\})/g, r.y);
            },
            //Y字路口 上侧路的边界线
            calcTopRoadBoundary: function() {
                var me = this;
                var v = me.getTopIntersection;
                var p1 = utils.calcRadiusAnyPoint(v.x, v.y, 499999.5, -150);
                var p2 = utils.calcRadiusAnyPoint(v.x, v.y, 200, -150);
                var p3 = utils.calcRadiusAnyPoint(v.x, v.y, 200, -30);
                var p4 = utils.calcRadiusAnyPoint(v.x, v.y, 499999.5, -30);
                var out = "M${p1x},${p1y} L${p2x},${p2y} C${vx},${vy} ${vx},${vy} ${p3x},${p3y} L${p4x},${p4y}"
                    .replace(/(\$\{p1x\})/g, p1.x).replace(/(\$\{p1y\})/g, p1.y).replace(/(\$\{p2x\})/g, p2.x).replace(/(\$\{p2y\})/g, p2.y)
                    .replace(/(\$\{vx\})/g, v.x).replace(/(\$\{vy\})/g, v.y).replace(/(\$\{p3x\})/g, p3.x).replace(/(\$\{p3y\})/g, p3.y)
                    .replace(/(\$\{p4x\})/g, p4.x).replace(/(\$\{p4y\})/g, p4.y);
                var left = "M${p1x},${p1y} L${p2x},${p2y} C${vx},${vy} ${vx},${vy} ${p3x},${p3y}"
                    .replace(/(\$\{p1x\})/g, p1.x).replace(/(\$\{p1y\})/g, p1.y).replace(/(\$\{p2x\})/g, p2.x).replace(/(\$\{p2y\})/g, p2.y)
                    .replace(/(\$\{p3x\})/g, p3.x).replace(/(\$\{p3y\})/g, p3.y).replace(/(\$\{vx\})/g, v.x).replace(/(\$\{vy\})/g, v.y);
                var right = "M${p4x},${p4y} L${p3x},${p3y} C${vx},${vy} ${vx},${vy} ${p2x},${p2y}"
                    .replace(/(\$\{p4x\})/g, p4.x).replace(/(\$\{p4y\})/g, p4.y).replace(/(\$\{p2x\})/g, p2.x).replace(/(\$\{p2y\})/g, p2.y)
                    .replace(/(\$\{p3x\})/g, p3.x).replace(/(\$\{p3y\})/g, p3.y).replace(/(\$\{vx\})/g, v.x).replace(/(\$\{vy\})/g, v.y);
                return { out: out, left: left, right: right };
            },
            //Y字路口 左侧路的边界线
            calcLeftRoadBoundary: function() {
                var me = this;
                var v = me.getLeftIntersection;
                var p1 = utils.calcRadiusAnyPoint(v.x, v.y, 499999.5, -150);
                var p2 = utils.calcRadiusAnyPoint(v.x, v.y, 200, -150);
                var p3 = utils.calcRadiusAnyPoint(v.x, v.y, 200, 90);
                var p4 = utils.calcRadiusAnyPoint(v.x, v.y, 499999.5, 90);
                var out = "M${p1x},${p1y} L${p2x},${p2y} C${vx},${vy} ${vx},${vy} ${p3x},${p3y} L${p4x},${p4y}"
                    .replace(/(\$\{p1x\})/g, p1.x).replace(/(\$\{p1y\})/g, p1.y).replace(/(\$\{p2x\})/g, p2.x).replace(/(\$\{p2y\})/g, p2.y)
                    .replace(/(\$\{vx\})/g, v.x).replace(/(\$\{vy\})/g, v.y).replace(/(\$\{p3x\})/g, p3.x).replace(/(\$\{p3y\})/g, p3.y)
                    .replace(/(\$\{p4x\})/g, p4.x).replace(/(\$\{p4y\})/g, p4.y);
                var left = "M${p4x},${p4y} L${p3x},${p3y} C${vx},${vy} ${vx},${vy} ${p2x},${p2y}"
                    .replace(/(\$\{p4x\})/g, p4.x).replace(/(\$\{p4y\})/g, p4.y).replace(/(\$\{p2x\})/g, p2.x).replace(/(\$\{p2y\})/g, p2.y)
                    .replace(/(\$\{p3x\})/g, p3.x).replace(/(\$\{p3y\})/g, p3.y).replace(/(\$\{vx\})/g, v.x).replace(/(\$\{vy\})/g, v.y);
                var right = "M${p1x},${p1y} L${p2x},${p2y} C${vx},${vy} ${vx},${vy} ${p3x},${p3y}"
                    .replace(/(\$\{p1x\})/g, p1.x).replace(/(\$\{p1y\})/g, p1.y).replace(/(\$\{p2x\})/g, p2.x).replace(/(\$\{p2y\})/g, p2.y)
                    .replace(/(\$\{p3x\})/g, p3.x).replace(/(\$\{p3y\})/g, p3.y).replace(/(\$\{vx\})/g, v.x).replace(/(\$\{vy\})/g, v.y);
                return { out: out, left: left, right: right };
            },
            //Y字路口 右侧路的边界线
            calcRightRoadBoundary: function() {
                var me = this;
                var v = me.getRightIntersection;
                var p1 = utils.calcRadiusAnyPoint(v.x, v.y, 499999.5, -30);
                var p2 = utils.calcRadiusAnyPoint(v.x, v.y, 200, -30);
                var p3 = utils.calcRadiusAnyPoint(v.x, v.y, 200, 90);
                var p4 = utils.calcRadiusAnyPoint(v.x, v.y, 499999.5, 90);
                var out = "M${p1x},${p1y} L${p2x},${p2y} C${vx},${vy} ${vx},${vy} ${p3x},${p3y} L${p4x},${p4y}"
                    .replace(/(\$\{p1x\})/g, p1.x).replace(/(\$\{p1y\})/g, p1.y).replace(/(\$\{p2x\})/g, p2.x).replace(/(\$\{p2y\})/g, p2.y)
                    .replace(/(\$\{vx\})/g, v.x).replace(/(\$\{vy\})/g, v.y).replace(/(\$\{p3x\})/g, p3.x).replace(/(\$\{p3y\})/g, p3.y)
                    .replace(/(\$\{p4x\})/g, p4.x).replace(/(\$\{p4y\})/g, p4.y);
                var left = "M${p1x},${p1y} L${p2x},${p2y} C${vx},${vy} ${vx},${vy} ${p3x},${p3y}"
                    .replace(/(\$\{p1x\})/g, p1.x).replace(/(\$\{p1y\})/g, p1.y).replace(/(\$\{p2x\})/g, p2.x).replace(/(\$\{p2y\})/g, p2.y)
                    .replace(/(\$\{p3x\})/g, p3.x).replace(/(\$\{p3y\})/g, p3.y).replace(/(\$\{vx\})/g, v.x).replace(/(\$\{vy\})/g, v.y);
                var right = "M${p4x},${p4y} L${p3x},${p3y} C${vx},${vy} ${vx},${vy} ${p2x},${p2y}"
                    .replace(/(\$\{p4x\})/g, p4.x).replace(/(\$\{p4y\})/g, p4.y).replace(/(\$\{p2x\})/g, p2.x).replace(/(\$\{p2y\})/g, p2.y)
                    .replace(/(\$\{p3x\})/g, p3.x).replace(/(\$\{p3y\})/g, p3.y).replace(/(\$\{vx\})/g, v.x).replace(/(\$\{vy\})/g, v.y);
                return { out: out, left: left, right: right };
            },
            //计算Y字路口道路宽度
            calcRoadLeftLaneWidth: function() {
                var me = this;
                if(me.RoadLeft.Lane && me.RoadLeft.Lane.length) {
                    return me.RoadWidth / me.RoadLeft.Lane.length;
                }
                return me.RoadWidth;
            },
            //计算Y字路口道路宽度
            calcRoadRightLaneWidth: function() {
                var me = this;
                if(me.RoadRight.Lane && me.RoadRight.Lane.length) {
                    return me.RoadWidth / me.RoadRight.Lane.length;
                }
                return me.RoadWidth;
            },
            //计算Y字路口道路宽度
            calcRoadBottomLaneWidth: function() {
                var me = this;
                if(me.RoadBottom.Lane && me.RoadBottom.Lane.length) {
                    return me.RoadWidth / me.RoadBottom.Lane.length;
                }
                return me.RoadWidth;
            },
            //计算Y字路口左侧机动车停止线
            calcRoadLeftStopLine: function() {
                var me = this;
                var v = me.getLeftIntersection;
                var lane = me.RoadLeft.Lane.length | 0;
                var diff = !me.RoadLeft.stayArea ? 0 : lane <= 2 ? 0 : me.RoadWidth / lane;
                var width = !lane ? 0 : ((me.RoadLeft.Lane.filter(function(it) { return !it.reverse }).length || 0) * (me.RoadWidth / lane));
                var d = utils.calcRadiusAnyPoint(v.x, v.y, 80, -150);
                var p1 = utils.calcRadiusAnyPoint(d.x, d.y, diff, -60);
                var p2 = utils.calcRadiusAnyPoint(d.x, d.y, width | diff, -60);
                return { p1 : p1, p2: p2 };
            },
            //计算Y字路口右侧机动车停止线
            calcRoadRightStopLine: function() {
                var me = this;
                var v = me.getTopIntersection;
                var lane = me.RoadRight.Lane.length | 0;
                var diff = !me.RoadRight.stayArea ? 0 : lane <= 2 ? 0 : me.RoadWidth / lane;
                var width = !lane ? 0 : ((me.RoadRight.Lane.filter(function(it) { return !it.reverse }).length || 0) * (me.RoadWidth / lane));
                var d = utils.calcRadiusAnyPoint(v.x, v.y, 80, -30);
                var p1 = utils.calcRadiusAnyPoint(d.x, d.y, diff, 60);
                var p2 = utils.calcRadiusAnyPoint(d.x, d.y, width | diff, 60);
                return { p1 : p1, p2: p2 };
            },
            //计算Y字路口下侧机动车停止线
            calcRoadBottomStopLine: function() {
                var me = this;
                var v = me.getRightIntersection;
                var lane = me.RoadBottom.Lane.length | 0;
                var diff = !me.RoadBottom.stayArea ? 0 : lane <= 2 ? 0 : me.RoadWidth / lane;
                var width = !lane ? 0 : ((me.RoadBottom.Lane.filter(function(it) { return !it.reverse }).length || 0) * (me.RoadWidth / lane));
                var d = utils.calcRadiusAnyPoint(v.x, v.y, 80, 90);
                var p1 = utils.calcRadiusAnyPoint(d.x, d.y, diff, 180);
                var p2 = utils.calcRadiusAnyPoint(d.x, d.y, width | diff, 180);
                return { p1 : p1, p2: p2 };
            },
            //计算Y字路口左侧行人安全暂留区
            calcRoadLeftStay: function() {
                var me = this;
                var v = me.getLeftIntersection;
                var leftLane = me.RoadLeft.Lane.length | 0;
                var bottomLane = me.RoadBottom.Lane.length | 0;
                var bw = bottomLane - 2 <= 0 ? 50 : me.RoadWidth / bottomLane;
                var lw = leftLane - 2 <= 0 ? 50 : me.RoadWidth  / leftLane;
                //求交点和顶点距离
                var r = utils.calcRadiusAnyPoint(v.x, v.y, 80, 90);
                var a = utils.calcRadiusAnyPoint(r.x, r.y, bw, 0);
                var b = utils.calcRadiusAnyPoint(a.x, a.y, 999999, -90);
                r = utils.calcRadiusAnyPoint(v.x, v.y, 80, -150);
                var c = utils.calcRadiusAnyPoint(r.x, r.y, lw, -60);
                var d = utils.calcRadiusAnyPoint(c.x, c.y, 999999, 30)
                var cross = utils.calcLineIntersection(a, b, c, d);
                //求人行安全区绘制坐标
                var r1 = utils.calcRadiusAnyPoint(v.x, v.y, 80, 90);
                var r2 = utils.calcRadiusAnyPoint(v.x, v.y, 80, -150);
                var c1 = utils.calcRadiusAnyPoint(r1.x, r1.y, bw, 0);
                var c2 = utils.calcRadiusAnyPoint(r2.x, r2.y, lw, -60);
                var dist = utils.calcPointDist(c1, cross) / 2;
                var d1 = utils.calcRadiusAnyPoint(cross.x, cross.y, dist, 90);
                dist = utils.calcPointDist(c2, cross) / 2;
                var d2 = utils.calcRadiusAnyPoint(cross.x, cross.y, dist, -150);
                var s1 = utils.calcRadiusAnyPoint(cross.x, cross.y, 10, 90);
                var s2 = utils.calcRadiusAnyPoint(cross.x, cross.y, 10, -150);
                
                return "M${c1x},${c1y} L${s1x},${s1y} C${cx},${cy} ${cx},${cy} ${s2x},${s2y} L${c2x},${c2y} C${d2x},${d2y} ${d1x},${d1y} ${c1x},${c1y} z"
                    .replace(/(\$\{c1x\})/g, c1.x).replace(/(\$\{c1y\})/g, c1.y).replace(/(\$\{cx\})/g, cross.x).replace(/(\$\{cy\})/g, cross.y)
                    .replace(/(\$\{s1x\})/g, s1.x).replace(/(\$\{s1y\})/g, s1.y).replace(/(\$\{s2x\})/g, s2.x).replace(/(\$\{s2y\})/g, s2.y)
                    .replace(/(\$\{c2x\})/g, c2.x).replace(/(\$\{c2y\})/g, c2.y).replace(/(\$\{d1x\})/g, d1.x).replace(/(\$\{d1y\})/g, d1.y)
                    .replace(/(\$\{d2x\})/g, d2.x).replace(/(\$\{d2y\})/g, d2.y);
            },
            //计算Y字路口右侧行人安全暂留区
            calcRoadRightStay: function() {
                var me = this;
                var v = me.getTopIntersection;
                var rightLane = me.RoadRight.Lane.length | 0;
                var leftLane = me.RoadLeft.Lane.length | 0;
                var bw = leftLane - 2 <= 0 ? 50 : me.RoadWidth / leftLane;
                var rw = rightLane - 2 <= 0 ? 50 : me.RoadWidth  / rightLane;
                //求交点和顶点距离
                var r = utils.calcRadiusAnyPoint(v.x, v.y, 80, -150);
                var a = utils.calcRadiusAnyPoint(r.x, r.y, bw, 120);
                var b = utils.calcRadiusAnyPoint(a.x, a.y, 999999, 30);
                r = utils.calcRadiusAnyPoint(v.x, v.y, 80, -30);
                var c = utils.calcRadiusAnyPoint(r.x, r.y, rw, 60);
                var d = utils.calcRadiusAnyPoint(c.x, c.y, 999999, 150);
                var cross = utils.calcLineIntersection(a, b, c, d);
                //求人行安全区绘制坐标
                var r1 = utils.calcRadiusAnyPoint(v.x, v.y, 80, -150);
                var r2 = utils.calcRadiusAnyPoint(v.x, v.y, 80, -30);
                var c1 = utils.calcRadiusAnyPoint(r1.x, r1.y, bw, 120);
                var c2 = utils.calcRadiusAnyPoint(r2.x, r2.y, rw, 60);
                var dist = utils.calcPointDist(c1, cross) / 2;
                var d1 = utils.calcRadiusAnyPoint(cross.x, cross.y, dist, -150);
                dist = utils.calcPointDist(c2, cross) / 2;
                var d2 = utils.calcRadiusAnyPoint(cross.x, cross.y, dist, -30);
                var s1 = utils.calcRadiusAnyPoint(cross.x, cross.y, 10, -150);
                var s2 = utils.calcRadiusAnyPoint(cross.x, cross.y, 10, -30);
                
                return "M${c1x},${c1y} L${s1x},${s1y} C${cx},${cy} ${cx},${cy} ${s2x},${s2y} L${c2x},${c2y} C${d2x},${d2y} ${d1x},${d1y} ${c1x},${c1y} z"
                    .replace(/(\$\{c1x\})/g, c1.x).replace(/(\$\{c1y\})/g, c1.y).replace(/(\$\{cx\})/g, cross.x).replace(/(\$\{cy\})/g, cross.y)
                    .replace(/(\$\{s1x\})/g, s1.x).replace(/(\$\{s1y\})/g, s1.y).replace(/(\$\{s2x\})/g, s2.x).replace(/(\$\{s2y\})/g, s2.y)
                    .replace(/(\$\{c2x\})/g, c2.x).replace(/(\$\{c2y\})/g, c2.y).replace(/(\$\{d1x\})/g, d1.x).replace(/(\$\{d1y\})/g, d1.y)
                    .replace(/(\$\{d2x\})/g, d2.x).replace(/(\$\{d2y\})/g, d2.y);
            },
            //计算Y字路口左侧行人安全暂留区
            calcRoadBottomStay: function() {
                var me = this;
                var v = me.getRightIntersection;
                var rightLane = me.RoadRight.Lane.length | 0;
                var bottomLane = me.RoadBottom.Lane.length | 0;
                var bw = rightLane - 2 <= 0 ? 50 : me.RoadWidth / rightLane;
                var lw = bottomLane - 2 <= 0 ? 50 : me.RoadWidth  / bottomLane;
                //求交点和顶点距离
                var r = utils.calcRadiusAnyPoint(v.x, v.y, 80, 90);
                var a = utils.calcRadiusAnyPoint(r.x, r.y, lw, 180);
                var b = utils.calcRadiusAnyPoint(a.x, a.y, 999999, -90);
                r = utils.calcRadiusAnyPoint(v.x, v.y, 80, -30);
                var c = utils.calcRadiusAnyPoint(r.x, r.y, bw, -120);
                var d = utils.calcRadiusAnyPoint(c.x, c.y, 999999, 150);
                var cross = utils.calcLineIntersection(a, b, c, d);
                //求人行安全区绘制坐标
                var r1 = utils.calcRadiusAnyPoint(v.x, v.y, 80, -30);
                var r2 = utils.calcRadiusAnyPoint(v.x, v.y, 80, 90);
                var c1 = utils.calcRadiusAnyPoint(r1.x, r1.y, bw, -120);
                var c2 = utils.calcRadiusAnyPoint(r2.x, r2.y, lw, 180);
                var dist = utils.calcPointDist(c1, cross) / 2;
                var d1 = utils.calcRadiusAnyPoint(cross.x, cross.y, dist, -30);
                dist = utils.calcPointDist(c2, cross) / 2;
                var d2 = utils.calcRadiusAnyPoint(cross.x, cross.y, dist, 90);
                var s1 = utils.calcRadiusAnyPoint(cross.x, cross.y, 10, -30);
                var s2 = utils.calcRadiusAnyPoint(cross.x, cross.y, 10, 90);
                
                return "M${c1x},${c1y} L${s1x},${s1y} C${cx},${cy} ${cx},${cy} ${s2x},${s2y} L${c2x},${c2y} C${d2x},${d2y} ${d1x},${d1y} ${c1x},${c1y} z"
                    .replace(/(\$\{c1x\})/g, c1.x).replace(/(\$\{c1y\})/g, c1.y).replace(/(\$\{cx\})/g, cross.x).replace(/(\$\{cy\})/g, cross.y)
                    .replace(/(\$\{s1x\})/g, s1.x).replace(/(\$\{s1y\})/g, s1.y).replace(/(\$\{s2x\})/g, s2.x).replace(/(\$\{s2y\})/g, s2.y)
                    .replace(/(\$\{c2x\})/g, c2.x).replace(/(\$\{c2y\})/g, c2.y).replace(/(\$\{d1x\})/g, d1.x).replace(/(\$\{d1y\})/g, d1.y)
                    .replace(/(\$\{d2x\})/g, d2.x).replace(/(\$\{d2y\})/g, d2.y);
            },
            //计算Y字路口左侧行人斑马线长度
            calcLeftPedestrian: function() {
                var me = this;
                var v1 = me.getLeftIntersection;
                var v2 = me.getTopIntersection;
                var lw = me.RoadLeft.Lane && me.RoadLeft.Lane.length <= 2 ? 50 :  me.calcRoadLeftLaneWidth;
                var bw = me.RoadBottom.Lane && me.RoadBottom.Lane.length <= 2 ? 50 : me.calcRoadBottomLaneWidth;
                var r1 = utils.calcRadiusAnyPoint(v1.x, v1.y, 40, -150);
                var r2 = utils.calcRadiusAnyPoint(v2.x, v2.y, 40, -150);
                var p1 = utils.calcRadiusAnyPoint(r1.x, r1.y, lw, -60);
                var p2 = utils.calcRadiusAnyPoint(r2.x, r2.y, lw, 120);
                var ah = utils.calcTriangleHeight(30, 90);
                var p3 = utils.calcRadiusAnyPoint(v1.x, v1.y, ah, 135);
                var p4 = utils.calcRadiusAnyPoint(p3.x, p3.y, Math.min(lw, bw), -30);
                return { p1 : p1, p2 : p2, p3, p4 };
            },
            //计算Y字路口右侧行人斑马线长度
            calcRightPedestrian: function() {
                var me = this;
                var v1 = me.getTopIntersection;
                var v2 = me.getRightIntersection;
                var rw = me.RoadRight.Lane && me.RoadRight.Lane.length <= 2 ? 50 :  me.calcRoadRightLaneWidth;
                var lw = me.RoadLeft.Lane && me.RoadLeft.Lane.length <= 2 ? 50 : me.calcRoadLeftLaneWidth;
                var r1 = utils.calcRadiusAnyPoint(v1.x, v1.y, 40, -30);
                var r2 = utils.calcRadiusAnyPoint(v2.x, v2.y, 40, -30);
                var p1 = utils.calcRadiusAnyPoint(r1.x, r1.y, rw, 60);
                var p2 = utils.calcRadiusAnyPoint(r2.x, r2.y, rw, -120);
                var ah = utils.calcTriangleHeight(30, 90);
                var p3 = utils.calcRadiusAnyPoint(v1.x, v1.y, ah, -90);
                var p4 = utils.calcRadiusAnyPoint(p3.x, p3.y, Math.min(rw, lw), 90);
                return { p1 : p1, p2 : p2, p3, p4 };
            },
            //计算Y字路口下侧行人斑马线长度
            calcBottomPedestrian: function() {
                var me = this;
                var v1 = me.getRightIntersection;
                var v2 = me.getLeftIntersection;
                var bw = me.RoadBottom.Lane && me.RoadBottom.Lane.length <= 2 ? 50 :  me.calcRoadBottomLaneWidth;
                var rw = me.RoadRight.Lane &&me.RoadRight.Lane.length <= 2 ? 50 : me.calcRoadRightLaneWidth;
                var r1 = utils.calcRadiusAnyPoint(v1.x, v1.y, 40, 90);
                var r2 = utils.calcRadiusAnyPoint(v2.x, v2.y, 40, 90);
                var p1 = utils.calcRadiusAnyPoint(r1.x, r1.y, bw, 180);
                var p2 = utils.calcRadiusAnyPoint(r2.x, r2.y, bw, 0);
                var ah = utils.calcTriangleHeight(30, 90);
                var p3 = utils.calcRadiusAnyPoint(v1.x, v1.y, ah, 30);
                var p4 = utils.calcRadiusAnyPoint(p3.x, p3.y, Math.min(bw, rw), -150);
                return { p1 : p1, p2 : p2, p3, p4 };
            }
        },
        methods: {
            roadLeftMoveTo: function(n) {
                var me = this;
                var v = me.getLeftIntersection;
                var d = utils.calcRadiusAnyPoint(v.x, v.y, 80, -150);
                var width = me.calcRoadLeftLaneWidth;
                return utils.calcRadiusAnyPoint(d.x, d.y, ((n + 1) * width), -60);
            },
            roadRightMoveTo: function(n) {
                var me = this;
                var v = me.getTopIntersection;
                var d = utils.calcRadiusAnyPoint(v.x, v.y, 80, -30);
                var width = me.calcRoadRightLaneWidth;
                return utils.calcRadiusAnyPoint(d.x, d.y, (n + 1) * width, 60);
            },
            roadBottomMoveTo: function(n) {
                var me = this;
                var v = me.getRightIntersection;
                var d = utils.calcRadiusAnyPoint(v.x, v.y, 80, 90);
                var width = me.calcRoadBottomLaneWidth;
                return utils.calcRadiusAnyPoint(d.x, d.y, (n + 1) * width, 180);
            },
            onRoadPedestrianClick: function(e, no, isStay) {
                //十字路口行人斑马线的点击事件
                this.$parent.$emit('cross-road-pedestrian-click', e, no, isStay);
            },
            onRoadStopLineClick: function(e, no) {
                //机动车停止线点击事件
                this.$parent.$emit("cross-road-stopline-click", e, no);
            },
            onRoadBoundaryClick: function(e, no, isRight) {
                //十字路口公路边界线的点击事件
                this.$parent.$emit('cross-road-boundary-click', e, no, isRight ? 'right' : 'left');
            },
            onRoadLanePavementClick: function(e, no, lane) {
                //机动车道路点击事件
                this.$parent.$emit("cross-road-pavement-click", e, no, lane);
            },
            onRoadLaneSolidLineClick: function(e, no, lane) {
                //机动车道路白色实线点击事件
                this.$parent.$emit("cross-solid-line-click", e, no, lane);
            },
            onRoadLaneDottedLineClick: function(e, no, lane) {
                //机动车道路白色虚线点击事件
                this.$parent.$emit("cross-dotted-line-click", e, no, lane);
            },
            onRoadParterreBoundaryClick: function(e, no, lane) {
                //花坛边界线点击事件
                this.$parent.$emit("cross-parterre-boundary-line-click", e, no, lane);
            },
            onRoadLaneYDottedLineClick: function() {
                //机动车黄色虚线点击事件
                this.$parent.$emit("cross-y-dotted-line-click", e, no, lane);
            },
            onRoadLaneYSolidLineClick: function(e, no, lane) {
                //机动车黄色实线点击事件
                this.$parent.$emit("cross-y-solid-line-click", e, no, lane);
            },
            onRoadLaneYDoubleSolidLineClick: function(e, no, lane, side) {
                //机动车双黄色实线点击事件
                this.$parent.$emit("cross-y-double-solid-line-click", e, no, lane, side);
            },
            onRoadLaneYDoubleDottedLineClick: function(e, no, lane, side) {
                //机动车黄色虚线点击事件
                this.$parent.$emit("cross-y-double-dashed-line-click", e, no, lane, side);
            },
            onRoadLaneYSolidAreaClick: function(e, no, lane) {
                //机动车黄色禁停区域点击事件
                this.$parent.$emit("cross-y-area-click", e, no, lane);
            },
            onRoadLaneParterreClick: function(e, no, lane) {
                //花坛绿色区域点击事件
                this.$parent.$emit("cross-parterre-click", e, no, lane);
            },
            onRoadLaneParterreLineClick: function(e, no, lane, side) {
                //花坛内部白线点击事件
                this.$parent.$emit("cross-parterre-line-click", e, no, lane, side);
            },
            onRoadLaneParterreSafeAreaClick: function(e, no, lane) {
                //安全岛点击事件
                this.$parent.$emit("cross-parterre-safearea-click", e, no, lane);
            },
            onRoadLaneMarkClick: function(e, no, lane, side) {
                //道路路标点击事件
                var me = this;
                var mark = {};
                if(no === 0) {
                    mark = me.RoadTop.Lane[lane].landmark
                }

                if(no === 1) {
                    mark = me.RoadRight.Lane[lane].landmark
                }

                if(no === 2) {
                    mark = me.RoadBottom.Lane[lane].landmark
                }

                if(no === 3) {
                    mark = me.RoadLeft.Lane[lane].landmark
                }

                this.$parent.$emit("cross-lane-mark-click", e, no, lane, mark[side].seq, mark[side].mark);
            },
            onCrossStayAreaClick: function(e, no) {
                //十字路口行人暂留区域点击事件
                this.$parent.$emit('cross-stay-click', e, no, 'right');
            }
        }
    })

    var TRender = function() {
        var template = [
            "<g class='t-road' clip-path='url(#clip)'>",
                "<defs>",
                    "<g :id=\"'stayArea_' + uuid \"><path d='M200,0 V180 C200,200 200,200 180,200 L0,200 C100,200 200,100 200,0 z' fill='#0075c5' stroke='#fff' stroke-width='3' /></g>",
                "</defs>",
                "<g>",
                    "<rect :x='(1920 / 2) - 499999.5' :y='(1080 - RoadWidth) / 2' width='999999' :height='RoadWidth' fill='#333' />",
                    "<rect :x='(1920 - RoadWidth) / 2' :y='1080 / 2 + RoadWidth / 2 - 1' :width='RoadWidth' :height='499999.5' fill='#333' />",
                    "<line :x1='(1920 / 2) - 499999.5' :x2='(1920 / 2) + 499999.5' :y1='(1080 - RoadWidth) / 2 - 2.5' :y2='(1080 - RoadWidth) / 2 - 2.5' stroke='#8e8e8e' stroke-width='5' />",
                    "<circle :cx='1920 / 2' :cy='1080 / 2' r='10' fill='#fff' />",
                    "<path v-show='RoadLeft.stayArea' :d='caleRoadLeftNotch' fill='#333' stroke='none' />",
                    "<path v-show='RoadBottom.stayArea' :d='calcRoadRightNotch' fill='#333' stroke='none' />",
                "</g>",
                "<g>",
                    "<path :d='calcRoadLeftBoundary.out' fill='none' stroke='#8e8e8e' stroke-width='5' />",
                    "<path :d='calcRoadRightBoundary.out' fill='none' stroke='#8e8e8e' stroke-width='5' />",
                    "<path :d='calcRoadBottomBoundary.outLeft' fill='none' stroke='#8e8e8e' stroke-width='5' />",
                    "<path :d='calcRoadBottomBoundary.outRight' fill='none' stroke='#8e8e8e' stroke-width='5' />",
                "</g>",
                "<g>",
                    //行人斑马线
                    "<line v-show='RoadLeft.pedestrian' :x1='(1920 - RoadWidth) / 2 + 25' :x2='(1920 - RoadWidth) / 2 + 25' :y1='calcPedestrianLength.left.y1' :y2='calcPedestrianLength.left.y2' stroke='#fff' stroke-width='40' stroke-dasharray='5,5' style='pointer-events:visibleStroke;' @click.capture.stop='onRoadPedestrianClick($event, 0, false)' />",
                    "<line v-show='RoadRight.pedestrian' :x1='1920 / 2 + RoadWidth / 2 - 25' :x2='1920 / 2 + RoadWidth / 2 - 25' :y1='calcPedestrianLength.right.y1' :y2='calcPedestrianLength.right.y2' stroke='#fff' stroke-width='40' stroke-dasharray='5,5' style='pointer-events:visibleStroke;' @click.capture.stop='onRoadPedestrianClick($event, 1, false)' />",
                    "<line v-show='RoadBottom.pedestrian' :x1='calcPedestrianLength.bottom.x1' :x2='calcPedestrianLength.bottom.x2' :y1='1080 / 2 + RoadWidth / 2 - 25' :y2='1080 / 2 + RoadWidth / 2 - 25 ' stroke='#fff' stroke-width='40' stroke-dasharray='5,5' style='pointer-events:visibleStroke;' @click.capture.stop='onRoadPedestrianClick($event, 2, false)' />",
                "</g>",
                "<g>",
                    //机动车停止线
                    "<line v-if='RoadLeft.stopLine' :x1='calcRoadLeftStopLine.p1.x' :x2='calcRoadLeftStopLine.p2.x' :y1='calcRoadLeftStopLine.p1.y' :y2='calcRoadLeftStopLine.p2.y' stroke='#fff' stroke-width='5' @click.capture.stop='onRoadStopLineClick($event, 0)' />",
                    "<line v-if='RoadRight.stopLine' :x1='calcRoadRightStopLine.p1.x' :x2='calcRoadRightStopLine.p2.x' :y1='calcRoadRightStopLine.p1.y' :y2='calcRoadRightStopLine.p2.y' stroke='#fff' stroke-width='5' @click.capture.stop='onRoadStopLineClick($event, 1)'/>",
                    "<line v-if='RoadBottom.stopLine' :x1='calcRoadBottomStopLine.p1.x' :x2='calcRoadBottomStopLine.p2.x' :y1='calcRoadBottomStopLine.p1.y' :y2='calcRoadBottomStopLine.p2.y' stroke='#fff' stroke-width='5' @click.capture.stop='onRoadStopLineClick($event, 2)' />",
                "</g>",
                "<lane ",
                    "v-for='(item, n) in RoadLeft.Lane' ",
                    ":type='item.type' ",
                    ":assist='item.assist' ",
                    ":reverse='item.reverse' ",
                    ":markright='item.markright' ",
                    ":has-boundary='item.hasBoundary' ",
                    ":has-safe-area='item.hasSafeArea' ",
                    ":landmark='item.landmark' ",
                    ":angle='90' ",
                    ":width='calcRoadLeftLaneWidth' ",
                    ":x='roadLeftMoveTo(n).x' ",
                    ":y='roadLeftMoveTo(n).y' ",
                    "@on-pavement-click='onRoadLanePavementClick($event, 0, n)'",
                    "@on-solid-line-click='onRoadLaneSolidLineClick($event, 0, n)'",
                    "@on-dotted-line-click='onRoadLaneDottedLineClick($event, 0, n)'",
                    "@on-parterre-boundary-line-click='onRoadParterreBoundaryClick($event, 0, n)'",
                    "@on-y-dotted-line-click='onRoadLaneYDottedLineClick($event, 0, n)'",
                    "@on-y-solid-line-click='onRoadLaneYSolidLineClick($event, 0, n)'",
                    "@on-double-y-solid-click='onRoadLaneYDoubleSolidLineClick($event, 0, n, arguments[1])'",
                    "@on-double-y-dashed-click='onRoadLaneYDoubleDottedLineClick($event, 0, n, arguments[1])'",
                    "@on-y-solid-area-click='onRoadLaneYSolidAreaClick($event, 0, n)'",
                    "@on-parterre-click='onRoadLaneParterreClick($event, 0, n)'",
                    "@on-parterre-line-click='onRoadLaneParterreLineClick($event, 0, n, arguments[1])'",
                    "@on-parterre-safe-area-click='onRoadLaneParterreSafeAreaClick($event, 0, n)'",
                    "@on-lane-mark-click='onRoadLaneMarkClick($event, 0, n, arguments[1])'",
                    "></lane>",
                "<lane ",
                    "v-for='(item, n) in RoadRight.Lane' ",
                    ":type='item.type' ",
                    ":assist='item.assist' ",
                    ":reverse='item.reverse' ",
                    ":markright='item.markright' ",
                    ":has-boundary='item.hasBoundary' ",
                    ":has-safe-area='item.hasSafeArea' ",
                    ":landmark='item.landmark' ",
                    ":angle='-90' ",
                    ":width='calcRoadRightLaneWidth' ",
                    ":x='roadRightMoveTo(n).x' ",
                    ":y='roadRightMoveTo(n).y' ",
                    "@on-pavement-click='onRoadLanePavementClick($event, 1, n)'",
                    "@on-solid-line-click='onRoadLaneSolidLineClick($event, 1, n)'",
                    "@on-dotted-line-click='onRoadLaneDottedLineClick($event, 1, n)'",
                    "@on-parterre-boundary-line-click='onRoadParterreBoundaryClick($event, 1, n)'",
                    "@on-y-dotted-line-click='onRoadLaneYDottedLineClick($event, 1, n)'",
                    "@on-y-solid-line-click='onRoadLaneYSolidLineClick($event, 1, n)'",
                    "@on-double-y-solid-click='onRoadLaneYDoubleSolidLineClick($event, 1, n, arguments[1])'",
                    "@on-double-y-dashed-click='onRoadLaneYDoubleDottedLineClick($event, 1, n, arguments[1])'",
                    "@on-y-solid-area-click='onRoadLaneYSolidAreaClick($event, 1, n)'",
                    "@on-parterre-click='onRoadLaneParterreClick($event, 1, n)'",
                    "@on-parterre-line-click='onRoadLaneParterreLineClick($event, 1, n, arguments[1])'",
                    "@on-parterre-safe-area-click='onRoadLaneParterreSafeAreaClick($event, 1, n)'",
                    "@on-lane-mark-click='onRoadLaneMarkClick($event, 1, n, arguments[1])'",
                    "></lane>",
                "<lane ",
                    "v-for='(item, n) in RoadBottom.Lane' ",
                    ":type='item.type' ",
                    ":assist='item.assist' ",
                    ":reverse='item.reverse' ",
                    ":markright='item.markright' ",
                    ":has-boundary='item.hasBoundary' ",
                    ":has-safe-area='item.hasSafeArea' ",
                    ":landmark='item.landmark' ",
                    ":angle='0' ",
                    ":width='calcRoadBottomLaneWidth' ",
                    ":x='roadBottomMoveTo(n).x' ",
                    ":y='roadBottomMoveTo(n).y' ",
                    "@on-pavement-click='onRoadLanePavementClick($event, 2, n)'",
                    "@on-solid-line-click='onRoadLaneSolidLineClick($event, 2, n)'",
                    "@on-dotted-line-click='onRoadLaneDottedLineClick($event, 2, n)'",
                    "@on-parterre-boundary-line-click='onRoadParterreBoundaryClick($event, 2, n)'",
                    "@on-y-dotted-line-click='onRoadLaneYDottedLineClick($event, 2, n)'",
                    "@on-y-solid-line-click='onRoadLaneYSolidLineClick($event, 2, n)'",
                    "@on-double-y-solid-click='onRoadLaneYDoubleSolidLineClick($event, 2, n, arguments[1])'",
                    "@on-double-y-dashed-click='onRoadLaneYDoubleDottedLineClick($event, 2, n, arguments[1])'",
                    "@on-y-solid-area-click='onRoadLaneYSolidAreaClick($event, 2, n)'",
                    "@on-parterre-click='onRoadLaneParterreClick($event, 2, n)'",
                    "@on-parterre-line-click='onRoadLaneParterreLineClick($event, 2, n, arguments[1])'",
                    "@on-parterre-safe-area-click='onRoadLaneParterreSafeAreaClick($event, 2, n)'",
                    "@on-lane-mark-click='onRoadLaneMarkClick($event, 2, n, arguments[1])'",
                    "></lane>",
                "<g>",
                    //公路边界线
                    "<path v-show='RoadLeft.boundary.left.has' :d='calcRoadLeftBoundary.innterLeft' fill='none' stroke='#fff' stroke-width='2' @click.capture.stop='onRoadBoundaryClick($event, 0, false)'/>",
                    "<path v-show='RoadLeft.boundary.right.has' :d='calcRoadLeftBoundary.innterRight' fill='none' stroke='#fff' stroke-width='2' @click.capture.stop='onRoadBoundaryClick($event, 0, true)'/>",
                    "<path v-show='RoadRight.boundary.left.has' :d='calcRoadRightBoundary.innerLeft' fill='none' stroke='#fff' stroke-width='2' @click.capture.stop='onRoadBoundaryClick($event, 1, false)'/>",
                    "<path v-show='RoadRight.boundary.right.has' :d='calcRoadRightBoundary.innerRight' fill='none' stroke='#fff' stroke-width='2' @click.capture.stop='onRoadBoundaryClick($event, 1, true)' />",
                    "<path v-show='RoadBottom.boundary.left.has' :d='calcRoadBottomBoundary.innerLeft' fill='none' stroke='#fff' stroke-width='2' @click.capture.stop='onRoadBoundaryClick($event, 2, false)'/>",
                    "<path v-show='RoadBottom.boundary.right.has' :d='calcRoadBottomBoundary.innerRight' fill='none' stroke='#fff' stroke-width='2' @click.capture.stop='onRoadBoundaryClick($event, 2, true)'/>",
                "</g>",
                "<g>",
                    //行人安全暂留区斑马线
                    "<line v-show='RoadLeft.pedestrian && RoadLeft.stayArea && RoadLeft.stayPedestrian' :x1='calcPedestrianRoadLeft.p1.x' :x2='calcPedestrianRoadLeft.p2.x' :y1='calcPedestrianRoadLeft.p1.y' :y2='calcPedestrianRoadLeft.p2.y' stroke='#fff' stroke-width='40' stroke='#fff' stroke-dasharray='5,5' style='pointer-events:visibleStroke;' @click.capture.stop='onRoadPedestrianClick($event, 0, true)'/>",
                    "<line v-show='RoadBottom.pedestrian && RoadBottom.stayArea && RoadBottom.stayPedestrian' :x1='calcPedestrianRoadBottom.p1.x' :x2='calcPedestrianRoadBottom.p2.x' :y1='calcPedestrianRoadBottom.p1.y' :y2='calcPedestrianRoadBottom.p2.y' stroke='#fff' stroke-width='40' stroke='#fff' stroke-dasharray='5,5' style='pointer-events:visibleStroke;' @click.capture.stop='onRoadPedestrianClick($event, 2, true)'/>",
                "</g>",
                "<stay-pedestrian v-show='RoadLeft.stayArea && RoadLeft.pedestrian' :width='calcRoadLeftStay.width' :height='calcRoadLeftStay.height' :angle='-90' :x='calcRoadLeftStay.left' :y='calcRoadLeftStay.top' :defs='uuid'  @on-stay-area-click='onCrossStayAreaClick($event, 0)'></stay-pedestrian>",
                "<stay-pedestrian v-show='RoadBottom.stayArea && RoadBottom.pedestrian' :width='calcRoadBottomStay.width' :height='calcRoadBottomStay.height' :angle='180' :x='calcRoadBottomStay.left' :y='calcRoadBottomStay.top' :defs='uuid' @on-stay-area-click='onCrossStayAreaClick($event, 2)'></stay-pedestrian>",
            "</g>"
        ]
        return template.join("");
    }

    var TRoads = Vue.extend({
        template: TRender.apply(this),
        props: {
            RoadLeft : {
                //路口名称，前端支持此属性，但无UI表现,仅限数据交互使用。
                name : { default: '', type: String },
                //边界白线控制
                boundary: { 
                    left : { 
                        //deafult: 0 左侧边界白线的长度，前端支持此属性，但无UI表现,仅限数据交互使用。
                        length: { defualt: 0, type: Number },
                        //deafult: true 是否具有左侧边界白线,
                        has: { default: true, type: Boolean } 
                    },
                    right: {
                        //deafult: 0 右侧边界白线的长度，前端支持此属性，但无UI表现,仅限数据交互使用。
                        length: { defualt: 0, type: Number },
                        //deafult: true 是否具有右侧边界白线
                        has: { default: true, type: Boolean } 
                    }
                },
                //deafult: true 是否具有人行班马线
                pedestrian: { default: true, type: Boolean },
                //default: true 是否具有人行暂留区
                stayArea: { default: true, type: Boolean },
                //default: true, 是否具有暂留区斑马线
                stayPedestrian: { default: true, type: Boolean },
                //default: true 是否具有机动车停止线
                stopLine: { default: true, type: Boolean },
                //车道,自右向左绘制(顺时针)
                Lane : { default: [], type: Array },
                type: Object
            },
            RoadRight : {
                //路口名称，前端支持此属性，但无UI表现,仅限数据交互使用。
                name : { default: '', type: String },
                //边界白线控制
                boundary: { 
                    left : { 
                        //deafult: 0 左侧边界白线的长度，前端支持此属性，但无UI表现,仅限数据交互使用。
                        length: { defualt: 0, type: Number },
                        //deafult: true 是否具有左侧边界白线,
                        has: { default: true, type: Boolean } 
                    },
                    right: {
                        //deafult: 0 右侧边界白线的长度，前端支持此属性，但无UI表现,仅限数据交互使用。
                        length: { defualt: 0, type: Number },
                        //deafult: true 是否具有右侧边界白线
                        has: { default: true, type: Boolean } 
                    }
                },
                //deafult: true 是否具有人行班马线
                pedestrian: { default: true, type: Boolean },
                //default: true 是否具有人行暂留区
                stayArea: { default: true, type: Boolean },
                //default: true, 是否具有暂留区斑马线
                stayPedestrian: { default: true, type: Boolean },
                //default: true 是否具有机动车停止线
                stopLine: { default: true, type: Boolean },
                //车道,自右向左绘制(顺时针)
                Lane : { default: [], type: Array },
                type: Object
            },
            RoadBottom : {
                //路口名称，前端支持此属性，但无UI表现,仅限数据交互使用。
                name : { default: '', type: String },
                //边界白线控制
                boundary: { 
                    left : { 
                        //deafult: 0 左侧边界白线的长度，前端支持此属性，但无UI表现,仅限数据交互使用。
                        length: { defualt: 0, type: Number },
                        //deafult: true 是否具有左侧边界白线,
                        has: { default: true, type: Boolean } 
                    },
                    right: {
                        //deafult: 0 右侧边界白线的长度，前端支持此属性，但无UI表现,仅限数据交互使用。
                        length: { defualt: 0, type: Number },
                        //deafult: true 是否具有右侧边界白线
                        has: { default: true, type: Boolean } 
                    }
                },
                //deafult: true 是否具有人行班马线
                pedestrian: { default: true, type: Boolean },
                //default: true 是否具有人行暂留区
                stayArea: { default: true, type: Boolean },
                //default: true, 是否具有暂留区斑马线
                stayPedestrian: { default: true, type: Boolean },
                //default: true 是否具有机动车停止线
                stopLine: { default: true, type: Boolean },
                //车道,自右向左绘制(顺时针)
                Lane : { default: [], type: Array },
                type: Object
            },
            RoadWidth : {
                default: 500,
                type: Number
            }
        },
        data: function() {
            return {
                uuid : utils.uuid()
            }
        },
        components: {
            "StayPedestrian": StayPedestrian,
            "Lane" : Lane
        },
        computed: {
            caleRoadLeftNotch: function() {
                var me = this;
                var v = { x : (1920 - me.RoadWidth) / 2 + 1, y : (1080 / 2) + me.RoadWidth / 2 - 1 };
                var l = { x: v.x - 200, y : v.y };
                var b = { x: v.x, y : v.y + 200 };
                return "M${lx},${ly} L${vx},${vy} ${bx},${by} C${vx},${vy} ${vx},${vy} ${lx},${ly} z"
                    .replace(/(\$\{lx\})/g, l.x).replace(/(\$\{ly\})/g, l.y).replace(/(\$\{vx\})/g, v.x).replace(/(\$\{vy\})/g, v.y)
                    .replace(/(\$\{bx\})/g, b.x).replace(/(\$\{by\})/g, b.y);
            },
            calcRoadRightNotch: function() {
                var me = this;
                var v = { x : 1920 / 2 + me.RoadWidth / 2 - 1, y : (1080 / 2) + me.RoadWidth / 2 - 1 };
                var r =  { x: v.x + 200, y : v.y };
                var b = { x: v.x, y : v.y + 200 };
                return "M${rx},${ry} L${vx},${vy} ${bx},${by} C${vx},${vy} ${vx},${vy} ${rx},${ry} z"
                    .replace(/(\$\{rx\})/g, r.x).replace(/(\$\{ry\})/g, r.y).replace(/(\$\{vx\})/g, v.x).replace(/(\$\{vy\})/g, v.y)
                    .replace(/(\$\{bx\})/g, b.x).replace(/(\$\{by\})/g, b.y);
            },
            calcRoadLeftBoundary: function() {
                var me = this;
                var v = { x : (1920 - me.RoadWidth) / 2, y : (1080 / 2) + me.RoadWidth / 2 };
                var t = { x : 1920 / 2, y : (1080 - me.RoadWidth) / 2 };
                var r = { x: v.x, y : v.y + 200 };
                var l = { x: v.x - 200, y: v.y };
                var len = 499999.5 - (me.RoadWidth / 2 + 200);
                var inner_left = "M${tx},${ty} H-499999.5".replace(/(\$\{tx\})/g, t.x).replace(/(\$\{ty\})/g, t.y);
                var inner_right = "M${rx},${ry} C${vx},${vy} ${vx},${vy} ${lx},${ly} H-${len}".replace(/(\$\{rx\})/g, r.x).replace(/(\$\{ry\})/g, r.y).replace(/(\$\{vx\})/g, v.x).replace(/(\$\{vy\})/g, v.y).replace(/(\$\{lx\})/g, l.x).replace(/(\$\{ly\})/g, l.y).replace(/(\$\{len\})/g, len);
                var out = "M${rx},${ry} C${vx},${vy} ${vx},${vy} ${lx},${ly} H-${len}".replace(/(\$\{rx\})/g, r.x - 2.5).replace(/(\$\{ry\})/g, r.y).replace(/(\$\{vx\})/g, v.x - 2.5).replace(/(\$\{vy\})/g, v.y + 2.5).replace(/(\$\{lx\})/g, l.x).replace(/(\$\{ly\})/g, l.y + 2.5).replace(/(\$\{len\})/g, len);;
                if (!me.RoadLeft.stayArea) {
                    inner_right = "M${vx},${vy} H-${len}".replace(/(\$\{vx\})/g, v.x).replace(/(\$\{vy\})/g, v.y).replace(/(\$\{len\})/g, len);
                    out = "M${vx},${vy} H-${len}".replace(/(\$\{vx\})/g, v.x).replace(/(\$\{vy\})/g, v.y + 2.5).replace(/(\$\{len\})/g, len);
                }
                return { innterLeft: inner_left, innterRight: inner_right, out: out };
            },
            calcRoadRightBoundary: function() {
                var me = this;
                var v = { x : 1920 / 2 + me.RoadWidth / 2, y : (1080 / 2) + me.RoadWidth / 2 };
                var t = { x : 1920 / 2, y : (1080 - me.RoadWidth) / 2 };
                var l = { x : v.x, y : v.y + 200 };
                var len = 499999.5 - (me.RoadWidth / 2 + 200);
                var r = { x : v.x + 200, y : v.y}
                var inner_right = "M${tx},${ty} H499999.5".replace(/(\$\{tx\})/g, t.x).replace(/(\$\{ty\})/g, t.y);
                var inner_left = "M${lx},${ly} C${vx},${vy} ${vx},${vy} ${rx},${ry} H${len}".replace(/(\$\{rx\})/g, r.x).replace(/(\$\{ry\})/g, r.y).replace(/(\$\{vx\})/g, v.x).replace(/(\$\{vy\})/g, v.y).replace(/(\$\{lx\})/g, l.x).replace(/(\$\{ly\})/g, l.y).replace(/(\$\{len\})/g, len);
                var out = "M${lx},${ly} C${vx},${vy} ${vx},${vy} ${rx},${ry} H${len}".replace(/(\$\{rx\})/g, r.x).replace(/(\$\{ry\})/g, r.y + 2.5).replace(/(\$\{vx\})/g, v.x + 2.5).replace(/(\$\{vy\})/g, v.y + 2.5).replace(/(\$\{lx\})/g, l.x + 2.5).replace(/(\$\{ly\})/g, l.y).replace(/(\$\{len\})/g, len);
                if (!me.RoadRight.stayArea) {
                    inner_left = "M${vx},${vy} H${len}".replace(/(\$\{vx\})/g, v.x).replace(/(\$\{vy\})/g, v.y).replace(/(\$\{len\})/g, len);
                    out = "M${vx},${vy} H${len}".replace(/(\$\{vx\})/g, v.x).replace(/(\$\{vy\})/g, v.y + 2.5).replace(/(\$\{len\})/g, len);
                }
                return { innerLeft: inner_left, innerRight: inner_right, out: out }
            },
            calcRoadBottomBoundary: function() {
                var me = this;
                var v1 = { x : (1920 - me.RoadWidth) / 2, y : (1080 / 2) + me.RoadWidth / 2 };
                var v2 = { x : 1920 / 2 + me.RoadWidth / 2, y : (1080 / 2) + me.RoadWidth / 2 };
                var v3 = { x : v1.x - 200, y : v1.y + 200 };
                var v4 = { x : v2.x + 200, y : v2.y + 200 };
                var l = "M${v3x},${v1y} C${v1x},${v1y} ${v1x},${v1y} ${v1x},${v3y} V499999.5".replace(/(\$\{v1x\})/g, v1.x).replace(/(\$\{v1y\})/g, v1.y).replace(/(\$\{v3x\})/g, v3.x).replace(/(\$\{v3y\})/g, v3.y);
                var lo = "M${v3x},${v1y} C${v1x},${v1y} ${v1x},${v1y} ${v1x},${v3y} V499999.5".replace(/(\$\{v1x\})/g, v1.x - 2.5).replace(/(\$\{v1y\})/g, v1.y + 2.5).replace(/(\$\{v3x\})/g, v3.x - 2.5).replace(/(\$\{v3y\})/g, v3.y + 2.5);
                var r = "M${v4x},${v2y} C${v2x},${v2y} ${v2x},${v2y} ${v2x},${v4y} V499999.5".replace(/(\$\{v2x\})/g, v2.x).replace(/(\$\{v2y\})/g, v2.y).replace(/(\$\{v4x\})/g, v4.x).replace(/(\$\{v4y\})/g, v4.y);
                var ro = "M${v4x},${v2y} C${v2x},${v2y} ${v2x},${v2y} ${v2x},${v4y} V499999.5".replace(/(\$\{v2x\})/g, v2.x + 2.5).replace(/(\$\{v2y\})/g, v2.y + 2.5).replace(/(\$\{v4x\})/g, v4.x + 2.5).replace(/(\$\{v4y\})/g, v4.y + 2.5);
                if (!me.RoadBottom.stayArea) {
                    l = "M${v1x},${v1y} V499999.5".replace(/(\$\{v1x\})/g, v1.x).replace(/(\$\{v1y\})/g, v1.y);
                    lo = "M${v1x},${v1y} V499999.5".replace(/(\$\{v1x\})/g, v1.x - 2.5).replace(/(\$\{v1y\})/g, v1.y);
                    r = "M${v2x},${v2y} V499999.5".replace(/(\$\{v2x\})/g, v2.x).replace(/(\$\{v2y\})/g, v2.y);
                    ro = "M${v2x},${v2y} V499999.5".replace(/(\$\{v2x\})/g, v2.x + 2.5).replace(/(\$\{v2y\})/g, v2.y);
                }
                return { innerLeft: l, innerRight: r, outLeft: lo, outRight: ro }
            },
            //计算T字路口道路宽度
            calcRoadLeftLaneWidth: function() {
                var me = this;
                if(me.RoadLeft.Lane && me.RoadLeft.Lane.length) {
                    return me.RoadWidth / me.RoadLeft.Lane.length;
                }
                return me.RoadWidth;
            },
            //计算T字路口道路宽度
            calcRoadRightLaneWidth: function() {
                var me = this;
                if(me.RoadRight.Lane && me.RoadRight.Lane.length) {
                    return me.RoadWidth / me.RoadRight.Lane.length;
                }
                return me.RoadWidth;
            },
            //计算T字路口道路宽度
            calcRoadBottomLaneWidth: function() {
                var me = this;
                if(me.RoadBottom.Lane && me.RoadBottom.Lane.length) {
                    return me.RoadWidth / me.RoadBottom.Lane.length;
                }
                return me.RoadWidth;
            },
            calcRoadLeftStopLine: function() {
                var me = this;
                var lane = me.RoadLeft.Lane.length | 0;
                var diff = !me.RoadLeft.stayArea ? 0 : lane <= 2 ? 50 : me.RoadWidth / lane;
                var height = !lane ? me.RoadWidth - (diff * 2) : ((me.RoadLeft.Lane.filter(function(it) { return !it.reverse }).length || 0) * (me.RoadWidth / lane)) - diff;
                var x = 1920 / 2 - me.RoadWidth / 2 - 20;
                var y = 1080 / 2 + me.RoadWidth / 2 - diff;
                return { p1: { x : x, y : y - height }, p2: { x : x, y : y } };
            },
            calcRoadRightStopLine: function() {
                var me = this;
                var lane = me.RoadRight.Lane.length | 0;
                var diff = !me.RoadRight.stayArea ? 0 : lane <= 2 ? 50 : me.RoadWidth / lane;
                var height = !lane ? me.RoadWidth - (diff * 2) : ((me.RoadRight.Lane.filter(function(it) { return !it.reverse }).length || 0) * (me.RoadWidth / lane)) - diff;
                var x = 1920 / 2 + me.RoadWidth / 2 + 20;
                var y = (1080 - me.RoadWidth) / 2 + diff;
                return { p1: { x : x, y : y }, p2: { x : x, y : y + height } };
            },
            calcRoadBottomStopLine: function() {
                var me = this;
                var lane = me.RoadBottom.Lane.length | 0;
                var diff = !me.RoadBottom.stayArea ? 0 : lane <= 2 ? 50 : me.RoadWidth / lane;
                var width = !lane ? me.RoadWidth - (diff * 2) : ((me.RoadBottom.Lane.filter(function(it) { return !it.reverse }).length || 0) * (me.RoadWidth / lane)) - diff;
                var x = 1920 / 2 + me.RoadWidth / 2 - width - diff;
                var y = 1080 / 2 + me.RoadWidth / 2;
                return { p1 : { x: x, y: y + 20 }, p2: { x: x + width, y: y + 20 }};
            },
            calcPedestrianLength: function() {
                var me = this;
                var rightLane = me.RoadRight.Lane.length | 0;
                var bottomLane = me.RoadBottom.Lane.length | 0;
                var leftLane = me.RoadLeft.Lane.length | 0;
                return {
                    right: {
                        y1 : rightLane - 2 <= 0 ? (1080 - me.RoadWidth) / 2 + 50 : (1080 - me.RoadWidth) / 2 + me.RoadWidth / rightLane,
                        y2 : rightLane - 2 <= 0 ? 1080 / 2 + me.RoadWidth / 2 - 50 : 1080 / 2 + me.RoadWidth / 2 - me.RoadWidth / rightLane
                    },
                    bottom : {
                        x1 : bottomLane - 2 <= 0 ? (1920 - me.RoadWidth) / 2 + 50 : (1920 - me.RoadWidth) / 2 + me.RoadWidth / bottomLane,
                        x2 : bottomLane - 2 <= 0 ? 1920 / 2 + me.RoadWidth / 2 - 50 : 1920 / 2 + me.RoadWidth / 2 - me.RoadWidth / bottomLane
                    },
                    left: {
                        y1 : leftLane - 2 <= 0 ? (1080 - me.RoadWidth) / 2 + 50 : (1080 - me.RoadWidth) / 2 + me.RoadWidth / leftLane,
                        y2 : leftLane - 2 <= 0 ? 1080 / 2 + me.RoadWidth / 2 - 50 : 1080 / 2 + me.RoadWidth / 2 - me.RoadWidth / leftLane
                    }
                }
            },
            calcRoadLeftStay: function() {
                var me = this;
                var leftLane = me.RoadLeft.Lane.length | 0;
                var bottomLane = me.RoadBottom.Lane.length | 0;
                var layout = {};
                layout.width = leftLane <= 2 ? 150 : ((me.RoadWidth / leftLane) * 2);
                layout.height = bottomLane <= 2 ? 150 : ((me.RoadWidth / bottomLane) * 2);
                layout.left = bottomLane <= 2 ? ((1920 - me.RoadWidth) / 2 + 50 - layout.height) : (1920 - me.RoadWidth) / 2 + (me.RoadWidth / bottomLane) - layout.height - 1;
                layout.top = leftLane <= 2 ? (1080 / 2 + me.RoadWidth / 2 - 50 + layout.width) : 1080 / 2 + me.RoadWidth / 2 - (me.RoadWidth / leftLane) + layout.width + 1;
                return layout;
            },
            calcRoadBottomStay: function() {
                var me = this;
                var bottomLane = me.RoadBottom.Lane.length | 0;
                var rightLane = me.RoadRight.Lane.length | 0;
                var layout = {};
                layout.width = bottomLane <= 2 ? 150 : ((me.RoadWidth / bottomLane) * 2);
                layout.height = rightLane <= 2 ? 150 : ((me.RoadWidth / rightLane) * 2);
                layout.left = bottomLane <= 2 ? ((1920 /2 + me.RoadWidth / 2) - 50 + layout.width) : 1920 / 2 + me.RoadWidth / 2 - (me.RoadWidth / bottomLane) + layout.width + 1;
                layout.top = rightLane <= 2 ? (1080 / 2 + me.RoadWidth / 2 - 50 + layout.height) : 1080 / 2 + me.RoadWidth / 2 - (me.RoadWidth / rightLane) + layout.height + 1;
                return layout;
            },
            calcPedestrianRoadBottom: function() {
                var me = this;
                var bottomLane = me.RoadBottom.Lane.length | 0;
                var rightLane = me.RoadRight.Lane.length | 0;
                var langW = bottomLane <= 2 ? 50 : me.RoadWidth / bottomLane; 
                var langH = rightLane <= 2 ? 50 : me.RoadWidth / rightLane;
                var s = Math.sqrt(langW * langW + langH * langH) / 2;
                var ox = (1920 / 2) + (me.RoadWidth / 2) + 125;
                var oy = (1080 / 2) + (me.RoadWidth / 2) + 125;
                var p = utils.calcRadiusAnyPoint(ox, oy, 150, 225);
                var p2 = utils.calcRadiusAnyPoint(ox, oy, 160 + s, 225);
                return { p1: p, p2: p2 };
            },
            calcPedestrianRoadLeft: function() {
                var me = this;
                var leftLane = me.RoadLeft.Lane.length | 0;
                var bottomLane = me.RoadBottom.Lane.length | 0;
                var langW = bottomLane <= 2 ? 50 : me.RoadWidth / bottomLane; 
                var langH = leftLane <= 2 ? 50 : me.RoadWidth / leftLane;
                var s = Math.sqrt(langW * langW + langH * langH) / 2;
                var ox = (1920 - me.RoadWidth) / 2 - 125;
                var oy = (1080 / 2) + (me.RoadWidth / 2) + 125;
                var p = utils.calcRadiusAnyPoint(ox, oy, 150, 315);
                var p2 = utils.calcRadiusAnyPoint(ox, oy, 160 + s, 315);
                return { p1: p, p2: p2 };
            }
        },
        methods: {
            roadLeftMoveTo: function(n) {
                var me = this;
                var v = { x : (1920 - me.RoadWidth) / 2, y : 1080 / 2 + me.RoadWidth / 2 };
                var width = me.calcRoadLeftLaneWidth;
                return { x : v.x - 20, y :  v.y - ((n + 1) * width)}
            },
            roadRightMoveTo: function(n) {
                var me = this;
                var v = { x : 1920 / 2 + me.RoadWidth / 2, y : 1080 / 2 - me.RoadWidth / 2 };
                var width = me.calcRoadRightLaneWidth;
                return { x : v.x + 20, y: v.y + ((n + 1) * width) }
            },
            roadBottomMoveTo: function(n) {
                var me = this;
                var v = { x : 1920 / 2 + me.RoadWidth / 2, y : 1080 / 2 + me.RoadWidth / 2 };
                var width = me.calcRoadBottomLaneWidth;
                return { x : v.x - ((n + 1) * width), y: v.y + 20 }
            },
            onRoadPedestrianClick: function(e, no, isStay) {
                //十字路口行人斑马线的点击事件
                this.$parent.$emit('cross-road-pedestrian-click', e, no, isStay);
            },
            onRoadStopLineClick: function(e, no) {
                //机动车停止线点击事件
                this.$parent.$emit("cross-road-stopline-click", e, no);
            },
            onRoadBoundaryClick: function(e, no, isRight) {
                //十字路口公路边界线的点击事件
                this.$parent.$emit('cross-road-boundary-click', e, no, isRight ? 'right' : 'left');
            },
            onRoadLanePavementClick: function(e, no, lane) {
                //机动车道路点击事件
                this.$parent.$emit("cross-road-pavement-click", e, no, lane);
            },
            onRoadLaneSolidLineClick: function(e, no, lane) {
                //机动车道路白色实线点击事件
                this.$parent.$emit("cross-solid-line-click", e, no, lane);
            },
            onRoadLaneDottedLineClick: function(e, no, lane) {
                //机动车道路白色虚线点击事件
                this.$parent.$emit("cross-dotted-line-click", e, no, lane);
            },
            onRoadParterreBoundaryClick: function(e, no, lane) {
                //花坛边界线点击事件
                this.$parent.$emit("cross-parterre-boundary-line-click", e, no, lane);
            },
            onRoadLaneYDottedLineClick: function() {
                //机动车黄色虚线点击事件
                this.$parent.$emit("cross-y-dotted-line-click", e, no, lane);
            },
            onRoadLaneYSolidLineClick: function(e, no, lane) {
                //机动车黄色实线点击事件
                this.$parent.$emit("cross-y-solid-line-click", e, no, lane);
            },
            onRoadLaneYDoubleSolidLineClick: function(e, no, lane, side) {
                //机动车双黄色实线点击事件
                this.$parent.$emit("cross-y-double-solid-line-click", e, no, lane, side);
            },
            onRoadLaneYDoubleDottedLineClick: function(e, no, lane, side) {
                //机动车黄色虚线点击事件
                this.$parent.$emit("cross-y-double-dashed-line-click", e, no, lane, side);
            },
            onRoadLaneYSolidAreaClick: function(e, no, lane) {
                //机动车黄色禁停区域点击事件
                this.$parent.$emit("cross-y-area-click", e, no, lane);
            },
            onRoadLaneParterreClick: function(e, no, lane) {
                //花坛绿色区域点击事件
                this.$parent.$emit("cross-parterre-click", e, no, lane);
            },
            onRoadLaneParterreLineClick: function(e, no, lane, side) {
                //花坛内部白线点击事件
                this.$parent.$emit("cross-parterre-line-click", e, no, lane, side);
            },
            onRoadLaneParterreSafeAreaClick: function(e, no, lane) {
                //安全岛点击事件
                this.$parent.$emit("cross-parterre-safearea-click", e, no, lane);
            },
            onRoadLaneMarkClick: function(e, no, lane, side) {
                //道路路标点击事件
                var me = this;
                var mark = {};
                if(no === 0) {
                    mark = me.RoadTop.Lane[lane].landmark
                }

                if(no === 1) {
                    mark = me.RoadRight.Lane[lane].landmark
                }

                if(no === 2) {
                    mark = me.RoadBottom.Lane[lane].landmark
                }

                if(no === 3) {
                    mark = me.RoadLeft.Lane[lane].landmark
                }

                this.$parent.$emit("cross-lane-mark-click", e, no, lane, mark[side].seq, mark[side].mark);
            },
            onCrossStayAreaClick: function(e, no) {
                //十字路口行人暂留区域点击事件
                this.$parent.$emit('cross-stay-click', e, no, 'right');
            }
        }
    })

    var KRender = function() {
        var template = [
            "<g class='k-road' clip-path='url(#clip)'>",
                "<g>",
                    "<rect :x='getCenterIntersection.x - RoadWidth' y='-499999.5' :width='RoadWidth' height='999999' fill='#333' />",
                    "<rect :x='getCenterIntersection.x' :y='getCenterIntersection.y - RoadWidth / 2' width='499999.5' :height='RoadWidth' style='transform:rotate(-45deg); transform-origin: center center;' fill='#333' />",
                    "<rect :x='getCenterIntersection.x' :y='getCenterIntersection.y - RoadWidth / 2' width='499999.5' :height='RoadWidth' style='transform:rotate(45deg); transform-origin: center center;' fill='#333' />",
                    "<path :d='calcRoadTopNotch' fill='#333' stroke='#333' stroke-width='1'/>",
                    "<path :d='calcRoadRightNotch' fill='#333' stroke='#333' stroke-width='1'/>",
                    "<path :d='calcRoadBottomNotch' fill='#333' stroke='#333' stroke-width='1'/>",
                    "<line :x1='getCenterIntersection.x - RoadWidth - 2.5' y1='-499999.5' :x2='getCenterIntersection.x - RoadWidth' :y2='-499999.5 + 999999' stroke='#8e8e8e' stroke-width='5' />",
                    "<path :d='calcTopRoadBoundary.out' fill='none' stroke='#8e8e8e' stroke-width='5' />",
                    "<path :d='calcRightRoadBoundary.outRight' fill='none' stroke='#8e8e8e' stroke-width='5' />",
                    "<path :d='calcRightRoadBoundary.outLeft' fill='none' stroke='#8e8e8e' stroke-width='5' />",
                    "<path :d='calcLeftRoadBoudary.outRight' fill='none' stroke='#8e8e8e' stroke-width='5' />",
                    "<path :d='calcLeftRoadBoudary.outLeft' fill='none' stroke='#8e8e8e' stroke-width='5' />",
                    "<path :d='calcBottomRoadBoudary.outRight' fill='none' stroke='#8e8e8e' stroke-width='5' />",
                    "<circle :cx='getCenterIntersection.x' :cy='getCenterIntersection.y' r='15' fill='#fff' />",
                "</g>",
                "<g>",
                    //行人斑马线
                    "<line v-show='RoadTop.pedestrian' :x1='calcPedestrianLength.top.p1.x' :x2='calcPedestrianLength.top.p2.x' :y1='calcPedestrianLength.top.p1.y' :y2='calcPedestrianLength.top.p2.y' stroke='#fff' stroke-width='40' stroke-dasharray='5,5' style='pointer-events:visibleStroke;' @click.capture.stop='onRoadPedestrianClick($event, 0, false)' />",
                    "<line v-show='RoadRight.pedestrian' :x1='calcPedestrianLength.right.p1.x' :x2='calcPedestrianLength.right.p2.x' :y1='calcPedestrianLength.right.p1.y' :y2='calcPedestrianLength.right.p2.y' stroke='#fff' stroke-width='40' stroke-dasharray='5,5' style='pointer-events:visibleStroke;' @click.capture.stop='onRoadPedestrianClick($event, 1, false)' />",
                    "<line v-show='RoadLeft.pedestrian' :x1='calcPedestrianLength.left.p1.x' :x2='calcPedestrianLength.left.p2.x' :y1='calcPedestrianLength.left.p1.y' :y2='calcPedestrianLength.left.p2.y' stroke='#fff' stroke-width='40' stroke-dasharray='5,5' style='pointer-events:visibleStroke;' @click.capture.stop='onRoadPedestrianClick($event, 2, false)' />",
                    "<line v-show='RoadBottom.pedestrian' :x1='calcPedestrianLength.bottom.p1.x' :x2='calcPedestrianLength.bottom.p2.x' :y1='calcPedestrianLength.bottom.p1.y' :y2='calcPedestrianLength.bottom.p2.y' stroke='#fff' stroke-width='40' stroke-dasharray='5,5' style='pointer-events:visibleStroke;' @click.capture.stop='onRoadPedestrianClick($event, 3, false)' />",
                "</g>",
                "<g>",
                    //机动车停止线
                    "<line v-if='RoadTop.stopLine' :x1='calcRoadTopStopLine.p1.x' :x2='calcRoadTopStopLine.p2.x' :y1='calcRoadTopStopLine.p1.y' :y2='calcRoadTopStopLine.p2.y' stroke='#fff' stroke-width='5' @click.capture.stop='onRoadStopLineClick($event, 0)'/>",
                    "<line v-if='RoadRight.stopLine' :x1='calcRoadRightStopLine.p1.x' :x2='calcRoadRightStopLine.p2.x' :y1='calcRoadRightStopLine.p1.y' :y2='calcRoadRightStopLine.p2.y' stroke='#fff' stroke-width='5' @click.capture.stop='onRoadStopLineClick($event, 1)'/>",
                    "<line v-if='RoadLeft.stopLine' :x1='calcRoadLeftStopLine.p1.x' :x2='calcRoadLeftStopLine.p2.x' :y1='calcRoadLeftStopLine.p1.y' :y2='calcRoadLeftStopLine.p2.y' stroke='#fff' stroke-width='5' @click.capture.stop='onRoadStopLineClick($event, 2)' />",
                    "<line v-if='RoadBottom.stopLine' :x1='calcRoadBottomStopLine.p1.x' :x2='calcRoadBottomStopLine.p2.x' :y1='calcRoadBottomStopLine.p1.y' :y2='calcRoadBottomStopLine.p2.y' stroke='#fff' stroke-width='5' @click.capture.stop='onRoadStopLineClick($event, 3)' />",
                "</g>",
                "<lane ",
                    "v-for='(item, n) in RoadTop.Lane' ",
                    ":type='item.type' ",
                    ":assist='item.assist' ",
                    ":reverse='item.reverse' ",
                    ":markright='item.markright' ",
                    ":has-boundary='item.hasBoundary' ",
                    ":has-safe-area='item.hasSafeArea' ",
                    ":landmark='item.landmark' ",
                    ":angle='-180' ",
                    ":width='calcRoadTopLaneWidth' ",
                    ":x='crossTopMoveTo(n).x' ",
                    ":y='crossTopMoveTo(n).y' ",
                    "@on-pavement-click='onRoadLanePavementClick($event, 0, n)'",
                    "@on-solid-line-click='onRoadLaneSolidLineClick($event, 0, n)'",
                    "@on-dotted-line-click='onRoadLaneDottedLineClick($event, 0, n)'",
                    "@on-parterre-boundary-line-click='onRoadParterreBoundaryClick($event, 0, n)'",
                    "@on-y-dotted-line-click='onRoadLaneYDottedLineClick($event, 0, n)'",
                    "@on-y-solid-line-click='onRoadLaneYSolidLineClick($event, 0, n)'",
                    "@on-double-y-solid-click='onRoadLaneYDoubleSolidLineClick($event, 0, n, arguments[1])'",
                    "@on-double-y-dashed-click='onRoadLaneYDoubleDottedLineClick($event, 0, n, arguments[1])'",
                    "@on-y-solid-area-click='onRoadLaneYSolidAreaClick($event, 0, n)'",
                    "@on-parterre-click='onRoadLaneParterreClick($event, 0, n)'",
                    "@on-parterre-line-click='onRoadLaneParterreLineClick($event, 0, n, arguments[1])'",
                    "@on-parterre-safe-area-click='onRoadLaneParterreSafeAreaClick($event, 0, n)'",
                    "@on-lane-mark-click='onRoadLaneMarkClick($event, 0, n, arguments[1])'",
                    "></lane>",
                "<lane ",
                    "v-for='(item, n) in RoadRight.Lane' ",
                    ":type='item.type' ",
                    ":assist='item.assist' ",
                    ":reverse='item.reverse' ",
                    ":markright='item.markright' ",
                    ":has-boundary='item.hasBoundary' ",
                    ":has-safe-area='item.hasSafeArea' ",
                    ":landmark='item.landmark' ",
                    ":angle='-135' ",
                    ":width='calcRoadRightLaneWidth' ",
                    ":x='crossRightMoveTo(n).x' ",
                    ":y='crossRightMoveTo(n).y' ",
                    "@on-pavement-click='onRoadLanePavementClick($event, 1, n)'",
                    "@on-solid-line-click='onRoadLaneSolidLineClick($event, 1, n)'",
                    "@on-dotted-line-click='onRoadLaneDottedLineClick($event, 1, n)'",
                    "@on-parterre-boundary-line-click='onRoadParterreBoundaryClick($event, 1, n)'",
                    "@on-y-dotted-line-click='onRoadLaneYDottedLineClick($event, 1, n)'",
                    "@on-y-solid-line-click='onRoadLaneYSolidLineClick($event, 1, n)'",
                    "@on-double-y-solid-click='onRoadLaneYDoubleSolidLineClick($event, 1, n, arguments[1])'",
                    "@on-double-y-dashed-click='onRoadLaneYDoubleDottedLineClick($event, 1, n, arguments[1])'",
                    "@on-y-solid-area-click='onRoadLaneYSolidAreaClick($event, 1, n)'",
                    "@on-parterre-click='onRoadLaneParterreClick($event, 1, n)'",
                    "@on-parterre-line-click='onRoadLaneParterreLineClick($event, 1, n, arguments[1])'",
                    "@on-parterre-safe-area-click='onRoadLaneParterreSafeAreaClick($event, 1, n)'",
                    "@on-lane-mark-click='onRoadLaneMarkClick($event, 1, n, arguments[1])'",
                    "></lane>",
                "<lane ",
                    "v-for='(item, n) in RoadLeft.Lane' ",
                    ":type='item.type' ",
                    ":assist='item.assist' ",
                    ":reverse='item.reverse' ",
                    ":markright='item.markright' ",
                    ":has-boundary='item.hasBoundary' ",
                    ":has-safe-area='item.hasSafeArea' ",
                    ":landmark='item.landmark' ",
                    ":angle='-45' ",
                    ":width='calcRoadLeftLaneWidth' ",
                    ":x='crossLeftMoveTo(n).x' ",
                    ":y='crossLeftMoveTo(n).y' ",
                    "@on-pavement-click='onRoadLanePavementClick($event, 2, n)'",
                    "@on-solid-line-click='onRoadLaneSolidLineClick($event, 2, n)'",
                    "@on-dotted-line-click='onRoadLaneDottedLineClick($event, 2, n)'",
                    "@on-parterre-boundary-line-click='onRoadParterreBoundaryClick($event, 2, n)'",
                    "@on-y-dotted-line-click='onRoadLaneYDottedLineClick($event, 2, n)'",
                    "@on-y-solid-line-click='onRoadLaneYSolidLineClick($event, 2, n)'",
                    "@on-double-y-solid-click='onRoadLaneYDoubleSolidLineClick($event, 2, n, arguments[1])'",
                    "@on-double-y-dashed-click='onRoadLaneYDoubleDottedLineClick($event, 2, n, arguments[1])'",
                    "@on-y-solid-area-click='onRoadLaneYSolidAreaClick($event, 2, n)'",
                    "@on-parterre-click='onRoadLaneParterreClick($event, 2, n)'",
                    "@on-parterre-line-click='onRoadLaneParterreLineClick($event, 2, n, arguments[1])'",
                    "@on-parterre-safe-area-click='onRoadLaneParterreSafeAreaClick($event, 2, n)'",
                    "@on-lane-mark-click='onRoadLaneMarkClick($event, 2, n, arguments[1])'",
                    "></lane>",
                "<lane ",
                    "v-for='(item, n) in RoadBottom.Lane' ",
                    ":type='item.type' ",
                    ":assist='item.assist' ",
                    ":reverse='item.reverse' ",
                    ":markright='item.markright' ",
                    ":has-boundary='item.hasBoundary' ",
                    ":has-safe-area='item.hasSafeArea' ",
                    ":landmark='item.landmark' ",
                    ":angle='0' ",
                    ":width='calcRoadBottomLaneWidth' ",
                    ":x='crossBottomMoveTo(n).x' ",
                    ":y='crossBottomMoveTo(n).y' ",
                    "@on-pavement-click='onRoadLanePavementClick($event, 3, n)'",
                    "@on-solid-line-click='onRoadLaneSolidLineClick($event, 3, n)'",
                    "@on-dotted-line-click='onRoadLaneDottedLineClick($event, 3, n)'",
                    "@on-parterre-boundary-line-click='onRoadParterreBoundaryClick($event, 3, n)'",
                    "@on-y-dotted-line-click='onRoadLaneYDottedLineClick($event, 3, n)'",
                    "@on-y-solid-line-click='onRoadLaneYSolidLineClick($event, 3, n)'",
                    "@on-double-y-solid-click='onRoadLaneYDoubleSolidLineClick($event, 3, n, arguments[1])'",
                    "@on-double-y-dashed-click='onRoadLaneYDoubleDottedLineClick($event, 3, n, arguments[1])'",
                    "@on-y-solid-area-click='onRoadLaneYSolidAreaClick($event, 3, n)'",
                    "@on-parterre-click='onRoadLaneParterreClick($event, 3, n)'",
                    "@on-parterre-line-click='onRoadLaneParterreLineClick($event, 3, n, arguments[1])'",
                    "@on-parterre-safe-area-click='onRoadLaneParterreSafeAreaClick($event, 3, n)'",
                    "@on-lane-mark-click='onRoadLaneMarkClick($event, 3, n, arguments[1])'",
                    "></lane>",
                "<g>",
                    //公路边界线
                    "<path v-show='RoadTop.boundary.left.has' :d='calcTopRoadBoundary.left' fill='none' stroke='#fff' stroke-width='2' @click.capture.stop='onRoadBoundaryClick($event, 0, false)'/>",
                    "<path v-show='RoadTop.boundary.right.has' :d='calcTopRoadBoundary.right' fill='none' stroke='#fff' stroke-width='2' @click.capture.stop='onRoadBoundaryClick($event, 0, true)' />",
                    "<path v-show='RoadRight.boundary.left.has' :d='calcRightRoadBoundary.left' fill='none' stroke='#fff' stroke-width='2' @click.capture.stop='onRoadBoundaryClick($event, 1, false)'/>",
                    "<path v-show='RoadRight.boundary.right.has' :d='calcRightRoadBoundary.right' fill='none' stroke='#fff' stroke-width='2' @click.capture.stop='onRoadBoundaryClick($event, 1, true)' />",
                    "<path v-show='RoadLeft.boundary.left.has' :d='calcLeftRoadBoudary.left' fill='none' stroke='#fff' stroke-width='2' @click.capture.stop='onRoadBoundaryClick($event, 2, false)' />",
                    "<path v-show='RoadLeft.boundary.right.has' :d='calcLeftRoadBoudary.right' fill='none' stroke='#fff' stroke-width='2' @click.capture.stop='onRoadBoundaryClick($event, 2, true)' />",
                    "<path v-show='RoadBottom.boundary.left.has' :d='calcBottomRoadBoudary.left' fill='none' stroke='#fff' stroke-width='2' @click.capture.stop='onRoadBoundaryClick($event, 3, false)'/>",
                    "<path v-show='RoadBottom.boundary.right.has' :d='calcBottomRoadBoudary.right' fill='none' stroke='#fff' stroke-width='2' @click.capture.stop='onRoadBoundaryClick($event, 3, true)'/>",
                "</g>",
                "<g>",
                    //行人安全暂留区斑马线
                    "<line v-show='RoadRight.pedestrian && RoadRight.stayArea && RoadRight.stayPedestrian' :x1='calcRightPedestrian.p1.x' :x2='calcRightPedestrian.p2.x' :y1='calcRightPedestrian.p1.y' :y2='calcRightPedestrian.p2.y' stroke='#fff' stroke-width='40' stroke='#fff' stroke-dasharray='5,5' style='pointer-events:visibleStroke;' @click.capture.stop='onRoadPedestrianClick($event, 1, true)'/>",
                    "<line v-show='RoadLeft.pedestrian && RoadLeft.stayArea && RoadLeft.stayPedestrian' :x1='calcLeftPedestrian.p1.x' :x2='calcLeftPedestrian.p2.x' :y1='calcLeftPedestrian.p1.y' :y2='calcLeftPedestrian.p2.y' stroke='#fff' stroke-width='40' stroke='#fff' stroke-dasharray='5,5' style='pointer-events:visibleStroke;' @click.capture.stop='onRoadPedestrianClick($event, 2, true)'/>",
                    "<line v-show='RoadBottom.pedestrian && RoadBottom.stayArea && RoadBottom.stayPedestrian' :x1='calcBottomPedestrian.p1.x' :x2='calcBottomPedestrian.p2.x' :y1='calcBottomPedestrian.p1.y' :y2='calcBottomPedestrian.p2.y' stroke='#fff' stroke-width='40' stroke='#fff' stroke-dasharray='5,5' style='pointer-events:visibleStroke;' @click.capture.stop='onRoadPedestrianClick($event, 3, true)'/>",
                "</g>",
                "<g>",
                    "<path v-show='RoadRight.stayArea && RoadRight.pedestrian' :d='calcRoadTopStay' fill='#0075c5' stroke='#fff' stroke-width='2' style='pointer-events:visiblePainted;' @click='onCrossStayAreaClick($event, 1)' />",
                    "<path v-show='RoadLeft.stayArea && RoadLeft.pedestrian' :d='calcRoadRightStay' fill='#0075c5' stroke='#fff' stroke-width='2' style='pointer-events:visiblePainted;' @click='onCrossStayAreaClick($event, 2)' />",
                    "<path v-show='RoadBottom.stayArea && RoadBottom.pedestrian' :d='calcRoadLeftStay' fill='#0075c5' stroke='#fff' stroke-width='2' style='pointer-events:visiblePainted;' @click='onCrossStayAreaClick($event, 3)' />",
                "</g>",
            "</g>"
        ]
        return template.join("")
    }

    var KRoads = Vue.extend({
        template: KRender.apply(this),
        props : {
            RoadTop : {
                //路口名称，前端支持此属性，但无UI表现,仅限数据交互使用。
                name : { default: '', type: String },
                //边界白线控制
                boundary: { 
                    left : { 
                        //deafult: 0 左侧边界白线的长度，前端支持此属性，但无UI表现,仅限数据交互使用。
                        length: { defualt: 0, type: Number },
                        //deafult: true 是否具有左侧边界白线,
                        has: { default: true, type: Boolean } 
                    },
                    right: {
                        //deafult: 0 右侧边界白线的长度，前端支持此属性，但无UI表现,仅限数据交互使用。
                        length: { defualt: 0, type: Number },
                        //deafult: true 是否具有右侧边界白线
                        has: { default: true, type: Boolean } 
                    }
                },
                //deafult: true 是否具有人行班马线
                pedestrian: { default: true, type: Boolean },
                //default: true 是否具有人行暂留区
                stayArea: { default: true, type: Boolean },
                //default: true, 是否具有暂留区斑马线
                stayPedestrian: { default: true, type: Boolean },
                //default: true 是否具有机动车停止线
                stopLine: { default: true, type: Boolean },
                //车道,自右向左绘制(顺时针)
                Lane : { default: [], type: Array },
                type: Object
            },
            RoadRight : {
                //路口名称，前端支持此属性，但无UI表现,仅限数据交互使用。
                name : { default: '', type: String },
                //边界白线控制
                boundary: { 
                    left : { 
                        //deafult: 0 左侧边界白线的长度，前端支持此属性，但无UI表现,仅限数据交互使用。
                        length: { defualt: 0, type: Number },
                        //deafult: true 是否具有左侧边界白线,
                        has: { default: true, type: Boolean } 
                    },
                    right: {
                        //deafult: 0 右侧边界白线的长度，前端支持此属性，但无UI表现,仅限数据交互使用。
                        length: { defualt: 0, type: Number },
                        //deafult: true 是否具有右侧边界白线
                        has: { default: true, type: Boolean } 
                    }
                },
                //deafult: true 是否具有人行班马线
                pedestrian: { default: true, type: Boolean },
                //default: true 是否具有人行暂留区
                stayArea: { default: true, type: Boolean },
                //default: true, 是否具有暂留区斑马线
                stayPedestrian: { default: true, type: Boolean },
                //default: true 是否具有机动车停止线
                stopLine: { default: true, type: Boolean },
                //车道,自右向左绘制(顺时针)
                Lane : { default: [], type: Array },
                type: Object
            },
            RoadBottom : {
                //路口名称，前端支持此属性，但无UI表现,仅限数据交互使用。
                name : { default: '', type: String },
                //边界白线控制
                boundary: { 
                    left : { 
                        //deafult: 0 左侧边界白线的长度，前端支持此属性，但无UI表现,仅限数据交互使用。
                        length: { defualt: 0, type: Number },
                        //deafult: true 是否具有左侧边界白线,
                        has: { default: true, type: Boolean } 
                    },
                    right: {
                        //deafult: 0 右侧边界白线的长度，前端支持此属性，但无UI表现,仅限数据交互使用。
                        length: { defualt: 0, type: Number },
                        //deafult: true 是否具有右侧边界白线
                        has: { default: true, type: Boolean } 
                    }
                },
                //deafult: true 是否具有人行班马线
                pedestrian: { default: true, type: Boolean },
                //default: true 是否具有人行暂留区
                stayArea: { default: true, type: Boolean },
                //default: true, 是否具有暂留区斑马线
                stayPedestrian: { default: true, type: Boolean },
                //default: true 是否具有机动车停止线
                stopLine: { default: true, type: Boolean },
                //车道,自右向左绘制(顺时针)
                Lane : { default: [], type: Array },
                type: Object
            },
            RoadLeft : {
                //路口名称，前端支持此属性，但无UI表现,仅限数据交互使用。
                name : { default: '', type: String },
                //边界白线控制
                boundary: { 
                    left : { 
                        //deafult: 0 左侧边界白线的长度，前端支持此属性，但无UI表现,仅限数据交互使用。
                        length: { defualt: 0, type: Number },
                        //deafult: true 是否具有左侧边界白线,
                        has: { default: true, type: Boolean } 
                    },
                    right: {
                        //deafult: 0 右侧边界白线的长度，前端支持此属性，但无UI表现,仅限数据交互使用。
                        length: { defualt: 0, type: Number },
                        //deafult: true 是否具有右侧边界白线
                        has: { default: true, type: Boolean } 
                    }
                },
                //deafult: true 是否具有人行班马线
                pedestrian: { default: true, type: Boolean },
                //default: true 是否具有人行暂留区
                stayArea: { default: true, type: Boolean },
                //default: true, 是否具有暂留区斑马线
                stayPedestrian: { default: true, type: Boolean },
                //default: true 是否具有机动车停止线
                stopLine: { default: true, type: Boolean },
                //车道,自右向左绘制(顺时针)
                Lane : { default: [], type: Array },
                type: Object
            },
            RoadWidth : {
                default: 500,
                type: Number
            }
        },
        data : function() {
            return {
                uuid : utils.uuid()
            }
        },
        components: {
            "Lane" : Lane
        },
        computed: {
            getCenterIntersection: function() {
                var me = this;
                return { x : 1920 / 2, y : 1080 / 2 };
            },
            getCrossIntersection: function() {
                var me = this;
                var len = utils.calcTriangleSubtenseLen(me.RoadWidth / 2, 90);
                return { x : 1920 / 2 + len, y : 1080 / 2 };
            },
            getTopIntersection: function() {
                var me = this;
                var v = me.getCrossIntersection;
                return utils.calcRadiusAnyPoint(v.x, v.y, me.RoadWidth, -135);
            },
            getBottomIntersection: function() {
                var me = this;
                var v = me.getCrossIntersection;
                return utils.calcRadiusAnyPoint(v.x, v.y, me.RoadWidth, 135);
            },
            calcRoadTopNotch: function() {
                var me = this;
                var v = me.getTopIntersection;
                var v1 = utils.calcRadiusAnyPoint(v.x, v.y, 100, -44.5);
                var cv = utils.calcRadiusAnyPoint(v.x, v.y, 50, -67.5);
                return "M${v1x},${v1y} S${cvx},${cvy} ${v2x},${v2y} L${vx},${vy} ${v1x},${v1y} z"
                    .replace(/(\$\{v1x\})/g, v.x).replace(/(\$\{v1y\})/g, v.y - 100).replace(/(\$\{v2x\})/g, v1.x).replace(/(\$\{v2y\})/g, v1.y)
                    .replace(/(\$\{vx\})/g, v.x).replace(/(\$\{vy\})/g, v.y).replace(/(\$\{cvx\})/g, cv.x).replace(/(\$\{cvy\})/g, cv.y);
            },
            calcRoadRightNotch: function() {
                var me = this;
                var v = me.getCrossIntersection;
                var v1 = utils.calcRadiusAnyPoint(v.x, v.y, 100, -45);
                var v2 = utils.calcRadiusAnyPoint(v.x, v.y, 100, 45);
                var cv = utils.calcRadiusAnyPoint(v.x, v.y, 50, 0);
                return "M${v1x},${v1y} S${cvx},${cvy} ${v2x},${v2y} L${vx},${vy} ${v1x},${v1y} z"
                    .replace(/(\$\{v1x\})/g, v1.x).replace(/(\$\{v1y\})/g, v1.y).replace(/(\$\{v2x\})/g, v2.x).replace(/(\$\{v2y\})/g, v2.y)
                    .replace(/(\$\{vx\})/g, v.x).replace(/(\$\{vy\})/g, v.y).replace(/(\$\{cvx\})/g, cv.x).replace(/(\$\{cvy\})/g, cv.y);
            },
            calcRoadBottomNotch: function() {
                var me = this;
                var v = me.getBottomIntersection;
                var v1 = utils.calcRadiusAnyPoint(v.x, v.y, 100, 44.5);
                var cv = utils.calcRadiusAnyPoint(v.x, v.y, 50, 67.5);
                return "M${v1x},${v1y} S${cvx},${cvy} ${v2x},${v2y} L${vx},${vy} ${v1x},${v1y} z"
                    .replace(/(\$\{v1x\})/g, v1.x).replace(/(\$\{v1y\})/g, v1.y).replace(/(\$\{v2x\})/g, v.x).replace(/(\$\{v2y\})/g, v.y + 100)
                    .replace(/(\$\{vx\})/g, v.x).replace(/(\$\{vy\})/g, v.y).replace(/(\$\{cvx\})/g, cv.x).replace(/(\$\{cvy\})/g, cv.y);
            },
            calcTopRoadBoundary: function() {
                var me = this;
                var v = me.getTopIntersection;
                var v1 = me.getCenterIntersection;
                var d1 = utils.calcRadiusAnyPoint(v.x, v.y, 100, -45);
                var cv = utils.calcRadiusAnyPoint(v.x, v.y, 50, -67.5);
                var r = "M${vx},${vy} V-499999.5".replace(/(\$\{vx\})/g, v1.x - me.RoadWidth).replace(/(\$\{vy\})/g, v1.y)
                var l = "M${d1x},${d1y} S${cvx},${cvy} ${vx},${vy} L${ex},${ey}"
                    .replace(/(\$\{d1x\})/g, d1.x).replace(/(\$\{d1y\})/g, d1.y).replace(/(\$\{cvx\})/g, cv.x).replace(/(\$\{cvy\})/g, cv.y)
                    .replace(/(\$\{vx\})/g, v.x).replace(/(\$\{vy\})/g, v.y - 100).replace(/(\$\{ex\})/g, v.x).replace(/(\$\{ey\})/g, -499999.5);
                
                var ov = utils.calcRadiusAnyPoint(v.x, v.y, 2.5, -67.5);
                var od1 = utils.calcRadiusAnyPoint(ov.x, ov.y, 100, -45);
                var ocv = utils.calcRadiusAnyPoint(ov.x, ov.y, 50, -67.5);
                var out = "M${d1x},${d1y} S${cvx},${cvy} ${vx},${vy} L${ex},${ey}"
                    .replace(/(\$\{d1x\})/g, od1.x).replace(/(\$\{d1y\})/g, od1.y).replace(/(\$\{cvx\})/g, ocv.x).replace(/(\$\{cvy\})/g, ocv.y)
                    .replace(/(\$\{vx\})/g, ov.x + 2.5).replace(/(\$\{vy\})/g, ov.y - 100).replace(/(\$\{ex\})/g, ov.x).replace(/(\$\{ey\})/g, -499999.5);
                return { right: r, left: l, out: out };
            },
            calcRightRoadBoundary: function() {
                var me = this;
                var v1 = me.getTopIntersection;
                var v2 = me.getCrossIntersection;
                var r1 = utils.calcRadiusAnyPoint(v1.x, v1.y, 50, -67.5);
                var d1 = utils.calcRadiusAnyPoint(v1.x, v1.y, 100, -45);
                var d2 = utils.calcRadiusAnyPoint(v1.x, v1.y, 499999.5, -45);
                var r2 = utils.calcRadiusAnyPoint(v2.x, v2.y, 50, 0);
                var d3 = utils.calcRadiusAnyPoint(v2.x, v2.y, 100, 45);
                var d4 = utils.calcRadiusAnyPoint(v2.x, v2.y, 100, -45);
                var d5 = utils.calcRadiusAnyPoint(v2.x, v2.y, 499999.5, -45);

                var r = "M${vx},${vy} S${cvx},${cvy} ${d1x},${d1y} L${d2x},${d2y}"
                    .replace(/(\$\{vx\})/g, v1.x).replace(/(\$\{vy\})/g, v1.y - 100).replace(/(\$\{cvx\})/g, r1.x).replace(/(\$\{cvy\})/g, r1.y)
                    .replace(/(\$\{d1x\})/g, d1.x).replace(/(\$\{d1y\})/g, d1.y).replace(/(\$\{d2x\})/g, d2.x).replace(/(\$\{d2y\})/g, d2.y);
                var l = "M${d1x},${d1y} S${cvx},${cvy} ${d2x},${d2y} L${d3x},${d3y}"
                    .replace(/(\$\{d1x\})/g, d3.x).replace(/(\$\{d1y\})/g, d3.y).replace(/(\$\{d2x\})/g, d4.x).replace(/(\$\{d2y\})/g, d4.y)
                    .replace(/(\$\{d3x\})/g, d5.x).replace(/(\$\{d3y\})/g, d5.y).replace(/(\$\{cvx\})/g, r2.x).replace(/(\$\{cvy\})/g, r2.y);
                
                var ov = utils.calcRadiusAnyPoint(v1.x, v1.y, 2.5, -67.5);
                var or1 = utils.calcRadiusAnyPoint(ov.x, ov.y, 50, -67.5);
                var od1 = utils.calcRadiusAnyPoint(ov.x, ov.y, 100, -45);
                var od2 = utils.calcRadiusAnyPoint(ov.x, ov.y, 499999.5, -45);
                var or = "M${vx},${vy} S${cvx},${cvy} ${d1x},${d1y} L${d2x},${d2y}"
                    .replace(/(\$\{vx\})/g, ov.x).replace(/(\$\{vy\})/g, ov.y - 100).replace(/(\$\{cvx\})/g, or1.x).replace(/(\$\{cvy\})/g, or1.y)
                    .replace(/(\$\{d1x\})/g, od1.x).replace(/(\$\{d1y\})/g, od1.y).replace(/(\$\{d2x\})/g, od2.x).replace(/(\$\{d2y\})/g, od2.y);

                ov = utils.calcRadiusAnyPoint(v2.x, v2.y, 2.5, 0);
                var or2 = utils.calcRadiusAnyPoint(ov.x, ov.y, 50, 0);
                var od3 = utils.calcRadiusAnyPoint(ov.x, ov.y, 100, 45);
                var od4 = utils.calcRadiusAnyPoint(ov.x, ov.y, 100, -45);
                var od5 = utils.calcRadiusAnyPoint(ov.x, ov.y, 499999.5, -45);
                var ol = "M${d1x},${d1y} S${cvx},${cvy} ${d2x},${d2y} L${d3x},${d3y}"
                .replace(/(\$\{d1x\})/g, od3.x).replace(/(\$\{d1y\})/g, od3.y).replace(/(\$\{d2x\})/g, od4.x).replace(/(\$\{d2y\})/g, od4.y)
                .replace(/(\$\{d3x\})/g, od5.x).replace(/(\$\{d3y\})/g, od5.y).replace(/(\$\{cvx\})/g, or2.x).replace(/(\$\{cvy\})/g, or2.y);
                
                return { right: r, left: l, outRight: or, outLeft: ol };
            },
            calcLeftRoadBoudary: function() {
                var me = this;
                var v1 = me.getCrossIntersection;
                var v2 = me.getBottomIntersection;

                var d1 = utils.calcRadiusAnyPoint(v1.x, v1.y, 100, -45);
                var r1 = utils.calcRadiusAnyPoint(v1.x, v1.y, 50, 0);
                var d2 = utils.calcRadiusAnyPoint(v1.x, v1.y, 100, 45);
                var d3 = utils.calcRadiusAnyPoint(v1.x, v1.y, 499999.5, 45);
                var r = "M${d1x},${d1y} S${cvx},${cvy} ${d2x},${d2y} L${d3x},${d3y}"
                    .replace(/(\$\{d1x\})/g, d1.x).replace(/(\$\{d1y\})/g, d1.y).replace(/(\$\{d2x\})/g, d2.x).replace(/(\$\{d2y\})/g, d2.y)
                    .replace(/(\$\{d3x\})/g, d3.x).replace(/(\$\{d3y\})/g, d3.y).replace(/(\$\{cvx\})/g, r1.x).replace(/(\$\{cvy\})/g, r1.y);

                var ov = utils.calcRadiusAnyPoint(v1.x, v1.y, 2.5, 0);
                var od1 = utils.calcRadiusAnyPoint(ov.x, ov.y, 100, -45);
                var or1 = utils.calcRadiusAnyPoint(ov.x, ov.y, 50, 0);
                var od2 = utils.calcRadiusAnyPoint(ov.x, ov.y, 100, 45);
                var od3 = utils.calcRadiusAnyPoint(ov.x, ov.y, 499999.5, 45);
                var or = "M${d1x},${d1y} S${cvx},${cvy} ${d2x},${d2y} L${d3x},${d3y}"
                    .replace(/(\$\{d1x\})/g, od1.x).replace(/(\$\{d1y\})/g, od1.y).replace(/(\$\{d2x\})/g, od2.x).replace(/(\$\{d2y\})/g, od2.y)
                    .replace(/(\$\{d3x\})/g, od3.x).replace(/(\$\{d3y\})/g, od3.y).replace(/(\$\{cvx\})/g, or1.x).replace(/(\$\{cvy\})/g, or1.y);

                var d4 = utils.calcRadiusAnyPoint(v2.x, v2.y, 100, 90);
                var r2 = utils.calcRadiusAnyPoint(v2.x, v2.y, 50, 67.5);
                var d5 = utils.calcRadiusAnyPoint(v2.x, v2.y, 100, 45);
                var d6 = utils.calcRadiusAnyPoint(v2.x, v2.y, 499999.5, 45);
                var l = "M${d4x},${d4y} S${cvx},${cvy} ${d5x},${d5y} L${d6x},${d6y}"
                    .replace(/(\$\{d4x\})/g, d4.x).replace(/(\$\{d4y\})/g, d4.y).replace(/(\$\{d5x\})/g, d5.x).replace(/(\$\{d5y\})/g, d5.y)
                    .replace(/(\$\{d6x\})/g, d6.x).replace(/(\$\{d6y\})/g, d6.y).replace(/(\$\{cvx\})/g, r2.x).replace(/(\$\{cvy\})/g, r2.y);

                ov = utils.calcRadiusAnyPoint(v2.x, v2.y, 2.5, 67.5);
                var od4 = utils.calcRadiusAnyPoint(ov.x, ov.y, 100, 90);
                var or2 = utils.calcRadiusAnyPoint(ov.x, ov.y, 50, 67.5);
                var od5 = utils.calcRadiusAnyPoint(ov.x, ov.y, 100, 45);
                var od6 = utils.calcRadiusAnyPoint(ov.x, ov.y, 499999.5, 45);
                var ol = "M${d4x},${d4y} S${cvx},${cvy} ${d5x},${d5y} L${d6x},${d6y}"
                    .replace(/(\$\{d4x\})/g, od4.x + 2.5).replace(/(\$\{d4y\})/g, od4.y).replace(/(\$\{d5x\})/g, od5.x).replace(/(\$\{d5y\})/g, od5.y)
                    .replace(/(\$\{d6x\})/g, od6.x).replace(/(\$\{d6y\})/g, od6.y).replace(/(\$\{cvx\})/g, or2.x).replace(/(\$\{cvy\})/g, or2.y);

                return { left: l, right : r, outRight: or, outLeft: ol };
            },
            calcBottomRoadBoudary: function() {
                var me = this;
                var v1 = me.getCenterIntersection;
                var v2 = me.getBottomIntersection;

                var l = "M${vx},${vy} V499999.5".replace(/(\$\{vx\})/g, v1.x - me.RoadWidth).replace(/(\$\{vy\})/g, v1.y);
                var d1 = utils.calcRadiusAnyPoint(v2.x, v2.y, 100, 45);
                var r1 = utils.calcRadiusAnyPoint(v2.x, v2.y, 50, 67.5);
                var d2 = utils.calcRadiusAnyPoint(v2.x, v2.y, 100, 90);
                var d3 = utils.calcRadiusAnyPoint(v2.x, v2.y, 499999.5, 90);
                var r = "M${d1x},${d1y} S${cvx},${cvy} ${d2x},${d2y} L${d3x},${d3y}"
                    .replace(/(\$\{d1x\})/g, d1.x).replace(/(\$\{d1y\})/g, d1.y).replace(/(\$\{d2x\})/g, d2.x).replace(/(\$\{d2y\})/g, d2.y)
                    .replace(/(\$\{d3x\})/g, d3.x).replace(/(\$\{d3y\})/g, d3.y).replace(/(\$\{cvx\})/g, r1.x).replace(/(\$\{cvy\})/g, r1.y);
                
                var ov = utils.calcRadiusAnyPoint(v2.x, v2.y, 2.5, 67.5);
                var od1 = utils.calcRadiusAnyPoint(ov.x, ov.y, 100, 45);
                var or1 = utils.calcRadiusAnyPoint(ov.x, ov.y, 50, 67.5);
                var od2 = utils.calcRadiusAnyPoint(ov.x, ov.y, 100, 90);
                var od3 = utils.calcRadiusAnyPoint(ov.x, ov.y, 499999.5, 90);
                var or = "M${d1x},${d1y} S${cvx},${cvy} ${d2x},${d2y} L${d3x},${d3y}"
                    .replace(/(\$\{d1x\})/g, od1.x).replace(/(\$\{d1y\})/g, od1.y).replace(/(\$\{d2x\})/g, od2.x +3).replace(/(\$\{d2y\})/g, od2.y)
                    .replace(/(\$\{d3x\})/g, od3.x + 3).replace(/(\$\{d3y\})/g, od3.y).replace(/(\$\{cvx\})/g, or1.x).replace(/(\$\{cvy\})/g, or1.y);
                return { left: l, right: r, outRight: or }
            },
            calcRoadTopLaneWidth: function() {
                var me = this;
                if(me.RoadTop.Lane && me.RoadTop.Lane.length) {
                    return me.RoadWidth / me.RoadTop.Lane.length;
                }
                return me.RoadWidth;
            },
            calcRoadRightLaneWidth: function() {
                var me = this;
                if(me.RoadRight.Lane && me.RoadRight.Lane.length) {
                    return me.RoadWidth / me.RoadRight.Lane.length;
                }
                return me.RoadWidth;
            },
            calcRoadBottomLaneWidth: function() {
                var me = this;
                if(me.RoadBottom.Lane && me.RoadBottom.Lane.length) {
                    return me.RoadWidth / me.RoadBottom.Lane.length;
                }
                return me.RoadWidth;
            },
            calcRoadLeftLaneWidth: function() {
                var me = this;
                if(me.RoadLeft.Lane && me.RoadLeft.Lane.length) {
                    return me.RoadWidth / me.RoadLeft.Lane.length;
                }
                return me.RoadWidth;
            },
            calcRoadTopStopLine: function() {
                var me = this;
                var v = me.getTopIntersection;
                var v1 = utils.calcRadiusAnyPoint(v.x, v.y, 120, -90);
                var v2 = { x : v1.x - me.RoadWidth, y : v1.y };
                var lane = me.RoadTop.Lane && me.RoadTop.Lane.length || 0;
                var diff = lane <= 2 ? 50 : 0;
                var w = lane <= 2 ? me.RoadWidth - 50 : ((me.RoadTop.Lane.filter(function(it) { return !it.reverse }).length || 0) * (me.RoadWidth / lane)) - diff;
                return { p1: v2, p2 : { x: v2.x + w, y : v2.y } };
            },
            calcRoadRightStopLine: function() {
                var me = this;
                var v = me.getTopIntersection;
                var v1 = utils.calcRadiusAnyPoint(v.x, v.y, 120, -45);
                var lane = me.RoadRight.Lane && me.RoadRight.Lane.length || 0;
                var diff = lane <= 2 ? 50 : me.calcRoadRightLaneWidth;
                var w = lane <= 2 ? me.RoadWidth - diff * 2 : ((me.RoadRight.Lane.filter(function(it) { return !it.reverse }).length || 0) * (me.RoadWidth / lane)) - diff;
                var p1 = utils.calcRadiusAnyPoint(v1.x, v1.y, diff, 45);
                var p2 = utils.calcRadiusAnyPoint(p1.x, p1.y, w, 45);
                return { p1: p1, p2: p2 }
            },
            calcRoadLeftStopLine: function() {
                var me = this;
                var v = me.getCrossIntersection;
                var v1 = utils.calcRadiusAnyPoint(v.x, v.y, 120, 45);
                var lane = me.RoadLeft.Lane && me.RoadLeft.Lane.length || 0;
                var diff = lane <= 2 ? 50 : me.calcRoadLeftLaneWidth;
                var w = lane <= 2 ? me.RoadWidth - diff * 2 : ((me.RoadLeft.Lane.filter(function(it) { return !it.reverse }).length || 0) * (me.RoadWidth / lane)) - diff;
                var p1 = utils.calcRadiusAnyPoint(v1.x, v1.y, diff, 135);
                var p2 = utils.calcRadiusAnyPoint(p1.x, p1.y, w, 135);
                return { p1: p1, p2: p2 }
            },
            calcRoadBottomStopLine: function() {
                var me = this;
                var v = me.getBottomIntersection;
                var v1 = utils.calcRadiusAnyPoint(v.x, v.y, 120, 90);
                var lane = me.RoadBottom.Lane && me.RoadBottom.Lane.length || 0;
                var diff = lane <= 2 ? 50 : me.calcRoadBottomLaneWidth;
                var w = lane <= 2 ? me.RoadWidth - diff : ((me.RoadBottom.Lane.filter(function(it) { return !it.reverse }).length || 0) * (me.RoadWidth / lane)) - diff;
                return { p1: { x : v1.x - diff, y: v1.y }, p2 : { x : v1.x - diff - w, y : v1.y } }
            },
            calcPedestrianLength: function() {
                var me = this;
                var topLane = me.RoadTop.Lane.length | 0;
                var rightLane = me.RoadRight.Lane.length | 0;
                var leftLane = me.RoadLeft.Lane.length | 0;
                var bottomLane = me.RoadBottom.Lane.length | 0;
                var v = me.getTopIntersection;
                var v1 = me.getCrossIntersection;
                var v2 = me.getBottomIntersection;
                var vt = utils.calcRadiusAnyPoint(v.x, v.y, 80, -90);
                var vr = utils.calcRadiusAnyPoint(v.x, v.y, 80, -45);
                var vl = utils.calcRadiusAnyPoint(v1.x, v1.y, 80, 45);
                var vb = utils.calcRadiusAnyPoint(v2.x, v2.y, 80, 90);
                var rd = rightLane - 2 <= 0 ? 50 : me.RoadWidth / rightLane;
                var ld = leftLane - 2 <= 0 ? 50 : me.RoadWidth / leftLane;
                return {
                    top : {
                        p1 : { x : topLane - 2 <= 0 ? vt.x - 50 : vt.x - (me.RoadWidth / topLane), y : vt.y },
                        p2 : { x : topLane - 2 <= 0 ? vt.x - me.RoadWidth : vt.x - me.RoadWidth, y : vt.y }
                    },
                    right: {
                        p1 : utils.calcRadiusAnyPoint(vr.x, vr.y, rd, 45),
                        p2 : utils.calcRadiusAnyPoint(vr.x, vr.y, me.RoadWidth - rd, 45)
                    },
                    left : {
                        p1 : utils.calcRadiusAnyPoint(vl.x, vl.y, ld, 135),
                        p2 : utils.calcRadiusAnyPoint(vl.x, vl.y, me.RoadWidth - ld, 135)
                    },
                    bottom: {
                        p1 : { x : bottomLane - 2 <= 0 ? vb.x - 50 : vb.x - (me.RoadWidth / bottomLane), y : vb.y },
                        p2 : { x : bottomLane - 2 <= 0 ? vb.x - me.RoadWidth : vb.x - me.RoadWidth, y : vb.y }
                    }
                }
            },
            calcRoadTopStay: function() {
                var me = this;
                var v = me.getTopIntersection;
                var v1 = utils.calcRadiusAnyPoint(v.x, v.y, 120, -90);
                var v2 = utils.calcRadiusAnyPoint(v.x, v.y, 120, -45);
                var left_lane = me.RoadTop.Lane && me.RoadTop.Lane.length || 0;
                var right_lane = me.RoadRight.Lane && me.RoadRight.Lane.length || 0;
                var ld = left_lane <= 2 ? 50 : me.RoadWidth / left_lane;
                var rd = right_lane <= 2 ? 50 : me.RoadWidth / right_lane;
                
                var r1 = utils.calcRadiusAnyPoint(v1.x, v1.y, ld, 180);
                var r2 = utils.calcRadiusAnyPoint(v2.x, v2.y, rd, 45);
                var e1 = utils.calcRadiusAnyPoint(r1.x, r1.y, 9999, 90);
                var e2 = utils.calcRadiusAnyPoint(r2.x, r2.y, 9999, 135);
                var c = utils.calcLineIntersection(r1, e1, r2, e2);
                var dd = utils.calcPointDist(r1, c);
                var cd = utils.calcRadiusAnyPoint(c.x, c.y, dd / 1.5, -45);
                var d = utils.calcPointDist(r1, c);
                var s = utils.calcRadiusAnyPoint(c.x, c.y, d / 5, -67.5);
                return "M${d1x},${d1y} L${q1x},${q1y} S${vx},${vy} ${cdx},${cdy} L${d2x},${d2y} S${sx},${sy} ${d1x},${d1y} z"
                    .replace(/(\$\{d1x\})/g, r1.x).replace(/(\$\{d1y\})/g, r1.y).replace(/(\$\{q1x\})/g, r1.x).replace(/(\$\{q1y\})/g, c.y - dd / 1.5)
                    .replace(/(\$\{vx\})/g, c.x).replace(/(\$\{vy\})/g, c.y).replace(/(\$\{cdx\})/g, cd.x).replace(/(\$\{cdy\})/g, cd.y)
                    .replace(/(\$\{d2x\})/g, r2.x).replace(/(\$\{d2y\})/g, r2.y).replace(/(\$\{sx\})/g, s.x).replace(/(\$\{sy\})/g, s.y);
            },
            calcRoadRightStay: function() {
                var me = this;
                var v = me.getCrossIntersection;
                var v1 = utils.calcRadiusAnyPoint(v.x, v.y, 120, -45);
                var v2 = utils.calcRadiusAnyPoint(v.x, v.y, 120, 45);
                var left_lane = me.RoadRight.Lane && me.RoadRight.Lane.length || 0;
                var right_lane = me.RoadLeft.Lane && me.RoadLeft.Lane.length || 0;
                var ld = left_lane <= 2 ? 50 : me.RoadWidth / left_lane;
                var rd = right_lane <= 2 ? 50 : me.RoadWidth / right_lane;

                var r1 = utils.calcRadiusAnyPoint(v1.x, v1.y, ld, -135);
                var r2 = utils.calcRadiusAnyPoint(v2.x, v2.y, rd, 135);
                var e1 = utils.calcRadiusAnyPoint(r1.x, r1.y, 9999, 135);
                var e2 = utils.calcRadiusAnyPoint(r2.x, r2.y, 9999, -135);
                var c = utils.calcLineIntersection(r1, e1, r2, e2);
                var rc = utils.calcRadiusAnyPoint(c.x, c.y, 10, -45);
                var lc = utils.calcRadiusAnyPoint(c.x, c.y, 10, 45);
                var s = utils.calcRadiusAnyPoint(c.x, c.y, 30, 0);
                return "M${d1x},${d1y} L${q1x},${q1y} S${vx},${vy} ${q2x},${q2y} L${d2x},${d2y} S${sx},${sy} ${d1x},${d1y} z"
                    .replace(/(\$\{d1x\})/g, r1.x).replace(/(\$\{d1y\})/g, r1.y).replace(/(\$\{q1x\})/g, rc.x).replace(/(\$\{q1y\})/g, rc.y)
                    .replace(/(\$\{vx\})/g, c.x).replace(/(\$\{vy\})/g, c.y).replace(/(\$\{q2x\})/g, lc.x).replace(/(\$\{q2y\})/g, lc.y)
                    .replace(/(\$\{d2x\})/g, r2.x).replace(/(\$\{d2y\})/g, r2.y).replace(/(\$\{sx\})/g, s.x).replace(/(\$\{sy\})/g, s.y);
            },
            calcRoadLeftStay: function() {
                var me = this;
                var v = me.getBottomIntersection;
                var v1 = utils.calcRadiusAnyPoint(v.x, v.y, 120, 45);
                var v2 = utils.calcRadiusAnyPoint(v.x, v.y, 120, 90);
                var left_lane = me.RoadLeft.Lane && me.RoadLeft.Lane.length || 0;
                var right_lane = me.RoadBottom.Lane && me.RoadBottom.Lane.length || 0;
                var ld = left_lane <= 2 ? 50 : me.RoadWidth / left_lane;
                var rd = right_lane <= 2 ? 50 : me.RoadWidth / right_lane;
                
                var r1 = utils.calcRadiusAnyPoint(v1.x, v1.y, ld, -45);
                var r2 = utils.calcRadiusAnyPoint(v2.x, v2.y, rd, 180);
                var e1 = utils.calcRadiusAnyPoint(r1.x, r1.y, 9999, -135);
                var e2 = utils.calcRadiusAnyPoint(r2.x, r2.y, 9999, -90);
                var c = utils.calcLineIntersection(r1, e1, r2, e2);
                var dd = utils.calcPointDist(r1, c);
                var cd = utils.calcRadiusAnyPoint(c.x, c.y, dd / 1.5, 45);
                var d = utils.calcPointDist(r1, c);
                var s = utils.calcRadiusAnyPoint(c.x, c.y, d / 5, 67.5);
                return "M${d1x},${d1y} L${cdx},${cdy} S${vx},${vy} ${q1x},${q1y} L${d2x},${d2y} S${sx},${sy} ${d1x},${d1y} z"
                    .replace(/(\$\{d1x\})/g, r1.x).replace(/(\$\{d1y\})/g, r1.y).replace(/(\$\{q1x\})/g, c.x).replace(/(\$\{q1y\})/g, c.y + dd / 1.5)
                    .replace(/(\$\{vx\})/g, c.x).replace(/(\$\{vy\})/g, c.y).replace(/(\$\{cdx\})/g, cd.x).replace(/(\$\{cdy\})/g, cd.y)
                    .replace(/(\$\{d2x\})/g, r2.x).replace(/(\$\{d2y\})/g, r2.y).replace(/(\$\{sx\})/g, s.x).replace(/(\$\{sy\})/g, s.y);
            },
            calcRightPedestrian: function() {
                var me = this;
                var v = me.getTopIntersection;
                var tLane = me.RoadTop.Lane && me.RoadTop.Lane.length || 0;
                var rLane = me.RoadTop.Lane && me.RoadRight.Lane.length || 0;
                var td = tLane <= 2 ? 50 : me.RoadWidth / tLane;
                var rd = rLane <= 2 ? 50 : me.RoadWidth / rLane;
                var w = Math.sqrt(td * td + rd * rd);
                var p1 = utils.calcRadiusAnyPoint(v.x, v.y, 75, -67.5);
                var p2 = utils.calcRadiusAnyPoint(p1.x, p1.y, w ,112.5);

                return { p1 : p1, p2 : p2 };
            },
            calcLeftPedestrian: function() {
                var me = this;
                var v = me.getCrossIntersection;
                var rLane = me.RoadRight.Lane && me.RoadRight.Lane.length || 0;
                var lLane = me.RoadLeft.Lane && me.RoadLeft.Lane.length || 0;
                var rd = rLane <= 2 ? 50 : me.RoadWidth / rLane;
                var ld = lLane <= 2 ? 50 : me.RoadWidth / lLane;
                var w = Math.sqrt(ld * ld + rd * rd);
                var p1 = utils.calcRadiusAnyPoint(v.x, v.y, 60, 0);
                var p2 = utils.calcRadiusAnyPoint(p1.x, p1.y, w ,180);

                return { p1 : p1, p2 : p2 };
            },
            calcBottomPedestrian: function() {
                var me = this;
                var v = me.getBottomIntersection;
                var lLane = me.RoadLeft.Lane && me.RoadLeft.Lane.length || 0;
                var bLane = me.RoadBottom.Lane && me.RoadBottom.Lane.length || 0;
                var ld = lLane <= 2 ? 50 : me.RoadWidth / lLane;
                var bd = bLane <= 2 ? 50 : me.RoadWidth / bLane;
                var w = Math.sqrt(ld * ld + bd * bd);
                var p1 = utils.calcRadiusAnyPoint(v.x, v.y, 75, 67.5);
                var p2 = utils.calcRadiusAnyPoint(p1.x, p1.y, w, 247.5);

                return { p1 : p1, p2 : p2 };
            }
        },
        methods: {
            crossTopMoveTo: function(n) {
                var me = this;
                var v = me.getTopIntersection;
                var left = v.x - me.RoadWidth;
                var top = v.y - 120;
                var width = me.calcRoadTopLaneWidth;
                return { x : (n + 1) * width + left, y: top };
            },
            crossRightMoveTo: function(n) {
                var me = this;
                var v1 = me.getTopIntersection;
                var v = utils.calcRadiusAnyPoint(v1.x, v1.y, 120, -45);
                var diff = (n + 1) * me.calcRoadRightLaneWidth;
                return utils.calcRadiusAnyPoint(v.x, v.y, diff, 45);
            },
            crossLeftMoveTo: function(n) {
                var me = this;
                var v1 = me.getCrossIntersection;
                var v = utils.calcRadiusAnyPoint(v1.x, v1.y, 120, 45);
                var diff = (n + 1) * me.calcRoadLeftLaneWidth;
                return utils.calcRadiusAnyPoint(v.x, v.y, diff, 135);
            },
            crossBottomMoveTo: function(n) {
                var me = this;
                var v1 = me.getBottomIntersection;
                var v = utils.calcRadiusAnyPoint(v1.x, v1.y, 120, 90);
                var diff = (n + 1) * me.calcRoadBottomLaneWidth;
                return utils.calcRadiusAnyPoint(v.x, v.y, diff, 180);
            },
            onRoadPedestrianClick: function(e, no, isStay) {
                //十字路口行人斑马线的点击事件
                this.$parent.$emit('cross-road-pedestrian-click', e, no, isStay);
            },
            onRoadStopLineClick: function(e, no) {
                //机动车停止线点击事件
                this.$parent.$emit("cross-road-stopline-click", e, no);
            },
            onRoadBoundaryClick: function(e, no, isRight) {
                //十字路口公路边界线的点击事件
                this.$parent.$emit('cross-road-boundary-click', e, no, isRight ? 'right' : 'left');
            },
            onRoadLanePavementClick: function(e, no, lane) {
                //机动车道路点击事件
                this.$parent.$emit("cross-road-pavement-click", e, no, lane);
            },
            onRoadLaneSolidLineClick: function(e, no, lane) {
                //机动车道路白色实线点击事件
                this.$parent.$emit("cross-solid-line-click", e, no, lane);
            },
            onRoadLaneDottedLineClick: function(e, no, lane) {
                //机动车道路白色虚线点击事件
                this.$parent.$emit("cross-dotted-line-click", e, no, lane);
            },
            onRoadParterreBoundaryClick: function(e, no, lane) {
                //花坛边界线点击事件
                this.$parent.$emit("cross-parterre-boundary-line-click", e, no, lane);
            },
            onRoadLaneYDottedLineClick: function() {
                //机动车黄色虚线点击事件
                this.$parent.$emit("cross-y-dotted-line-click", e, no, lane);
            },
            onRoadLaneYSolidLineClick: function(e, no, lane) {
                //机动车黄色实线点击事件
                this.$parent.$emit("cross-y-solid-line-click", e, no, lane);
            },
            onRoadLaneYDoubleSolidLineClick: function(e, no, lane, side) {
                //机动车双黄色实线点击事件
                this.$parent.$emit("cross-y-double-solid-line-click", e, no, lane, side);
            },
            onRoadLaneYDoubleDottedLineClick: function(e, no, lane, side) {
                //机动车黄色虚线点击事件
                this.$parent.$emit("cross-y-double-dashed-line-click", e, no, lane, side);
            },
            onRoadLaneYSolidAreaClick: function(e, no, lane) {
                //机动车黄色禁停区域点击事件
                this.$parent.$emit("cross-y-area-click", e, no, lane);
            },
            onRoadLaneParterreClick: function(e, no, lane) {
                //花坛绿色区域点击事件
                this.$parent.$emit("cross-parterre-click", e, no, lane);
            },
            onRoadLaneParterreLineClick: function(e, no, lane, side) {
                //花坛内部白线点击事件
                this.$parent.$emit("cross-parterre-line-click", e, no, lane, side);
            },
            onRoadLaneParterreSafeAreaClick: function(e, no, lane) {
                //安全岛点击事件
                this.$parent.$emit("cross-parterre-safearea-click", e, no, lane);
            },
            onRoadLaneMarkClick: function(e, no, lane, side) {
                //道路路标点击事件
                var me = this;
                var mark = {};
                if(no === 0) {
                    mark = me.RoadTop.Lane[lane].landmark
                }

                if(no === 1) {
                    mark = me.RoadRight.Lane[lane].landmark
                }

                if(no === 2) {
                    mark = me.RoadBottom.Lane[lane].landmark
                }

                if(no === 3) {
                    mark = me.RoadLeft.Lane[lane].landmark
                }

                this.$parent.$emit("cross-lane-mark-click", e, no, lane, mark[side].seq, mark[side].mark);
            },
            onCrossStayAreaClick: function(e, no) {
                //十字路口行人暂留区域点击事件
                this.$parent.$emit('cross-stay-click', e, no, 'right');
            }
        }
    })

    var render = function() {
        var template = [
            "<svg xmlns='http://wwW.w3.org/2000/svg' class='ivsom-road' version='1.1' viewBox='0 0 1920 1080' preserveAspectRatio='none meet' style='width:100%; height:100%' @mousedown.stop='onEnabledDrag' @mouseup.stop='onDragDrop' @mouseleave.stop='onDragDrop' @mousemove.stop='onDragMove' @mousewheel.prevent.stop='onScaleView'>",
                "<defs>",
                    "<linearGradient id='orange_red' x1='20%' y1='0%' x2='80%' y2='0%'>",
                        "<stop offset='0%' style='stop-color:#a52a2a; stop-opacity:1'/>",
                        "<stop offset='50%' style='stop-color:#ff0000; stop-opacity:1'/>",
                        "<stop offset='100%' style='stop-color:#a52a2a; stop-opacity:1'/>",
                    "</linearGradient>",
                "</defs>",
                "<defs>",
                    "<linearGradient id='orange_blue' x1='20%' y1='0%' x2='80%' y2='0%'>",
                        "<stop offset='0%' style='stop-color:#3300cc; stop-opacity:1'/>",
                        "<stop offset='50%' style='stop-color:#3366ff; stop-opacity:1'/>",
                        "<stop offset='100%' style='stop-color:#3300cc; stop-opacity:1'/>",
                    "</linearGradient>",
                "</defs>",
                "<defs>",
                    "<clipPath id='clip'>",
                        "<path d='M-800,-800 -800,1880 2720,1880 2720,-800 -800,-800 z' />",
                    "</clipPath>",
                "</defs>",
                "<defs>",
                    "<g id='compass'>",
                        "<image x='0' y='0' width='170' height='170' :transform=\"'rotate(' + Angle + ', 85 85)'\" xlink:href='data:image/png;base64,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' />",
                        "<path d='M85,10 L75,85 S85,75 95,85 L85,10 z' fill='url(#orange_red)' />",
                        "<path d='M85,160 L75,85 S85,95 95,85 L85,160 z' fill='url(#orange_blue)' />",
                    "</g>",
                "</defs>",
                "<cross-road v-if=\"RoadMode === 'A'\" :road-top='Roads[0]' :road-width='RoadWidth' :road-right='Roads[1]' :road-bottom='Roads[2]' :road-left='Roads[3]' :style=\"{ transformOrigin: 'center center', transform: getMatrix }\" ></cross-road>",
                "<y-road v-if=\"RoadMode === 'Y'\" :road-width='RoadWidth' :road-left='Roads[0]' :road-right='Roads[1]' :road-bottom='Roads[2]' :style=\"{ transformOrigin: 'center center', transform: getMatrix }\" ></y-road>",
                "<t-road v-if=\"RoadMode === 'T'\" :road-width='RoadWidth' :road-left='Roads[0]' :road-right='Roads[1]' :road-bottom='Roads[2]' :style=\"{ transformOrigin: 'center center', transform: getMatrix }\" ></t-road>",
                "<k-road v-if=\"RoadMode === 'K'\" :road-top='Roads[0]' :road-width='RoadWidth' :road-right='Roads[1]' :road-left='Roads[2]' :road-bottom='Roads[3]'  :style=\"{ transformOrigin: 'center center', transform: getMatrix }\" ></k-road>",
                "<use x='20' y='20' xlink:href='#compass' />",
            "</svg>"
        ];
        return template.join('');
    }

    var intersection = Vue.extend({
        template: render.apply(this),
        props: {
            Roads : {
                default : function() {
                    return [];
                },
                type: Array
            },
            RoadMode : {
                default : 'A'
            },
            Angle: {
                default : 0,
                type: Number
            },
            RoadWidth : {
                default: 500
            }
        },
        data: function() {
            return {
                move: { isDrag : false, drag : { x : 0, y : 0, offsetX: 0, offsetY: 0 } },
                rotate: { isRotate : false, x: 0, y: 0 },
                moveTop: 0,
                moveLeft: 0,
                scale: 1,
            }
        },
        components: {
            "CrossRoad" : crossRoads,
            "YRoad" : YRoads,
            "TRoad" : TRoads,
            "KRoad" : KRoads
        },
        computed:{
            getMatrix: function() {
                var me = this;
                var m1 = (Math.cos(me.Angle * Math.PI / 180) * me.scale).toFixed(6);
                var m2 = (Math.sin(me.Angle * Math.PI / 180) * me.scale).toFixed(6);
                var m3 = (-1 * (Math.sin(me.Angle * Math.PI / 180) * me.scale)).toFixed(6);
                return "matrix("+ m1 +","+ m2 +","+ m3 +","+ m1 +","+ me.moveLeft +","+ me.moveTop +")";
            }
        },
        methods: {
            onEnabledDrag: function(e) {
                var me = this;
                if (e.button === 0) {
                    me.$set(me, "move", { isDrag : true, drag : { x : e.clientX, y : e.clientY, offsetX: me.moveLeft, offsetY: me.moveTop } });
                }

                if (e.button === 1) {
                    me.$set(me, "rotate", { isRotate : true, x : e.clientX, y : e.clientY });
                }
            },
            onDragDrop: function(e) {
                var me = this;
                if (e.button === 0) {
                    me.$set(me, "move", { isDrag : false, drag : { x : 0, y : 0, offsetX: me.moveLeft, offsetY: me.moveTop } });
                }

                if(e.button === 1) {
                    me.$set(me, "rotate", { isRotate : false, x: 0, y : 0 });
                }
            },
            onDragMove: function (e) {
                var me = this
                if(me.move.isDrag) {
                    var top = e.clientY;
                    var left = e.clientX;
                    var moveTop = top - me.move.drag.y;
                    var moveLeft = left - me.move.drag.x;
                    me.moveTop = (me.move.drag.offsetY + moveTop);
                    me.moveLeft =  (me.move.drag.offsetX + moveLeft);
                }

                if(me.rotate.isRotate) {
                    var p = { x: 1920 / 2, y : 1080 / 2 };
                    var angle = utils.calcTriangleAngle(
                        p,
                        { x : e.clientX, y : e.clientY }
                    )
                    me.$emit('update:angle', angle);
                }
            },
            onScaleView: function(e) {
                var me = this;
                me.scale = event.wheelDelta > 0 ? me.scale + 0.01 : me.scale - 0.01;
                me.scale = me.scale > 4 ? 4 : me.scale < 0 ? 0 : me.scale;
            }
        }
    })

    function initialize() {
        Vue.component("intersection", intersection);
    }

    exports.install = initialize;
    Object.defineProperty(exports, '__esModule', { value: true });
})));